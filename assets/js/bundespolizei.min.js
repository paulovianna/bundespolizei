var content=$("#content"),menu_toggle=$("#menu-toggle"),menu=$("#menu"),menu_active=!1;menu_toggle.on("click",function(a){menu.toggleClass("sidebar-hidden"),content.toggleClass("content-push"),a.preventDefault()}),function(){function a(a,c){a.prototype=b(c.prototype),a.prototype.constructor=a,a.parent=c.prototype}function b(a){function b(){}return b.prototype=a,new b}function c(a,b,c){return"millisecond"===c?a.setMilliseconds(a.getMilliseconds()+1*b):"second"===c?a.setSeconds(a.getSeconds()+1*b):"minute"===c?a.setMinutes(a.getMinutes()+1*b):"hour"===c?a.setHours(a.getHours()+1*b):"day"===c?a.setDate(a.getDate()+1*b):"week"===c?a.setDate(a.getDate()+7*b):"month"===c?a.setMonth(a.getMonth()+1*b):"year"===c&&a.setFullYear(a.getFullYear()+1*b),a}function d(a,b){return K[b+"Duration"]*a}function e(a,b){var c=!1;for(0>a&&(c=!0,a*=-1),a=""+a,b=b?b:1;a.length<b;)a="0"+a;return c?"-"+a:a}function f(a){a=a.replace(/^\s\s*/,"");for(var b=/\s/,c=a.length;b.test(a.charAt(--c)););return a.slice(0,c+1)}function g(a){a.roundRect=function(a,b,c,d,e,f,g,h){g&&(this.fillStyle=g),h&&(this.strokeStyle=h),"undefined"==typeof stroke&&(stroke=!0),"undefined"==typeof e&&(e=5),this.lineWidth=f,this.beginPath(),this.moveTo(a+e,b),this.lineTo(a+c-e,b),this.quadraticCurveTo(a+c,b,a+c,b+e),this.lineTo(a+c,b+d-e),this.quadraticCurveTo(a+c,b+d,a+c-e,b+d),this.lineTo(a+e,b+d),this.quadraticCurveTo(a,b+d,a,b+d-e),this.lineTo(a,b+e),this.quadraticCurveTo(a,b,a+e,b),this.closePath(),g&&this.fill(),h&&f>0&&this.stroke()}}function h(a,b){return a-b}function j(a,b){return a.x-b.x}function k(a){var b=((16711680&a)>>16).toString(16),c=((65280&a)>>8).toString(16);return a=((255&a)>>0).toString(16),b=2>b.length?"0"+b:b,c=2>c.length?"0"+c:c,a=2>a.length?"0"+a:a,"#"+b+c+a}function l(a,b,c){c=c||"normal";var d=a+"_"+b+"_"+c,e=L[d];if(isNaN(e)){try{if(a="position:absolute; left:0px; top:-20000px; padding:0px;margin:0px;border:none;white-space:pre;line-height:normal;font-family:"+a+"; font-size:"+b+"px; font-weight:"+c+";",!M){var f=document.body;M=document.createElement("span"),M.innerHTML="";var g=document.createTextNode("Mpgyi");M.appendChild(g),f.appendChild(M)}M.style.display="",M.setAttribute("style",a),e=Math.round(M.offsetHeight),M.style.display="none"}catch(h){e=Math.ceil(1.1*b)}e=Math.max(e,b),L[d]=e}return e}function m(a,b,c,d){if(a.addEventListener)a.addEventListener(b,c,d||!1);else{if(!a.attachEvent)return!1;a.attachEvent("on"+b,function(b){b=b||window.event,b.preventDefault=b.preventDefault||function(){b.returnValue=!1},b.stopPropagation=b.stopPropagation||function(){b.cancelBubble=!0},c.call(a,b)})}}function n(a,b,c){for(a*=T,b*=T,a=c.getImageData(a,b,2,2).data,b=!0,c=0;4>c;c++)if(a[c]!==a[c+4]|a[c]!==a[c+8]|a[c]!==a[c+12]){b=!1;break}return b?a[0]<<16|a[1]<<8|a[2]:0}function o(a,b,c){var d;d=a?a+"FontStyle":"fontStyle";var e=a?a+"FontWeight":"fontWeight",f=a?a+"FontSize":"fontSize";return a=a?a+"FontFamily":"fontFamily",d=""+(b[d]?b[d]+" ":c&&c[d]?c[d]+" ":""),d+=b[e]?b[e]+" ":c&&c[e]?c[e]+" ":"",d+=b[f]?b[f]+"px ":c&&c[f]?c[f]+"px ":"",b=b[a]?b[a]+"":c&&c[a]?c[a]+"":"",!F&&b&&(b=b.split(",")[0],"'"!==b[0]&&'"'!==b[0]&&(b="'"+b+"'")),d+=b}function p(a,b,c){return a in b?b[a]:c[a]}function q(a,b,c){if(F&&Q){var d=a.getContext("2d");S=d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1,T=R/S,a.width=b*T,a.height=c*T,R!==S&&(a.style.width=b+"px",a.style.height=c+"px",d.scale(T,T))}else a.width=b,a.height=c}function r(a,b){var c=document.createElement("canvas");return c.setAttribute("class","canvasjs-chart-canvas"),q(c,a,b),F||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(c),c}function s(a,b,c){this._defaultsKey=a,currentTheme={},c&&J[c]&&J[c][a]&&(currentTheme=J[c][a]),this._options=b?b:{},this.setOptions(this._options,currentTheme)}function t(a,b){b=b||{},t.parent.constructor.call(this,"Chart",b,b.theme?b.theme:"theme1");var c=this;if(this._containerId=a,this._objectsInitialized=!1,this.overlaidCanvasCtx=this.ctx=null,this._indexLabels=[],this._panTimerId=0,this._lastTouchEventType="",this.panEnabled=!1,this._defaultCursor="default",this.plotArea={canvas:null,ctx:null,x1:0,y1:0,x2:0,y2:0,width:0,height:0},this._dataInRenderedOrder=[],this._container=document.getElementById(this._containerId)){this._container.innerHTML="";var d=0,e=0,d=this._options.width?this.width:0<this._container.clientWidth?this._container.clientWidth:this.width,e=this._options.height?this.height:0<this._container.clientHeight?this._container.clientHeight:this.height;if(this.width=d,this.height=e,this._canvasJSContainer=document.createElement("div"),this._canvasJSContainer.setAttribute("class","canvasjs-chart-container"),this._canvasJSContainer.style.position="relative",F||(this._canvasJSContainer.style.height="0px"),this._container.appendChild(this._canvasJSContainer),this.canvas=r(d,e),this.canvas.style.position="absolute",this.canvas.getContext){try{this.canvas.style.background=this.backgroundColor}catch(f){}this._canvasJSContainer.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.textBaseline="top",g(this.ctx),F?this.plotArea.ctx=this.ctx:(this.plotArea.canvas=r(d,e),this.plotArea.canvas.style.position="absolute",this.plotArea.canvas.setAttribute("class","plotAreaCanvas"),this._canvasJSContainer.appendChild(this.plotArea.canvas),this.plotArea.ctx=this.plotArea.canvas.getContext("2d")),this.overlaidCanvas=r(d,e),this.overlaidCanvas.style.position="absolute",this._canvasJSContainer.appendChild(this.overlaidCanvas),this.overlaidCanvasCtx=this.overlaidCanvas.getContext("2d"),this.overlaidCanvasCtx.textBaseline="top",this._eventManager=new D(this),this._toolBar=document.createElement("div"),this._toolBar.setAttribute("class","canvasjs-chart-toolbar"),this._toolBar.style.position="absolute",this._toolBar.style.top="0px",this._toolBar.style.right="0px",this._canvasJSContainer.appendChild(this._toolBar),this.zoomEnabled&&(this._zoomButton=document.createElement("button"),this._zoomButton.appendChild(document.createTextNode("Pan")),this._toolBar.appendChild(this._zoomButton),m(this._zoomButton,"click",function(){c.zoomEnabled?(c.zoomEnabled=!1,c.panEnabled=!0,c._zoomButton.innerHTML=c._cultureInfo.zoomText):(c.zoomEnabled=!0,c.panEnabled=!1,c._zoomButton.innerHTML=c._cultureInfo.panText),c.render()})),this.zoomEnabled&&(this._resetButton=document.createElement("button"),this._resetButton.appendChild(document.createTextNode("Reset")),this._toolBar.appendChild(this._resetButton),this.zoomEnabled=this._options.zoomEnabled?!0:!1,this.panEnabled=!1,this.overlaidCanvas.style.cursor=c._defaultCursor,m(this._resetButton,"click",function(){c._toolTip.hide(),c.zoomEnabled||c.panEnabled?(c.zoomEnabled=!0,c.panEnabled=!1,c._zoomButton.innerHTML=c._cultureInfo.panText,c._defaultCursor="default",c.overlaidCanvas.style.cursor=c._defaultCursor):(c.zoomEnabled=!1,c.panEnabled=!1),c.sessionVariables.axisX.internalMinimum=c._options.axisX&&c._options.axisX.minimum?c._options.axisX.minimum:null,c.sessionVariables.axisX.internalMaximum=c._options.axisX&&c._options.axisX.maximum?c._options.axisX.maximum:null,c.resetOverlayedCanvas(),c._toolBar.style.display="none",c.render()})),m(window,"resize",function(){var a=0,b=0;c._options.width?a=c.width:c.width=a=0<c._container.clientWidth?c._container.clientWidth:c.width,c._options.height?b=c.height:c.height=b=0<c._container.clientHeight?c._container.clientHeight:c.height,(c.canvas.width!==a*T||c.canvas.height!==b*T)&&(q(c.canvas,a,b),q(c.overlaidCanvas,a,b),q(c._eventManager.ghostCanvas,a,b),c.render())}),this._toolBar.style.display="none",this.bounds={x1:0,y1:0,x2:this.width,y2:this.height},c=this,m(this.overlaidCanvas,"click",function(a){c._mouseEventHandler(a)}),m(this.overlaidCanvas,"mousemove",function(a){c._mouseEventHandler(a)}),m(this.overlaidCanvas,"mouseup",function(a){c._mouseEventHandler(a)}),m(this.overlaidCanvas,"mousedown",function(a){c._mouseEventHandler(a)}),m(this.overlaidCanvas,"mouseout",function(a){c._mouseEventHandler(a)}),m(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",function(a){c._touchEventHandler(a)}),m(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",function(a){c._touchEventHandler(a)}),m(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerUp":"touchend",function(a){c._touchEventHandler(a)}),m(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerCancel":"touchcancel",function(a){c._touchEventHandler(a)}),this._toolTip=new C(this,this._options.toolTip,this.theme),this.layoutManager=new v(this),this.axisY2=this.axisY=this.axisX=this.data=null,this.renderCount=0,this.creditText&&this.creditHref&&(this._creditLink=document.createElement("a"),this._creditLink.setAttribute("class","canvasjs-chart-credit"),this._creditLink.setAttribute("style","outline:none;margin:0px;position:absolute;right:3px;top:"+(e-14)+"px;color:dimgrey;text-decoration:none;font-size:10px;font-family:Lucida Grande, Lucida Sans Unicode, Arial, sans-serif"),this._creditLink.setAttribute("tabIndex",-1),this._creditLink.setAttribute("href",this.creditHref),this._creditLink.innerHTML=this.creditText,this._creditLink.setAttribute("target","_blank"),this._canvasJSContainer.appendChild(this._creditLink)),this.sessionVariables={axisX:{internalMinimum:null,internalMaximum:null},axisY:{internalMinimum:null,internalMaximum:null},axisY2:{internalMinimum:null,internalMaximum:null}}}}else window.console&&window.console.log('CanvasJS Error: Chart Container with id "'+this._containerId+'" was not found')}function u(a,b){for(var c=[],d=0;d<a.length;d++)if(0==d)c.push(a[0]);else{var e,f,g;g=d-1,e=0===g?0:g-1,f=g===a.length-1?g:g+1,c[c.length]={x:a[g].x+(a[f].x-a[e].x)/b/3,y:a[g].y+(a[f].y-a[e].y)/b/3},g=d,e=0===g?0:g-1,f=g===a.length-1?g:g+1,c[c.length]={x:a[g].x-(a[f].x-a[e].x)/b/3,y:a[g].y-(a[f].y-a[e].y)/b/3},c[c.length]=a[d]}return c}function v(a){this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=0,this.chart=a}function w(a,b){w.parent.constructor.call(this,"TextBlock",b),this.ctx=a,this._isDirty=!0,this._wrappedText=null,this._lineHeight=l(this.fontFamily,this.fontSize,this.fontWeight)}function x(a,b){x.parent.constructor.call(this,"Title",b,a.theme),this.chart=a,this.canvas=a.canvas,this.ctx=this.chart.ctx,"undefined"==typeof this._options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function y(a,b,c){y.parent.constructor.call(this,"Legend",b,c),this.chart=a,this.canvas=a.canvas,this.ctx=this.chart.ctx,this.height=this.width=0,this.orientation=null,this.horizontalSpacing=10,this.dataSeries=[],this.bounds={x1:null,y1:null,x2:null,y2:null},"undefined"==typeof this._options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.lineHeight=l(this.fontFamily,this.fontSize,this.fontWeight)}function z(a,b){z.parent.constructor.call(this,b),this.chart=a,this.canvas=a.canvas,this.ctx=this.chart.ctx}function A(a,b,c,d,e){A.parent.constructor.call(this,"DataSeries",b,c),this.chart=a,this.canvas=a.canvas,this._ctx=a.canvas.ctx,this.index=d,this.maxWidthInX=this.noDataPointsInPlotArea=0,this.id=e,this.dataPointIds=[],this.axisY=this.axisX=null,this.axisPlacement=this.getDefaultAxisPlacement(),"undefined"==typeof this._options.indexLabelFontSize&&(this.indexLabelFontSize=this.chart.getAutoFontSize(this.indexLabelFontSize))}function B(a,b,c,d){B.parent.constructor.call(this,"Axis",b,a.theme),this.chart=a,this.canvas=a.canvas,this.ctx=a.ctx,this.intervalStartPosition=this.maxHeight=this.maxWidth=0,this.labels=[],this._labels=null,this.dataInfo={min:1/0,max:-1/0,viewPortMin:1/0,viewPortMax:-1/0,minDiff:1/0},"axisX"===c?(this.sessionVariables=this.chart.sessionVariables[c],this._options.interval||(this.intervalType=null)):this.sessionVariables="left"===d||"top"===d?this.chart.sessionVariables.axisY:this.chart.sessionVariables.axisY2,"undefined"==typeof this._options.titleFontSize&&(this.titleFontSize=this.chart.getAutoFontSize(this.titleFontSize)),"undefined"==typeof this._options.labelFontSize&&(this.labelFontSize=this.chart.getAutoFontSize(this.labelFontSize)),this.type=c,"axisX"!==c||b&&"undefined"!=typeof b.gridThickness||(this.gridThickness=0),this._position=d,this.lineCoordinates={x1:null,y1:null,x2:null,y2:null,width:null},this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>=this.labelAngle?this.labelAngle-=180:180<this.labelAngle&&270>=this.labelAngle?this.labelAngle-=180:270<this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360),this._absoluteMaximum=this._absoluteMinimum=this._titleTextBlock=null,this.hasOptionChanged("minimum")&&(this.sessionVariables.internalMinimum=this.minimum),this.hasOptionChanged("maximum")&&(this.sessionVariables.internalMaximum=this.maximum),this.trackChanges("minimum"),this.trackChanges("maximum")}function C(a,b,c){C.parent.constructor.call(this,"ToolTip",b,c),this.chart=a,this.canvas=a.canvas,this.ctx=this.chart.ctx,this.currentDataPointIndex=this.currentSeriesIndex=-1,this._timerId=0,this._prevY=this._prevX=0/0,this._initialize()}function D(a){this.chart=a,this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.ghostCanvas=r(this.chart.width,this.chart.height),this.ghostCtx=this.ghostCanvas.getContext("2d")}function E(a,b){var c;b&&H[b]&&(c=H[b]),x.parent.constructor.call(this,"CultureInfo",c,a.theme),this.chart=a,this.canvas=a.canvas,this.ctx=this.chart.ctx}var F=!!document.createElement("canvas").getContext,G={Chart:{width:500,height:400,zoomEnabled:!1,backgroundColor:"white",theme:"theme1",animationEnabled:F?!0:!1,colorSet:"colorSet1",culture:"en",creditHref:"http://canvasjs.com/",creditText:"CanvasJS.com"},CultureInfo:{decimalSeparator:".",digitGroupSeparator:",",zoomText:"Zoom",panText:"Pan",resetText:"Reset",days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")},Title:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:20,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,margin:5},DataSeries:{name:null,dataPoints:null,label:"",bevelEnabled:!1,cursor:null,indexLabel:"",indexLabelPlacement:"outside",indexLabelOrientation:"horizontal",indexLabelFontColor:"black",indexLabelFontSize:12,indexLabelFontStyle:"normal",indexLabelFontFamily:"Arial",indexLabelFontWeight:"normal",indexLabelBackgroundColor:null,indexLabelLineColor:null,indexLabelLineThickness:1,indexLabelMaxWidth:null,indexLabelWrap:!0,lineThickness:2,color:null,startAngle:0,type:"column",xValueType:"number",axisYType:"primary",xValueFormatString:null,yValueFormatString:null,showInLegend:null,legendMarkerType:null,legendMarkerColor:null,legendText:null,markerType:"circle",markerColor:null,markerSize:null,markerBorderColor:null,markerBorderThickness:null,mouseover:null,mouseout:null,mousemove:null,click:null,toolTipContent:null},Axis:{minimum:null,maximum:null,interval:null,intervalType:null,title:null,titleFontColor:"black",titleFontSize:20,titleFontFamily:"arial",titleFontWeight:"normal",titleFontStyle:"normal",labelAngle:0,labelFontFamily:"arial",labelFontColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelAutoFit:!1,labelWrap:!0,labelMaxWidth:null,prefix:"",suffix:"",includeZero:!0,tickLength:5,tickColor:"black",tickThickness:1,lineColor:"black",lineThickness:1,gridColor:"A0A0A0",gridThickness:0,interlacedColor:null,valueFormatString:null,margin:2},Legend:{name:null,borderThickness:0,borderColor:"black",cornerRadius:0,verticalAlign:"center",horizontalAlign:"right",fontSize:14,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal"},ToolTip:{enabled:!0,borderColor:null,shared:!1,animationEnabled:!0,content:null},TextBlock:{x:0,y:0,width:null,height:null,maxWidth:null,maxHeight:null,padding:0,angle:0,text:"",horizontalAlign:"center",fontSize:12,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,textBaseline:"top"}},H={en:{}},I={colorSet1:"#369EAD #C24642 #7F6084 #86B402 #A2D1CF #C8B631 #6DBCEB #52514E #4F81BC #A064A1 #F79647".split(" "),colorSet2:"#4F81BC #C0504E #9BBB58 #23BFAA #8064A1 #4AACC5 #F79647 #33558B".split(" "),colorSet3:"#8CA1BC #36845C #017E82 #8CB9D0 #708C98 #94838D #F08891 #0366A7 #008276 #EE7757 #E5BA3A #F2990B #03557B #782970".split(" ")},J={theme1:{Chart:{colorSet:I[0]},Title:{fontFamily:F?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",fontSize:33,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:10},Axis:{titleFontSize:26,titleFontColor:"#666666",titleFontFamily:F?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontFamily:F?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:18,labelFontColor:"grey",tickColor:"#BBBBBB",tickThickness:2,gridThickness:2,gridColor:"#BBBBBB",lineThickness:2,lineColor:"#BBBBBB"},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:F?"monospace, sans-serif,arial black":"calibri"},DataSeries:{indexLabelFontColor:"grey",indexLabelFontFamily:F?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",indexLabelFontSize:18,indexLabelLineThickness:1}},theme2:{Chart:{colorSet:"colorSet2"},Title:{fontFamily:"impact, charcoal, arial black, sans-serif",fontSize:32,fontColor:"#333333",verticalAlign:"top",margin:10},Axis:{titleFontSize:22,titleFontColor:"rgb(98,98,98)",titleFontFamily:F?"monospace, sans-serif,arial black":"arial",titleFontWeight:"bold",labelFontFamily:F?"monospace, Courier New, Courier":"arial",labelFontSize:16,labelFontColor:"grey",labelFontWeight:"bold",tickColor:"grey",tickThickness:2,gridThickness:2,gridColor:"grey",lineThickness:0},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:F?"monospace, sans-serif,arial black":"arial"},DataSeries:{indexLabelFontColor:"grey",indexLabelFontFamily:F?"Courier New, Courier, monospace":"arial",indexLabelFontWeight:"bold",indexLabelFontSize:18,indexLabelLineThickness:1}},theme3:{Chart:{colorSet:"colorSet1"},Title:{fontFamily:F?"Candara, Optima, Trebuchet MS, Helvetica Neue, Helvetica, Trebuchet MS, serif":"calibri",fontSize:32,fontColor:"rgb(68,78,58)",fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:10},Axis:{titleFontSize:22,titleFontColor:"rgb(98,98,98)",titleFontFamily:F?"Verdana, Geneva, Calibri, sans-serif":"calibri",labelFontFamily:F?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:18,labelFontColor:"grey",tickColor:"grey",tickThickness:2,gridThickness:2,gridColor:"grey",lineThickness:2,lineColor:"grey"},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:F?"monospace, sans-serif,arial black":"calibri"},DataSeries:{bevelEnabled:!0,indexLabelFontColor:"grey",indexLabelFontFamily:F?"Candara, Optima, Calibri, Verdana, Geneva, sans-serif":"calibri",indexLabelFontSize:18,indexLabelLineColor:"lightgrey",indexLabelLineThickness:2}}},K={numberDuration:1,yearDuration:314496e5,monthDuration:2592e6,weekDuration:6048e5,dayDuration:864e5,hourDuration:36e5,minuteDuration:6e4,secondDuration:1e3,millisecondDuration:1,dayOfWeekFromInt:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")},L={},M=null,N=function(){var a=/D{1,4}|M{1,4}|Y{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|f{1,3}|t{1,2}|T{1,2}|K|z{1,3}|"[^"]*"|'[^']*'/g,b="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),c="Sun Mon Tue Wed Thu Fri Sat".split(" "),d="January February March April May June July August September October November December".split(" "),f="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),g=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,h=/[^-+\dA-Z]/g;return function(i,j,k){var l=k?k.days:b,m=k?k.months:d,n=k?k.shortDays:c,o=k?k.shortMonths:f;k="";var p=!1;if(i=i&&i.getTime?i:i?new Date(i):new Date,isNaN(i))throw SyntaxError("invalid date");"UTC:"==j.slice(0,4)&&(j=j.slice(4),p=!0),k=p?"getUTC":"get";var q=i[k+"Date"](),r=i[k+"Day"](),s=i[k+"Month"](),t=i[k+"FullYear"](),u=i[k+"Hours"](),v=i[k+"Minutes"](),w=i[k+"Seconds"](),x=i[k+"Milliseconds"](),y=p?0:i.getTimezoneOffset();return k=j.replace(a,function(a){switch(a){case"D":return q;case"DD":return e(q,2);case"DDD":return n[r];case"DDDD":return l[r];case"M":return s+1;case"MM":return e(s+1,2);case"MMM":return o[s];case"MMMM":return m[s];case"Y":return parseInt(String(t).slice(-2));case"YY":return e(String(t).slice(-2),2);case"YYY":return e(String(t).slice(-3),3);case"YYYY":return e(t,4);case"h":return u%12||12;case"hh":return e(u%12||12,2);case"H":return u;case"HH":return e(u,2);case"m":return v;case"mm":return e(v,2);case"s":return w;case"ss":return e(w,2);case"f":return String(x).slice(0,1);case"ff":return e(String(x).slice(0,2),2);case"fff":return e(String(x).slice(0,3),3);case"t":return 12>u?"a":"p";case"tt":return 12>u?"am":"pm";case"T":return 12>u?"A":"P";case"TT":return 12>u?"AM":"PM";case"K":return p?"UTC":(String(i).match(g)||[""]).pop().replace(h,"");case"z":return(y>0?"-":"+")+Math.floor(Math.abs(y)/60);case"zz":return(y>0?"-":"+")+e(Math.floor(Math.abs(y)/60),2);case"zzz":return(y>0?"-":"+")+e(Math.floor(Math.abs(y)/60),2)+e(Math.abs(y)%60,2);default:return a.slice(1,a.length-1)}})}}(),O=function(a,b,c){a=Number(a);var d=0>a?!0:!1;d&&(a*=-1),decimalSeparator=c?c.decimalSeparator:".",digitGroupSeparator=c?c.digitGroupSeparator:",";var f="";b=String(b);for(var f=1,g=c="",h=-1,i=[],j=[],k=0,l=0,m=0,f=1,n=!1,o=0,g=b.match(/"[^"]*"|'[^']*'|[eE][+-]*[0]+|[,]+[.]|\u2030|./g),p=0;g&&p<g.length;p++)if(b=g[p],"."===b&&0>h)h=p;else{if("%"===b)f*=100;else{if("â€°"===b){f*=1e3;continue}if(","===b[0]&&"."===b[b.length-1]){f/=Math.pow(1e3,b.length-1),h=p+b.length-1;continue}"E"!==b[0]&&"e"!==b[0]||"0"!==b[b.length-1]||(n=!0)}0>h?(i.push(b),"#"===b||"0"===b?k++:","===b&&m++):(j.push(b),"#"!==b&&"0"!==b||l++)}for(n&&(b=Math.floor(a),o=(0===b?"":String(b)).length-k,f/=Math.pow(10,o)),0>h&&(h=p),f=(a*f).toFixed(l),b=f.split("."),a=(b[0]+"").split(""),f=(b[1]+"").split(""),a&&"0"===a[0]&&a.shift(),p=n=g=l=h=0;0<i.length;)if(b=i.pop(),"#"===b||"0"===b)if(h++,h===k){var q=a;if(a=[],"0"===b)for(b=k-l-(q?q.length:0);b>0;)q.unshift("0"),b--;for(;0<q.length;)c=q.pop()+c,p++,0===p%n&&g===m&&0<q.length&&(c=digitGroupSeparator+c);d&&(c="-"+c)}else 0<a.length?(c=a.pop()+c,l++,p++):"0"===b&&(c="0"+c,l++,p++),0===p%n&&g===m&&0<a.length&&(c=digitGroupSeparator+c);else"E"!==b[0]&&"e"!==b[0]||"0"!==b[b.length-1]||!/[eE][+-]*[0]+/.test(b)?","===b?(g++,n=p,p=0,0<a.length&&(c=digitGroupSeparator+c)):c=1<b.length&&('"'===b[0]&&'"'===b[b.length-1]||"'"===b[0]&&"'"===b[b.length-1])?b.slice(1,b.length-1)+c:b+c:(b=0>o?b.replace("+","").replace("-",""):b.replace("-",""),c+=b.replace(/[0]+/,function(a){return e(o,a.length)}));for(d=0;0<j.length;)b=j.shift(),"#"===b||"0"===b?0<f.length&&0!==Number(f.join(""))?c+=(0===d++?decimalSeparator:"")+f.shift():"0"===b&&(c+=(0===d++?decimalSeparator:"")+"0"):1<b.length&&('"'===b[0]&&'"'===b[b.length-1]||"'"===b[0]&&"'"===b[b.length-1])?c+=(0===d++?decimalSeparator:"")+b.slice(1,b.length-1):"E"!==b[0]&&"e"!==b[0]||"0"!==b[b.length-1]||!/[eE][+-]*[0]+/.test(b)?c+=(0===d++?decimalSeparator:"")+b:(b=0>o?b.replace("+","").replace("-",""):b.replace("-",""),c+=b.replace(/[0]+/,function(a){return e(o,a.length)}));return c},P=function(a){var b=0,c=0;return a||(a=window.event),a.offsetX||0===a.offsetX?(b=a.offsetX,c=a.offsetY):a.layerX||0==a.layerX?(b=a.layerX,c=a.layerY):(b=a.pageX-a.target.offsetLeft,c=a.pageY-a.target.offsetTop),{x:b,y:c}},Q=!0,R=window.devicePixelRatio||1,S=1,T=Q?R/S:1;s.prototype.setOptions=function(a,b){if(G[this._defaultsKey]){var c=G[this._defaultsKey];for(prop in c)this[prop]=a&&prop in a?a[prop]:b&&prop in b?b[prop]:c[prop]}},s.prototype.trackChanges=function(a){this._options._oldOptions||(this._options._oldOptions={}),this._options._oldOptions[a]=this._options[a]},s.prototype.isBeingTracked=function(a){return this._options._oldOptions||(this._options._oldOptions={}),this._options._oldOptions[a]?!0:!1},s.prototype.hasOptionChanged=function(a){return this._options._oldOptions||(this._options._oldOptions={}),this._options._oldOptions[a]!==this._options[a]},a(t,s),t.prototype._initialize=function(){this._selectedColorSet="undefined"!=typeof I[this.colorSet]?I[this.colorSet]:I.colorSet1,this.ctx.clearRect(0,0,this.width,this.height),this.ctx.beginPath(),this.axisY2=this.axisY=this.axisX=null,this._indexLabels=[],this._dataInRenderedOrder=[],this._events=[],this._eventManager&&this._eventManager.reset(),this.plotInfo={axisPlacement:null,axisXValueType:null,plotTypes:[]},this.layoutManager.reset(),this._cultureInfo=new E(this,this._options.culture),this.data=[];for(var a=0,b=0;b<this._options.data.length;b++)if(a++,!this._options.data[b].type||0<=t._supportedChartTypes.indexOf(this._options.data[b].type)){var c=new A(this,this._options.data[b],this.theme,a-1,++this._eventManager.lastObjectId);null===c.name&&(c.name="DataSeries "+a),null===c.color?1<this._options.data.length?(c._colorSet=[this._selectedColorSet[c.index%this._selectedColorSet.length]],c.color=this._selectedColorSet[c.index%this._selectedColorSet.length]):c._colorSet="line"===c.type||"stepLine"===c.type||"spline"===c.type||"area"===c.type||"stepArea"===c.type||"splineArea"===c.type||"stackedArea"===c.type||"stackedArea100"===c.type?[this._selectedColorSet[0]]:this._selectedColorSet:c._colorSet=[c.color],null===c.markerSize&&(("line"===c.type||"stepLine"===c.type||"spline"===c.type)&&c.dataPoints&&c.dataPoints.length<this.width/16||"scatter"===c.type)&&(c.markerSize=8),"bubble"!==c.type&&"scatter"!==c.type||!c.dataPoints||c.dataPoints.sort(j),this.data.push(c);var d,e=c.axisPlacement;if("normal"===e?"xySwapped"===this.plotInfo.axisPlacement?d='You cannot combine "'+c.type+'" with bar chart':"none"===this.plotInfo.axisPlacement?d='You cannot combine "'+c.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="normal"):"xySwapped"===e?"normal"===this.plotInfo.axisPlacement?d='You cannot combine "'+c.type+'" with line, area, column or pie chart':"none"===this.plotInfo.axisPlacement?d='You cannot combine "'+c.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="xySwapped"):"none"==e&&("normal"===this.plotInfo.axisPlacement?d='You cannot combine "'+c.type+'" with line, area, column or bar chart':"xySwapped"===this.plotInfo.axisPlacement?d='You cannot combine "'+c.type+'" with bar chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="none")),d&&window.console)return void window.console.log(d)}this._objectsInitialized=!0},t._supportedChartTypes="line stepLine spline column area stepArea splineArea bar bubble scatter stackedColumn stackedColumn100 stackedBar stackedBar100 stackedArea stackedArea100 pie doughnut".split(" "),t._supportedChartTypes.indexOf||(t._supportedChartTypes.indexOf=function(a,b){var c=this.length>>>0,d=Number(b)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=c);c>d;d++)if(d in this&&this[d]===a)return d;return-1}),t.prototype.render=function(){this._initialize();for(var a=0;a<this.data.length;a++)("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)&&(this.data[a].axisYType&&"primary"!==this.data[a].axisYType?"secondary"===this.data[a].axisYType&&(this.axisY2||("normal"===this.plotInfo.axisPlacement?this.axisY2=new B(this,this._options.axisY2,"axisY","right"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisY2=new B(this,this._options.axisY2,"axisY","top"))),this.data[a].axisY=this.axisY2):(this.axisY||("normal"===this.plotInfo.axisPlacement?this.axisY=new B(this,this._options.axisY,"axisY","left"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisY=new B(this,this._options.axisY,"axisY","bottom"))),this.data[a].axisY=this.axisY),this.axisX||("normal"===this.plotInfo.axisPlacement?this.axisX=new B(this,this._options.axisX,"axisX","bottom"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisX=new B(this,this._options.axisX,"axisX","left"))),this.data[a].axisX=this.axisX);for(this._processData(),this._options.title&&(this._title=new x(this,this._options.title),this._title.render()),this.legend=new y(this,this._options.legend,this.theme),a=0;a<this.data.length;a++)this.data[a].showInLegend&&this.legend.dataSeries.push(this.data[a]);if(this.legend.render(),"normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)this.layoutManager.getFreeSpace(),B.setLayoutAndRender(this.axisX,this.axisY,this.axisY2,this.plotInfo.axisPlacement,this.layoutManager.getFreeSpace());else{if("none"!==this.plotInfo.axisPlacement)return;this.preparePlotArea()}for(a=0;a<this.plotInfo.plotTypes.length;a++)for(var b=this.plotInfo.plotTypes[a],c=0;c<b.plotUnits.length;c++){var d=b.plotUnits[c];"line"===d.type?this.renderLine(d):"stepLine"===d.type?this.renderStepLine(d):"spline"===d.type?this.renderSpline(d):"column"===d.type?this.renderColumn(d):"bar"===d.type?this.renderBar(d):"area"===d.type?this.renderArea(d):"stepArea"===d.type?this.renderStepArea(d):"splineArea"===d.type?this.renderSplineArea(d):"stackedColumn"===d.type?this.renderStackedColumn(d):"stackedColumn100"===d.type?this.renderStackedColumn100(d):"stackedBar"===d.type?this.renderStackedBar(d):"stackedBar100"===d.type?this.renderStackedBar100(d):"stackedArea"===d.type?this.renderStackedArea(d):"stackedArea100"===d.type?this.renderStackedArea100(d):"bubble"===d.type?this.renderBubble(d):"scatter"===d.type?this.renderScatter(d):"pie"===d.type?this.renderPie(d):"doughnut"===d.type&&this.renderPie(d);for(var e=0;e<d.dataSeriesIndexes.length;e++)this._dataInRenderedOrder.push(this.data[d.dataSeriesIndexes[e]])}0<this._indexLabels.length&&this.renderIndexLabels(),this.attachPlotAreaEventHandlers(),this.zoomEnabled||this.panEnabled||"none"===this._toolBar.style.display||(this._toolBar.style.display="none"),this._toolTip._updateToolTip(),this.renderCount++},t.prototype.attachPlotAreaEventHandlers=function(){this.attachEvent({context:this,chart:this,mousedown:this._plotAreaMouseDown,mouseup:this._plotAreaMouseUp,mousemove:this._plotAreaMouseMove,cursor:this.zoomEnabled?"col-resize":"move",cursor:this.panEnabled?"move":"default",capture:!0,bounds:this.plotArea})},t.prototype.categoriseDataSeries=function(){for(var a="",b=0;b<this.data.length;b++)if(a=this.data[b],a.dataPoints&&0!==a.dataPoints.length&&0<=t._supportedChartTypes.indexOf(a.type)){for(var c=null,d=!1,e=null,f=!1,g=0;g<this.plotInfo.plotTypes.length;g++)if(this.plotInfo.plotTypes[g].type===a.type){d=!0,c=this.plotInfo.plotTypes[g];break}for(d||(c={type:a.type,totalDataSeries:0,plotUnits:[]},this.plotInfo.plotTypes.push(c)),g=0;g<c.plotUnits.length;g++)if(c.plotUnits[g].axisYType===a.axisYType){f=!0,e=c.plotUnits[g];break}f||(e={type:a.type,previousDataSeriesCount:0,index:c.plotUnits.length,plotType:c,axisYType:a.axisYType,axisY:"primary"===a.axisYType?this.axisY:this.axisY2,axisX:this.axisX,dataSeriesIndexes:[]},c.plotUnits.push(e)),c.totalDataSeries++,e.dataSeriesIndexes.push(b)}for(b=0;b<this.plotInfo.plotTypes.length;b++)for(c=this.plotInfo.plotTypes[b],g=a=0;g<c.plotUnits.length;g++)c.plotUnits[g].previousDataSeriesCount=a,a+=c.plotUnits[g].dataSeriesIndexes.length},t.prototype.assignIdToDataPoints=function(){for(var a=0;a<this.data.length;a++){var b=this.data[a];if(b.dataPoints)for(var c=b.dataPoints.length,d=0;c>d;d++)b.dataPointIds[d]=++this._eventManager.lastObjectId
}},t.prototype._processData=function(){this.assignIdToDataPoints(),this.categoriseDataSeries();for(var a=0;a<this.plotInfo.plotTypes.length;a++)for(var b=this.plotInfo.plotTypes[a],c=0;c<b.plotUnits.length;c++){var d=b.plotUnits[c];"line"===d.type||"stepLine"===d.type||"spline"===d.type||"column"===d.type||"area"===d.type||"stepArea"===d.type||"splineArea"===d.type||"bar"===d.type||"bubble"===d.type||"scatter"===d.type?this._processMultiseriesPlotUnit(d):"stackedColumn"===d.type||"stackedBar"===d.type||"stackedArea"===d.type?this._processStackedPlotUnit(d):"stackedColumn100"!==d.type&&"stackedBar100"!==d.type&&"stackedArea100"!==d.type||this._processStacked100PlotUnit(d)}},t.prototype._processMultiseriesPlotUnit=function(a){if(a.dataSeriesIndexes&&!(1>a.dataSeriesIndexes.length))for(var b,c,d=a.axisY.dataInfo,e=a.axisX.dataInfo,f=!1,g=0;g<a.dataSeriesIndexes.length;g++){var h=this.data[a.dataSeriesIndexes[g]],i=0,j=!1,k=!1;if("normal"===h.axisPlacement||"xySwapped"===h.axisPlacement)var l=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-1/0,m=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0;for((h.dataPoints[i].x&&h.dataPoints[i].x.getTime||"dateTime"===h.xValueType)&&(f=!0),i=0;i<h.dataPoints.length;i++){if("undefined"==typeof h.dataPoints[i].x&&(h.dataPoints[i].x=i),h.dataPoints[i].x.getTime?(f=!0,b=h.dataPoints[i].x.getTime()):b=h.dataPoints[i].x,c=h.dataPoints[i].y,b<e.min&&(e.min=b),b>e.max&&(e.max=b),c<d.min&&(d.min=c),c>d.max&&(d.max=c),i>0){var n=b-h.dataPoints[i-1].x;0>n&&(n*=-1),e.minDiff>n&&0!==n&&(e.minDiff=n)}if(!(l>b)||j){if(!j&&(j=!0,i>0)){i-=2;continue}if(b>m&&!k)k=!0;else if(b>m&&k)continue;h.dataPoints[i].label&&(a.axisX.labels[b]=h.dataPoints[i].label),b<e.viewPortMin&&(e.viewPortMin=b),b>e.viewPortMax&&(e.viewPortMax=b),c<d.viewPortMin&&(d.viewPortMin=c),c>d.viewPortMax&&(d.viewPortMax=c)}}this.plotInfo.axisXValueType=h.xValueType=f?"dateTime":"number"}},t.prototype._processStackedPlotUnit=function(a){if(a.dataSeriesIndexes&&!(1>a.dataSeriesIndexes.length)){for(var b,c,d=a.axisY.dataInfo,e=a.axisX.dataInfo,f=!1,g=[],h=[],i=0;i<a.dataSeriesIndexes.length;i++){var j=this.data[a.dataSeriesIndexes[i]],k=0,l=!1,m=!1;if("normal"===j.axisPlacement||"xySwapped"===j.axisPlacement)var n=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-1/0,o=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0;for((j.dataPoints[k].x&&j.dataPoints[k].x.getTime||"dateTime"===j.xValueType)&&(f=!0),k=0;k<j.dataPoints.length;k++){if("undefined"==typeof j.dataPoints[k].x&&(j.dataPoints[k].x=k),j.dataPoints[k].x.getTime?(f=!0,b=j.dataPoints[k].x.getTime()):b=j.dataPoints[k].x,c=j.dataPoints[k].y,b<e.min&&(e.min=b),b>e.max&&(e.max=b),k>0){var p=b-j.dataPoints[k-1].x;0>p&&(p*=-1),e.minDiff>p&&0!==p&&(e.minDiff=p)}if(!(n>b)||l){if(!l&&(l=!0,k>0)){k-=2;continue}if(b>o&&!m)m=!0;else if(b>o&&m)continue;j.dataPoints[k].label&&(a.axisX.labels[b]=j.dataPoints[k].label),b<e.viewPortMin&&(e.viewPortMin=b),b>e.viewPortMax&&(e.viewPortMax=b),c>=0?g[b]=g[b]?g[b]+c:c:h[b]=h[b]?h[b]+c:c}}this.plotInfo.axisXValueType=j.xValueType=f?"dateTime":"number"}for(k in g)isNaN(k)||(a=g[k],a<d.min&&(d.min=a),a>d.max&&(d.max=a),k<e.viewPortMin||k>e.viewPortMax||(a<d.viewPortMin&&(d.viewPortMin=a),a>d.viewPortMax&&(d.viewPortMax=a)));for(k in h)isNaN(k)||(a=h[k],a<d.min&&(d.min=a),a>d.max&&(d.max=a),k<e.viewPortMin||k>e.viewPortMax||(a<d.viewPortMin&&(d.viewPortMin=a),a>d.viewPortMax&&(d.viewPortMax=a)))}},t.prototype._processStacked100PlotUnit=function(a){if(a.dataSeriesIndexes&&!(1>a.dataSeriesIndexes.length)){for(var b,c,d=a.axisY.dataInfo,e=a.axisX.dataInfo,f=!1,g=!1,h=!1,i=[],j=0;j<a.dataSeriesIndexes.length;j++){var k=this.data[a.dataSeriesIndexes[j]],l=0,m=!1,n=!1;if("normal"===k.axisPlacement||"xySwapped"===k.axisPlacement)var o=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-1/0,p=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0;for((k.dataPoints[l].x&&k.dataPoints[l].x.getTime||"dateTime"===k.xValueType)&&(f=!0),l=0;l<k.dataPoints.length;l++){if("undefined"==typeof k.dataPoints[l].x&&(k.dataPoints[l].x=l),k.dataPoints[l].x.getTime?(f=!0,b=k.dataPoints[l].x.getTime()):b=k.dataPoints[l].x,c=k.dataPoints[l].y,b<e.min&&(e.min=b),b>e.max&&(e.max=b),l>0){var q=b-k.dataPoints[l-1].x;0>q&&(q*=-1),e.minDiff>q&&0!==q&&(e.minDiff=q)}if(!(o>b)||m){if(!m&&(m=!0,l>0)){l-=2;continue}if(b>p&&!n)n=!0;else if(b>p&&n)continue;k.dataPoints[l].label&&(a.axisX.labels[b]=k.dataPoints[l].label),b<e.viewPortMin&&(e.viewPortMin=b),b>e.viewPortMax&&(e.viewPortMax=b),c>=0?g=!0:h=!0,i[b]=i[b]?i[b]+Math.abs(c):Math.abs(c)}}this.plotInfo.axisXValueType=k.xValueType=f?"dateTime":"number"}g&&!h?(d.max=99,d.min=1):g&&h?(d.max=99,d.min=-99):!g&&h&&(d.max=-1,d.min=-99),d.viewPortMin=d.min,d.viewPortMax=d.max,a.dataPointYSums=i}},t.prototype.getDataPointAtXY=function(a,b,c){c=c||!1;for(var d=[],e=this._dataInRenderedOrder.length-1;e>=0;e--){var f=null;(f=this._dataInRenderedOrder[e].getDataPointAtXY(a,b,c))&&d.push(f)}for(a=null,b=!1,c=0;c<d.length;c++)if(("line"===d[c].dataSeries.type||"stepLine"===d[c].dataSeries.type||"area"===d[c].dataSeries.type||"stepArea"===d[c].dataSeries.type)&&(e=p("markerSize",d[c].dataPoint,d[c].dataSeries)||8,d[c].distance<=e/2)){b=!0;break}for(c=0;c<d.length;c++)b&&"line"!==d[c].dataSeries.type&&"stepLine"!==d[c].dataSeries.type&&"area"!==d[c].dataSeries.type&&"stepArea"!==d[c].dataSeries.type||(a?d[c].distance<=a.distance&&(a=d[c]):a=d[c]);return a},t.prototype.getAutoFontSize=function(a){return a/=400,Math.round(Math.min(this.width,this.height)*a)},t.prototype.resetOverlayedCanvas=function(){this.overlaidCanvasCtx.clearRect(0,0,this.width,this.height)},t.prototype.attachEvent=function(a){this._events.push(a)},t.prototype._touchEventHandler=function(a){if(a.changedTouches){var b=[];switch(first=(b=a.changedTouches)?b[0]:a,a.type){case"touchstart":case"MSPointerDown":b=["mousemove","mousedown"];break;case"touchmove":case"MSPointerMove":b=["mousemove"];break;case"touchend":case"MSPointerUp":b="touchstart"===this._lastTouchEventType||"MSPointerDown"===this._lastTouchEventType?["mouseup","click"]:["mouseup"];break;default:return}this._lastTouchEventType=a.type;for(var c=0;c<b.length;c++){var d=b[c],e=document.createEvent("MouseEvent");e.initMouseEvent(d,!0,!0,window,1,first.screenX,first.screenY,first.clientX,first.clientY,!1,!1,!1,!1,0,null),first.target.dispatchEvent(e),a.preventManipulation&&a.preventManipulation(),a.preventDefault&&a.preventDefault()}}},t.prototype._mouseEventHandler=function(a){a.preventManipulation&&a.preventManipulation(),a.preventDefault&&a.preventDefault(),"undefined"==typeof a.target&&a.srcElement&&(a.target=a.srcElement);var b,c,d=P(a),e=a.type;if(a.which?c=3==a.which:a.button&&(c=2==a.button),!c){if(t.capturedEventParam)b=t.capturedEventParam,"mouseup"===e&&(t.capturedEventParam=null,b.chart.overlaidCanvas.releaseCapture?b.chart.overlaidCanvas.releaseCapture():document.body.removeEventListener("mouseup",b.chart._mouseEventHandler,!1)),b.hasOwnProperty(e)&&b[e].call(b.context,d.x,d.y);else if(this._events){for(c=0;c<this._events.length;c++)if(this._events[c].hasOwnProperty(e)){b=this._events[c];var f=b.bounds;if(d.x>=f.x1&&d.x<=f.x2&&d.y>=f.y1&&d.y<=f.y2){b[e].call(b.context,d.x,d.y),"mousedown"===e&&!0===b.capture?(t.capturedEventParam=b,this.overlaidCanvas.setCapture?this.overlaidCanvas.setCapture():document.body.addEventListener("mouseup",this._mouseEventHandler,!1)):"mouseup"===e&&(b.chart.overlaidCanvas.releaseCapture?b.chart.overlaidCanvas.releaseCapture():document.body.removeEventListener("mouseup",this._mouseEventHandler,!1));break}b=null}a.target.style.cursor=b&&b.cursor?b.cursor:this._defaultCursor}this._toolTip&&this._toolTip.enabled&&(e=this.plotArea,(d.x<e.x1||d.x>e.x2||d.y<e.y1||d.y>e.y2)&&this._toolTip.hide()),this.isDrag&&this.zoomEnabled||!this._eventManager||this._eventManager.mouseEventHandler(a)}},t.prototype._plotAreaMouseDown=function(a,b){this.isDrag=!0,this.dragStartPoint="none"!==this.plotInfo.axisPlacement?{x:a,y:b,xMinimum:this.axisX.minimum,xMaximum:this.axisX.maximum}:{x:a,y:b}},t.prototype._plotAreaMouseUp=function(a,b){var c,d;if(("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)&&this.isDrag){var e=0,e=this.axisX.lineCoordinates,e="xySwapped"===this.plotInfo.axisPlacement?b-this.dragStartPoint.y:this.dragStartPoint.x-a;if(Math.abs(this.axisX.maximum-this.axisX.minimum),2<Math.abs(e)){if(this.panEnabled)e=!1,d=0,this.axisX.sessionVariables.internalMinimum<this.axisX._absoluteMinimum?(d=this.axisX._absoluteMinimum-this.axisX.sessionVariables.internalMinimum,this.axisX.sessionVariables.internalMinimum+=d,this.axisX.sessionVariables.internalMaximum+=d,e=!0):this.axisX.sessionVariables.internalMaximum>this.axisX._absoluteMaximum&&(d=this.axisX.sessionVariables.internalMaximum-this.axisX._absoluteMaximum,this.axisX.sessionVariables.internalMaximum-=d,this.axisX.sessionVariables.internalMinimum-=d,e=!0),e&&this.render();else if(this.zoomEnabled){if(this.resetOverlayedCanvas(),!this.dragStartPoint)return;"xySwapped"===this.plotInfo.axisPlacement?(c=Math.min(this.dragStartPoint.y,b),d=Math.max(this.dragStartPoint.y,b),1<Math.abs(c-d)&&(e=this.axisX.lineCoordinates,d=this.axisX.maximum-(this.axisX.maximum-this.axisX.minimum)/e.height*(d-e.y1),e=this.axisX.maximum-(this.axisX.maximum-this.axisX.minimum)/e.height*(c-e.y1),d=Math.max(d,this.axisX.dataInfo.min),e=Math.min(e,this.axisX.dataInfo.max),Math.abs((e-d)/this.axisX.dataInfo.minDiff)>=.008*this.height&&(this.axisX.sessionVariables.internalMinimum=d,this.axisX.sessionVariables.internalMaximum=e,this.render()))):"normal"===this.plotInfo.axisPlacement&&(d=Math.min(this.dragStartPoint.x,a),c=Math.max(this.dragStartPoint.x,a),1<Math.abs(d-c)&&(e=this.axisX.lineCoordinates,d=(this.axisX.maximum-this.axisX.minimum)/e.width*(d-e.x1)+this.axisX.minimum,e=(this.axisX.maximum-this.axisX.minimum)/e.width*(c-e.x1)+this.axisX.minimum,d=Math.max(d,this.axisX.dataInfo.min),e=Math.min(e,this.axisX.dataInfo.max),Math.abs((e-d)/this.axisX.dataInfo.minDiff)>=.01*this.width&&(this.axisX.sessionVariables.internalMinimum=d,this.axisX.sessionVariables.internalMaximum=e,this.render())))}this.zoomEnabled&&"none"===this._toolBar.style.display&&(this._toolBar.style.display="inline",this._zoomButton.innerHTML=this._cultureInfo.panText,this._resetButton.innerHTML=this._cultureInfo.resetText)}}this.isDrag=!1},t.prototype._plotAreaMouseMove=function(a,b){if(this.isDrag&&"none"!==this.plotInfo.axisPlacement){var c=0,e=0,e=this.axisX.lineCoordinates;if("xySwapped"===this.plotInfo.axisPlacement?(c=b-this.dragStartPoint.y,e=Math.abs(this.axisX.maximum-this.axisX.minimum)/e.height*c):(c=this.dragStartPoint.x-a,e=Math.abs(this.axisX.maximum-this.axisX.minimum)/e.width*c),2<Math.abs(c)&&8>Math.abs(c)&&(this.panEnabled||this.zoomEnabled)?this._toolTip.hide():!this._toolTip.enabled||this.panEnabled||this.zoomEnabled||this._toolTip.mouseMoveHandler(a,b),2<Math.abs(c)&&(this.panEnabled||this.zoomEnabled))if(this.panEnabled){this.axisX.sessionVariables.internalMinimum=this.dragStartPoint.xMinimum+e,this.axisX.sessionVariables.internalMaximum=this.dragStartPoint.xMaximum+e,c=0,this.axisX.sessionVariables.internalMinimum<this.axisX._absoluteMinimum-d(this.axisX.interval,this.axisX.intervalType)?(c=this.axisX._absoluteMinimum-d(this.axisX.interval,this.axisX.intervalType)-this.axisX.sessionVariables.internalMinimum,this.axisX.sessionVariables.internalMinimum+=c,this.axisX.sessionVariables.internalMaximum+=c):this.axisX.sessionVariables.internalMaximum>this.axisX._absoluteMaximum+d(this.axisX.interval,this.axisX.intervalType)&&(c=this.axisX.sessionVariables.internalMaximum-(this.axisX._absoluteMaximum+d(this.axisX.interval,this.axisX.intervalType)),this.axisX.sessionVariables.internalMaximum-=c,this.axisX.sessionVariables.internalMinimum-=c);var f=this;clearTimeout(this._panTimerId),this._panTimerId=setTimeout(function(){f.render()},0)}else this.zoomEnabled&&(c=this.plotArea,this.resetOverlayedCanvas(),e=this.overlaidCanvasCtx.globalAlpha,this.overlaidCanvasCtx.globalAlpha=.7,this.overlaidCanvasCtx.fillStyle="#A0ABB8","xySwapped"===this.plotInfo.axisPlacement?this.overlaidCanvasCtx.fillRect(c.x1,this.dragStartPoint.y,c.x2-c.x1,b-this.dragStartPoint.y):"normal"===this.plotInfo.axisPlacement&&this.overlaidCanvasCtx.fillRect(this.dragStartPoint.x,c.y1,a-this.dragStartPoint.x,c.y2-c.y1),this.overlaidCanvasCtx.globalAlpha=e)}else this._toolTip.enabled&&this._toolTip.mouseMoveHandler(a,b)},t.prototype.preparePlotArea=function(){var a=this.plotArea,b=this.axisY?this.axisY:this.axisY2;!F&&(0<a.x1||0<a.y1)&&a.ctx.translate(a.x1,a.y1),this.axisX&&b?(a.x1=this.axisX.lineCoordinates.x1<this.axisX.lineCoordinates.x2?this.axisX.lineCoordinates.x1:b.lineCoordinates.x1,a.y1=this.axisX.lineCoordinates.y1<b.lineCoordinates.y1?this.axisX.lineCoordinates.y1:b.lineCoordinates.y1,a.x2=this.axisX.lineCoordinates.x2>b.lineCoordinates.x2?this.axisX.lineCoordinates.x2:b.lineCoordinates.x2,a.y2=this.axisX.lineCoordinates.y2>this.axisX.lineCoordinates.y1?this.axisX.lineCoordinates.y2:b.lineCoordinates.y2,a.width=a.x2-a.x1,a.height=a.y2-a.y1):(b=this.layoutManager.getFreeSpace(),a.x1=b.x1,a.x2=b.x2,a.y1=b.y1,a.y2=b.y2,a.width=b.width,a.height=b.height),F||(a.canvas.width=a.width,a.canvas.height=a.height,a.canvas.style.left=a.x1+"px",a.canvas.style.top=a.y1+"px",(0<a.x1||0<a.y1)&&a.ctx.translate(-a.x1,-a.y1))},t.prototype.getPixelCoordinatesOnPlotArea=function(a,b){return{x:this.axisX.getPixelCoordinatesOnAxis(a).x,y:this.axisY.getPixelCoordinatesOnAxis(b).y}},t.prototype.renderIndexLabels=function(){var a=this.plotArea.ctx;a.textBaseline="middle";for(var b=this.plotArea,c=0;c<this._indexLabels.length;c++){var d,e,f,g=this._indexLabels[c];a.fillStyle=p("indexLabelFontColor",g.dataPoint,g.dataSeries),a.font=o("indexLabel",g.dataPoint,g.dataSeries);var h=this.replaceKeywordsWithValue(p("indexLabel",g.dataPoint,g.dataSeries),g.dataPoint,g.dataSeries),i=a.measureText(h).width,j=p("indexLabelFontSize",g.dataPoint,g.dataSeries),k=p("indexLabelPlacement",g.dataPoint,g.dataSeries),l=p("indexLabelOrientation",g.dataPoint,g.dataSeries),m=f=0,n=0,q=0,r=0;g.point.x<b.x1||g.point.x>b.x2||g.point.y<b.y1||g.point.y>b.y2||("column"===g.chartType||"stackedColumn"===g.chartType||"stackedColumn100"===g.chartType||"bar"===g.chartType||"stackedBar"===g.chartType||"stackedBar100"===g.chartType?(Math.abs(g.bounds.x1,g.bounds.x2),Math.abs(g.bounds.y1,g.bounds.y2),"normal"===this.plotInfo.axisPlacement?("outside"===k?(m=b.y1,n=b.y2):"inside"===k&&(m=g.bounds.y1,n=g.bounds.y2),"horizontal"===l?(d=g.point.x-i/2,e=0<=g.dataPoint.y?Math.min(Math.max(g.point.y-j/2-5,m+j/2+5),n-j/2-5):Math.max(Math.min(g.point.y+j/2+5,n-j/2),m+j/2+5)):"vertical"===l&&(d=g.point.x,e=0<=g.dataPoint.y?Math.min(Math.max(g.point.y-5,m+i+5),n):Math.max(Math.min(g.point.y+i+5,n-5),m),f=-90)):"xySwapped"===this.plotInfo.axisPlacement&&("outside"===k?(q=b.x1,r=b.x2):"inside"===k&&(q=g.bounds.x1,r=g.bounds.x2),"horizontal"===l?(e=g.point.y,d=0<=g.dataPoint.y?Math.max(Math.min(g.point.x+5,r-i),q):Math.min(Math.max(g.point.x-i-5,q),r)):"vertical"===l&&(e=g.point.y+i/2,d=0<=g.dataPoint.y?Math.max(Math.min(g.point.x+j/2+5,r-j/2),q):Math.min(Math.max(g.point.x-j/2-5,q+j/2),r+j/2),f=-90))):"horizontal"===l?(d=g.point.x-i/2,e=0<=g.dataPoint.y?Math.max(g.point.y-j/2-5,b.y1+j/2):Math.min(g.point.y+j/2+5,b.y2-j/2)):"vertical"===l&&(d=g.point.x,e=0<=g.dataPoint.y?Math.max(g.point.y-5,b.y1+i):Math.min(g.point.y+i+5,b.y2),f=-90),a.save(),a.translate(d,e),a.rotate(Math.PI/180*f),a.fillText(h,0,0),a.restore())}},t.prototype.renderLine=function(a){var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var c=this._eventManager.ghostCtx;b.save();var d=this.plotArea;b.beginPath(),b.rect(d.x1,d.y1,d.width,d.height),b.clip();for(var d=[],e=0;e<a.dataSeriesIndexes.length;e++){var f=a.dataSeriesIndexes[e],g=this.data[f];b.lineWidth=g.lineThickness;var h=g.dataPoints,i=g.id;this._eventManager.objectMap[i]={objectType:"dataSeries",dataSeriesIndex:f},i=k(i),c.strokeStyle=i,c.lineWidth=0<g.lineThickness?Math.max(g.lineThickness,4):0,colorSet=g._colorSet,color=colorSet[0],b.strokeStyle=color;var j,l,i=!0,m=0;if(0<h.length){for(m=0;m<h.length;m++)if(j=h[m].getTime?h[m].x.getTime():h[m].x,!(j<a.axisX.dataInfo.viewPortMin||j>a.axisX.dataInfo.viewPortMax)&&"number"==typeof h[m].y){j=a.axisX.convertionParameters.reference+a.axisX.convertionParameters.pixelPerUnit*(j-a.axisX.convertionParameters.minimum)+.5<<0,l=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(h[m].y-a.axisY.convertionParameters.minimum)+.5<<0;var n=g.dataPointIds[m];if(this._eventManager.objectMap[n]={objectType:"dataPoint",dataSeriesIndex:f,dataPointIndex:m,x1:j,y1:l},i?(b.beginPath(),b.moveTo(j,l),F&&(c.beginPath(),c.moveTo(j,l)),i=!1):(b.lineTo(j,l),F&&c.lineTo(j,l),0==m%500&&(b.stroke(),b.beginPath(),b.moveTo(j,l),F&&(c.stroke(),c.beginPath(),c.moveTo(j,l)))),0<h[m].markerSize||0<g.markerSize){var o=g.getMarkerProperties(m,j,l,b);d.push(o),(!g.maxWidthInX||o.size>g.maxWidthInX)&&(g.maxWidthInX=o.size/(1<a.axisX.convertionParameters.pixelPerUnit?a.axisX.convertionParameters.pixelPerUnit-1:a.axisX.convertionParameters.pixelPerUnit)),n=k(n),F&&d.push({x:j,y:l,ctx:c,type:o.type,size:o.size,color:n,borderColor:n,borderThickness:o.borderThickness})}(h[m].indexLabel||g.indexLabel)&&this._indexLabels.push({chartType:"line",dataPoint:h[m],dataSeries:g,point:{x:j,y:l},color:color})}b.stroke(),F&&c.stroke()}}W.drawMarkers(d),b.restore(),b.beginPath(),F&&c.beginPath()}},t.prototype.renderStepLine=function(a){var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var c=this._eventManager.ghostCtx;b.save();var d=this.plotArea;b.beginPath(),b.rect(d.x1,d.y1,d.width,d.height),b.clip();for(var d=[],e=0;e<a.dataSeriesIndexes.length;e++){var f=a.dataSeriesIndexes[e],g=this.data[f];b.lineWidth=g.lineThickness;var h=g.dataPoints,i=g.id;this._eventManager.objectMap[i]={objectType:"dataSeries",dataSeriesIndex:f},i=k(i),c.strokeStyle=i,c.lineWidth=0<g.lineThickness?Math.max(g.lineThickness,4):0,colorSet=g._colorSet,color=colorSet[0],b.strokeStyle=color;var j,l,i=!0,m=0;if(0<h.length){for(m=0;m<h.length;m++)if(j=h[m].getTime?h[m].x.getTime():h[m].x,!(j<a.axisX.dataInfo.viewPortMin||j>a.axisX.dataInfo.viewPortMax)&&"number"==typeof h[m].y){var n=l;j=a.axisX.convertionParameters.reference+a.axisX.convertionParameters.pixelPerUnit*(j-a.axisX.convertionParameters.minimum)+.5<<0,l=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(h[m].y-a.axisY.convertionParameters.minimum)+.5<<0;var o=g.dataPointIds[m];this._eventManager.objectMap[o]={objectType:"dataPoint",dataSeriesIndex:f,dataPointIndex:m,x1:j,y1:l},i?(b.beginPath(),b.moveTo(j,l),F&&(c.beginPath(),c.moveTo(j,l)),i=!1):(b.lineTo(j,n),F&&c.lineTo(j,n),b.lineTo(j,l),F&&c.lineTo(j,l),0==m%500&&(b.stroke(),b.beginPath(),b.moveTo(j,l),F&&(c.stroke(),c.beginPath(),c.moveTo(j,l)))),(0<h[m].markerSize||0<g.markerSize)&&(n=g.getMarkerProperties(m,j,l,b),d.push(n),(!g.maxWidthInX||n.size>g.maxWidthInX)&&(g.maxWidthInX=n.size/(1<a.axisX.convertionParameters.pixelPerUnit?a.axisX.convertionParameters.pixelPerUnit-1:a.axisX.convertionParameters.pixelPerUnit)),o=k(o),F&&d.push({x:j,y:l,ctx:c,type:n.type,size:n.size,color:o,borderColor:o,borderThickness:n.borderThickness})),(h[m].indexLabel||g.indexLabel)&&this._indexLabels.push({chartType:"stepLine",dataPoint:h[m],dataSeries:g,point:{x:j,y:l},color:color})}b.stroke(),F&&c.stroke()}}W.drawMarkers(d),b.restore(),b.beginPath(),F&&c.beginPath()}},t.prototype.renderSpline=function(a){var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var c=this._eventManager.ghostCtx;b.save();var d=this.plotArea;b.beginPath(),b.rect(d.x1,d.y1,d.width,d.height),b.clip();for(var d=[],e=0;e<a.dataSeriesIndexes.length;e++){var f=a.dataSeriesIndexes[e],g=this.data[f];b.lineWidth=g.lineThickness;var h=g.dataPoints,i=g.id;this._eventManager.objectMap[i]={objectType:"dataSeries",dataSeriesIndex:f},i=k(i),c.strokeStyle=i,c.lineWidth=0<g.lineThickness?Math.max(g.lineThickness,4):0,colorSet=g._colorSet,color=colorSet[0],b.strokeStyle=color;var j,l,i=0,m=[];if(0<h.length)for(i=0;i<h.length;i++)if(j=h[i].getTime?h[i].x.getTime():h[i].x,!(j<a.axisX.dataInfo.viewPortMin||j>a.axisX.dataInfo.viewPortMax)&&"number"==typeof h[i].y){j=a.axisX.convertionParameters.reference+a.axisX.convertionParameters.pixelPerUnit*(j-a.axisX.convertionParameters.minimum)+.5<<0,l=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(h[i].y-a.axisY.convertionParameters.minimum)+.5<<0;var n=g.dataPointIds[i];if(this._eventManager.objectMap[n]={objectType:"dataPoint",dataSeriesIndex:f,dataPointIndex:i,x1:j,y1:l},m[m.length]={x:j,y:l},0<h[i].markerSize||0<g.markerSize){var o=g.getMarkerProperties(i,j,l,b);d.push(o),(!g.maxWidthInX||o.size>g.maxWidthInX)&&(g.maxWidthInX=o.size/(1<a.axisX.convertionParameters.pixelPerUnit?a.axisX.convertionParameters.pixelPerUnit-1:a.axisX.convertionParameters.pixelPerUnit)),n=k(n),F&&d.push({x:j,y:l,ctx:c,type:o.type,size:o.size,color:n,borderColor:n,borderThickness:o.borderThickness})}(h[i].indexLabel||g.indexLabel)&&this._indexLabels.push({chartType:"spline",dataPoint:h[i],dataSeries:g,point:{x:j,y:l},color:color})}if(f=u(m,2),0<f.length){for(b.beginPath(),F&&c.beginPath(),b.moveTo(f[0].x,f[0].y),F&&c.moveTo(f[0].x,f[0].y),i=0;i<f.length-3;i+=3)b.bezierCurveTo(f[i+1].x,f[i+1].y,f[i+2].x,f[i+2].y,f[i+3].x,f[i+3].y),F&&c.bezierCurveTo(f[i+1].x,f[i+1].y,f[i+2].x,f[i+2].y,f[i+3].x,f[i+3].y),i>0&&0===i%3e3&&(b.stroke(),b.beginPath(),b.moveTo(f[i+3].x,f[i+3].y),F&&(c.stroke(),c.beginPath(),c.moveTo(f[i+3].x,f[i+3].y)));b.stroke(),F&&c.stroke()}}W.drawMarkers(d),b.restore(),b.beginPath(),F&&c.beginPath()}};var U=function(a,b,c,d,e,f,g,h,i,j){var k=d-b>15&&e-c>15?8:.35*Math.min(d-b,e-c);color2="rgba(255, 255, 255, .4)",color3="rgba(255, 255, 255, 0.1)",color1=f,a.beginPath(),a.moveTo(b,c),a.save(),a.fillStyle=color1,a.fillRect(b,c,d-b,e-c),a.restore(),!0===g&&(a.save(),a.beginPath(),a.moveTo(b,c),a.lineTo(b+k,c+k),a.lineTo(d-k,c+k),a.lineTo(d,c),a.closePath(),f=a.createLinearGradient((d+b)/2,c+k,(d+b)/2,c),f.addColorStop(0,color1),f.addColorStop(1,color2),a.fillStyle=f,a.fill(),a.restore()),!0===h&&(a.save(),a.beginPath(),a.moveTo(b,e),a.lineTo(b+k,e-k),a.lineTo(d-k,e-k),a.lineTo(d,e),a.closePath(),f=a.createLinearGradient((d+b)/2,e-k,(d+b)/2,e),f.addColorStop(0,color1),f.addColorStop(1,color2),a.fillStyle=f,a.fill(),a.restore()),!0===i&&(a.save(),a.beginPath(),a.moveTo(b,c),a.lineTo(b+k,c+k),a.lineTo(b+k,e-k),a.lineTo(b,e),a.closePath(),f=a.createLinearGradient(b+k,(e+c)/2,b,(e+c)/2),f.addColorStop(0,color1),f.addColorStop(1,color3),a.fillStyle=f,a.fill(),a.restore()),!0===j&&(a.save(),a.beginPath(),a.moveTo(d,c),a.lineTo(d-k,c+k),a.lineTo(d-k,e-k),a.lineTo(d,e),f=a.createLinearGradient(d-k,(e+c)/2,d,(e+c)/2),f.addColorStop(0,color1),f.addColorStop(1,color3),a.fillStyle=f,f.addColorStop(0,color1),f.addColorStop(1,color3),a.fillStyle=f,a.fill(),a.closePath(),a.restore())};t.prototype.renderColumn=function(a){var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var c,d,e,f=null,g=this.plotArea,h=0,i=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(0-a.axisY.convertionParameters.minimum)<<0,h=.15*this.width,j=a.axisX.dataInfo.minDiff,l=.9*(g.width/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(j)/a.plotType.totalDataSeries)<<0;for(l>h?l=h:1/0===j?l=h:1>l&&(l=1),b.save(),F&&this._eventManager.ghostCtx.save(),b.beginPath(),b.rect(g.x1,g.y1,g.width,g.height),b.clip(),F&&(this._eventManager.ghostCtx.rect(g.x1,g.y1,g.width,g.height),this._eventManager.ghostCtx.clip()),g=0;g<a.dataSeriesIndexes.length;g++){var j=a.dataSeriesIndexes[g],m=this.data[j],n=m.dataPoints;if(m.maxWidthInX=l/(1<a.axisX.convertionParameters.pixelPerUnit?a.axisX.convertionParameters.pixelPerUnit-1:a.axisX.convertionParameters.pixelPerUnit),0<n.length)for(var o=l>5&&m.bevelEnabled?!0:!1,h=0;h<n.length;h++)if(e=n[h].getTime?n[h].x.getTime():n[h].x,!(e<a.axisX.dataInfo.viewPortMin||e>a.axisX.dataInfo.viewPortMax)&&"number"==typeof n[h].y){c=a.axisX.convertionParameters.reference+a.axisX.convertionParameters.pixelPerUnit*(e-a.axisX.convertionParameters.minimum)+.5<<0,d=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(n[h].y-a.axisY.convertionParameters.minimum)+.5<<0,c=c-a.plotType.totalDataSeries*l/2+(a.previousDataSeriesCount+g)*l<<0;var p,q=c+l<<0;0<=n[h].y?p=i:(p=d,d=i),d>p&&(p=d=p),f=n[h].color?n[h].color:m._colorSet[h%m._colorSet.length],U(b,c,d,q,p,f,o&&0<=n[h].y,0>n[h].y&&o,!1,!1),f=m.dataPointIds[h],this._eventManager.objectMap[f]={objectType:"dataPoint",dataSeriesIndex:j,dataPointIndex:h,x1:c,y1:d,x2:q,y2:p},f=k(f),F&&U(this._eventManager.ghostCtx,c,d,q,p,f,!1,!1,!1,!1),(n[h].indexLabel||m.indexLabel)&&this._indexLabels.push({chartType:"column",dataPoint:n[h],dataSeries:m,point:{x:c+(q-c)/2,y:0<=n[h].y?d:p},bounds:{x1:c,y1:Math.min(d,p),x2:q,y2:Math.max(d,p)},color:f})}}b.restore(),F&&this._eventManager.ghostCtx.restore()}},t.prototype.renderStackedColumn=function(a){var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var c,d=null,e=this.plotArea,f=[],g=[],h=0,i=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(0-a.axisY.convertionParameters.minimum)<<0,h=.15*this.width,j=a.axisX.dataInfo.minDiff,l=.9*(e.width/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(j)/a.plotType.plotUnits.length)<<0;for(l>h?l=h:1/0===j?l=h:1>l&&(l=1),b.save(),F&&this._eventManager.ghostCtx.save(),b.beginPath(),b.rect(e.x1,e.y1,e.width,e.height),b.clip(),F&&(this._eventManager.ghostCtx.rect(e.x1,e.y1,e.width,e.height),this._eventManager.ghostCtx.clip()),j=0;j<a.dataSeriesIndexes.length;j++){var m=a.dataSeriesIndexes[j],n=this.data[m],o=n.dataPoints;if(n.maxWidthInX=l/(1<a.axisX.convertionParameters.pixelPerUnit?a.axisX.convertionParameters.pixelPerUnit-1:a.axisX.convertionParameters.pixelPerUnit),0<o.length){var p=l>5&&n.bevelEnabled?!0:!1;for(b.strokeStyle="#4572A7 ",h=0;h<o.length;h++)if(d=o[h].x.getTime?o[h].x.getTime():o[h].x,!(d<a.axisX.dataInfo.viewPortMin||d>a.axisX.dataInfo.viewPortMax)&&"number"==typeof o[h].y){e=a.axisX.convertionParameters.reference+a.axisX.convertionParameters.pixelPerUnit*(d-a.axisX.convertionParameters.minimum)+.5<<0,c=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(o[h].y-a.axisY.convertionParameters.minimum)+.5<<0;var q,r=e-a.plotType.plotUnits.length*l/2+a.index*l<<0,s=r+l<<0;if(0<=o[h].y){var t=f[d]?f[d]:0;c-=t,q=i-t,f[d]=t+(q-c)}else t=g[d]?g[d]:0,q=c+t,c=i+t,g[d]=t+(q-c);d=o[h].color?o[h].color:n._colorSet[h%n._colorSet.length],U(b,r,c,s,q,d,p&&0<=o[h].y,0>o[h].y&&p,!1,!1),d=n.dataPointIds[h],this._eventManager.objectMap[d]={objectType:"dataPoint",dataSeriesIndex:m,dataPointIndex:h,x1:r,y1:c,x2:s,y2:q},d=k(d),F&&U(this._eventManager.ghostCtx,r,c,s,q,d,!1,!1,!1,!1),(o[h].indexLabel||n.indexLabel)&&this._indexLabels.push({chartType:"stackedColumn",dataPoint:o[h],dataSeries:n,point:{x:e,y:0<=o[h].y?c:q},bounds:{x1:r,y1:Math.min(c,q),x2:s,y2:Math.max(c,q)},color:d})}}}b.restore(),F&&this._eventManager.ghostCtx.restore()}},t.prototype.renderStackedColumn100=function(a){var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var c,d=null,e=this.plotArea,f=[],g=[],h=0,i=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(0-a.axisY.convertionParameters.minimum)<<0,h=.15*this.width,j=a.axisX.dataInfo.minDiff,l=.9*(e.width/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(j)/a.plotType.plotUnits.length)<<0;for(l>h?l=h:1/0===j?l=h:1>l&&(l=1),b.save(),F&&this._eventManager.ghostCtx.save(),b.beginPath(),b.rect(e.x1,e.y1,e.width,e.height),b.clip(),F&&(this._eventManager.ghostCtx.rect(e.x1,e.y1,e.width,e.height),this._eventManager.ghostCtx.clip()),j=0;j<a.dataSeriesIndexes.length;j++){var m=a.dataSeriesIndexes[j],n=this.data[m],o=n.dataPoints;if(n.maxWidthInX=l/(1<a.axisX.convertionParameters.pixelPerUnit?a.axisX.convertionParameters.pixelPerUnit-1:a.axisX.convertionParameters.pixelPerUnit),0<o.length)for(var p=l>5&&n.bevelEnabled?!0:!1,h=0;h<o.length;h++)if(d=o[h].x.getTime?o[h].x.getTime():o[h].x,!(d<a.axisX.dataInfo.viewPortMin||d>a.axisX.dataInfo.viewPortMax)&&"number"==typeof o[h].y){e=a.axisX.convertionParameters.reference+a.axisX.convertionParameters.pixelPerUnit*(d-a.axisX.convertionParameters.minimum)+.5<<0,c=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*((0!==a.dataPointYSums[d]?100*(o[h].y/a.dataPointYSums[d]):0)-a.axisY.convertionParameters.minimum)+.5<<0;var q,r=e-a.plotType.plotUnits.length*l/2+a.index*l<<0,s=r+l<<0;if(0<=o[h].y){var t=f[d]?f[d]:0;c-=t,q=i-t,f[d]=t+(q-c)}else t=g[d]?g[d]:0,q=c+t,c=i+t,g[d]=t+(q-c);d=o[h].color?o[h].color:n._colorSet[h%n._colorSet.length],U(b,r,c,s,q,d,p&&0<=o[h].y,0>o[h].y&&p,!1,!1),d=n.dataPointIds[h],this._eventManager.objectMap[d]={objectType:"dataPoint",dataSeriesIndex:m,dataPointIndex:h,x1:r,y1:c,x2:s,y2:q},d=k(d),F&&U(this._eventManager.ghostCtx,r,c,s,q,d,!1,!1,!1,!1),(o[h].indexLabel||n.indexLabel)&&this._indexLabels.push({chartType:"stackedColumn100",dataPoint:o[h],dataSeries:n,point:{x:e,y:0<=o[h].y?c:q},bounds:{x1:r,y1:Math.min(c,q),x2:s,y2:Math.max(c,q)},color:d})}}b.restore(),F&&this._eventManager.ghostCtx.restore()}},t.prototype.renderBar=function(a){var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var c,d,e,f=null,g=this.plotArea,h=0,i=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(0-a.axisY.convertionParameters.minimum)<<0,h=.15*this.height,j=a.axisX.dataInfo.minDiff,l=.9*(g.height/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(j)/a.plotType.totalDataSeries)<<0;for(l>h?l=h:1/0===j?l=h:1>l&&(l=1),b.save(),F&&this._eventManager.ghostCtx.save(),b.beginPath(),b.rect(g.x1,g.y1,g.width,g.height),b.clip(),F&&(this._eventManager.ghostCtx.rect(g.x1,g.y1,g.width,g.height),this._eventManager.ghostCtx.clip()),g=0;g<a.dataSeriesIndexes.length;g++){var j=a.dataSeriesIndexes[g],m=this.data[j],n=m.dataPoints;if(m.maxWidthInX=l/(1<a.axisX.convertionParameters.pixelPerUnit?a.axisX.convertionParameters.pixelPerUnit-1:a.axisX.convertionParameters.pixelPerUnit),0<n.length){var o=l>5&&m.bevelEnabled?!0:!1;for(b.strokeStyle="#4572A7 ",h=0;h<n.length;h++)if(e=n[h].getTime?n[h].x.getTime():n[h].x,!(e<a.axisX.dataInfo.viewPortMin||e>a.axisX.dataInfo.viewPortMax)&&"number"==typeof n[h].y){d=a.axisX.convertionParameters.reference+a.axisX.convertionParameters.pixelPerUnit*(e-a.axisX.convertionParameters.minimum)+.5<<0,c=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(n[h].y-a.axisY.convertionParameters.minimum)+.5<<0,d=d-a.plotType.totalDataSeries*l/2+(a.previousDataSeriesCount+g)*l<<0;var p,q=d+l<<0;0<=n[h].y?p=i:(p=c,c=i),f=n[h].color?n[h].color:m._colorSet[h%m._colorSet.length],U(b,p,d,c,q,f,o,!1,!1,!1),f=m.dataPointIds[h],this._eventManager.objectMap[f]={objectType:"dataPoint",dataSeriesIndex:j,dataPointIndex:h,x1:p,y1:d,x2:c,y2:q},f=k(f),F&&U(this._eventManager.ghostCtx,p,d,c,q,f,!1,!1,!1,!1),this._indexLabels.push({chartType:"bar",dataPoint:n[h],dataSeries:m,point:{x:0<=n[h].y?c:p,y:d+(q-d)/2},bounds:{x1:Math.min(p,c),y1:d,x2:Math.max(p,c),y2:q},color:f})
}}}b.restore(),F&&this._eventManager.ghostCtx.restore()}},t.prototype.renderStackedBar=function(a){var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var c,d=null,e=this.plotArea,f=[],g=[],h=0,i=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(0-a.axisY.convertionParameters.minimum)<<0,h=.15*this.width,j=a.axisX.dataInfo.minDiff,l=.9*(e.height/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(j)/a.plotType.plotUnits.length)<<0;for(l>h?l=h:1/0===j?l=h:1>l&&(l=1),b.save(),F&&this._eventManager.ghostCtx.save(),b.beginPath(),b.rect(e.x1,e.y1,e.width,e.height),b.clip(),F&&(this._eventManager.ghostCtx.rect(e.x1,e.y1,e.width,e.height),this._eventManager.ghostCtx.clip()),j=0;j<a.dataSeriesIndexes.length;j++){var m=a.dataSeriesIndexes[j],n=this.data[m],o=n.dataPoints;if(n.maxWidthInX=l/(1<a.axisX.convertionParameters.pixelPerUnit?a.axisX.convertionParameters.pixelPerUnit-1:a.axisX.convertionParameters.pixelPerUnit),0<o.length){var p=l>5&&n.bevelEnabled?!0:!1;for(b.strokeStyle="#4572A7 ",h=0;h<o.length;h++)if(d=o[h].x.getTime?o[h].x.getTime():o[h].x,!(d<a.axisX.dataInfo.viewPortMin||d>a.axisX.dataInfo.viewPortMax)&&"number"==typeof o[h].y){e=a.axisX.convertionParameters.reference+a.axisX.convertionParameters.pixelPerUnit*(d-a.axisX.convertionParameters.minimum)+.5<<0,c=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(o[h].y-a.axisY.convertionParameters.minimum)+.5<<0;var q,r=e-a.plotType.plotUnits.length*l/2+a.index*l<<0,s=r+l<<0;if(0<=o[h].y){var t=f[d]?f[d]:0;q=i+t,c+=t,f[d]=t+(c-q)}else t=g[d]?g[d]:0,q=c-t,c=i-t,g[d]=t+(c-q);d=o[h].color?o[h].color:n._colorSet[h%n._colorSet.length],U(b,q,r,c,s,d,p,!1,!1,!1),d=n.dataPointIds[h],this._eventManager.objectMap[d]={objectType:"dataPoint",dataSeriesIndex:m,dataPointIndex:h,x1:q,y1:r,x2:c,y2:s},d=k(d),F&&U(this._eventManager.ghostCtx,q,r,c,s,d,!1,!1,!1,!1),this._indexLabels.push({chartType:"stackedBar",dataPoint:o[h],dataSeries:n,point:{x:0<=o[h].y?c:q,y:e},bounds:{x1:Math.min(q,c),y1:r,x2:Math.max(q,c),y2:s},color:d})}}}b.restore(),F&&this._eventManager.ghostCtx.restore()}},t.prototype.renderStackedBar100=function(a){var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var c,d=null,e=this.plotArea,f=[],g=[],h=0,i=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(0-a.axisY.convertionParameters.minimum)<<0,h=.15*this.width,j=a.axisX.dataInfo.minDiff,l=.9*(e.height/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(j)/a.plotType.plotUnits.length)<<0;for(l>h?l=h:1/0===j?l=h:1>l&&(l=1),b.save(),F&&this._eventManager.ghostCtx.save(),b.beginPath(),b.rect(e.x1,e.y1,e.width,e.height),b.clip(),F&&(this._eventManager.ghostCtx.rect(e.x1,e.y1,e.width,e.height),this._eventManager.ghostCtx.clip()),j=0;j<a.dataSeriesIndexes.length;j++){var m=a.dataSeriesIndexes[j],n=this.data[m],o=n.dataPoints;if(n.maxWidthInX=l/(1<a.axisX.convertionParameters.pixelPerUnit?a.axisX.convertionParameters.pixelPerUnit-1:a.axisX.convertionParameters.pixelPerUnit),0<o.length){var p=l>5&&n.bevelEnabled?!0:!1;for(b.strokeStyle="#4572A7 ",h=0;h<o.length;h++)if(d=o[h].x.getTime?o[h].x.getTime():o[h].x,!(d<a.axisX.dataInfo.viewPortMin||d>a.axisX.dataInfo.viewPortMax)&&"number"==typeof o[h].y){e=a.axisX.convertionParameters.reference+a.axisX.convertionParameters.pixelPerUnit*(d-a.axisX.convertionParameters.minimum)+.5<<0,c=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*((0!==a.dataPointYSums[d]?100*(o[h].y/a.dataPointYSums[d]):0)-a.axisY.convertionParameters.minimum)+.5<<0;var q,r=e-a.plotType.plotUnits.length*l/2+a.index*l<<0,s=r+l<<0;if(0<=o[h].y){var t=f[d]?f[d]:0;q=i+t,c+=t,f[d]=t+(c-q)}else t=g[d]?g[d]:0,q=c-t,c=i-t,g[d]=t+(c-q);d=o[h].color?o[h].color:n._colorSet[h%n._colorSet.length],U(b,q,r,c,s,d,p,!1,!1,!1),d=n.dataPointIds[h],this._eventManager.objectMap[d]={objectType:"dataPoint",dataSeriesIndex:m,dataPointIndex:h,x1:q,y1:r,x2:c,y2:s},d=k(d),F&&U(this._eventManager.ghostCtx,q,r,c,s,d,!1,!1,!1,!1),this._indexLabels.push({chartType:"stackedBar100",dataPoint:o[h],dataSeries:n,point:{x:0<=o[h].y?c:q,y:e},bounds:{x1:Math.min(q,c),y1:r,x2:Math.max(q,c),y2:s},color:d})}}}b.restore(),F&&this._eventManager.ghostCtx.restore()}},t.prototype.renderArea=function(a){var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var c=this._eventManager.ghostCtx,d=a.axisX.lineCoordinates,e=a.axisY.lineCoordinates,f=[],g=this.plotArea;for(b.save(),F&&c.save(),b.beginPath(),b.rect(g.x1,g.y1,g.width,g.height),b.clip(),F&&(c.beginPath(),c.rect(g.x1,g.y1,g.width,g.height),c.clip()),g=0;g<a.dataSeriesIndexes.length;g++){var h=a.dataSeriesIndexes[g],i=this.data[h],j=i.dataPoints,f=i.id;this._eventManager.objectMap[f]={objectType:"dataSeries",dataSeriesIndex:h},f=k(f),c.fillStyle=f;var l,m,n,f=[],o=!0,p=0,q=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(0-a.axisY.convertionParameters.minimum)+.5<<0,r=null;if(0<j.length){for(color=i._colorSet[p%i._colorSet.length],b.fillStyle=color;p<j.length;p++)if(m=j[p].x.getTime?j[p].x.getTime():j[p].x,!(m<a.axisX.dataInfo.viewPortMin||m>a.axisX.dataInfo.viewPortMax)&&(l=a.axisX.convertionParameters.reference+a.axisX.convertionParameters.pixelPerUnit*(m-a.axisX.convertionParameters.minimum)+.5<<0,m=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(j[p].y-a.axisY.convertionParameters.minimum)+.5<<0,"number"==typeof j[p].y)){o?(b.beginPath(),b.moveTo(l,m),r={x:l,y:m},F&&(c.beginPath(),c.moveTo(l,m)),o=!1):(b.lineTo(l,m),F&&c.lineTo(l,m),0==p%250&&(0>=a.axisY.minimum&&0<=a.axisY.maximum?n=q:0>a.axisY.maximum?n=e.y1:0<a.axisY.minimum&&(n=d.y2),b.lineTo(l,n),b.lineTo(r.x,n),b.closePath(),b.fill(),b.beginPath(),b.moveTo(l,m),F&&(c.lineTo(l,n),c.lineTo(r.x,n),c.closePath(),c.fill(),c.beginPath(),c.moveTo(l,m)),r={x:l,y:m}));var s=i.dataPointIds[p];if(this._eventManager.objectMap[s]={objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:p,x1:l,y1:m},0!==j[p].markerSize&&(0<j[p].markerSize||0<i.markerSize)){var t=i.getMarkerProperties(p,l,m,b);f.push(t),(!i.maxWidthInX||t.size>i.maxWidthInX)&&(i.maxWidthInX=t.size/(1<a.axisX.convertionParameters.pixelPerUnit?a.axisX.convertionParameters.pixelPerUnit-1:a.axisX.convertionParameters.pixelPerUnit)),markerColor=k(s),F&&f.push({x:l,y:m,ctx:c,type:t.type,size:t.size,color:markerColor,borderColor:markerColor,borderThickness:t.borderThickness})}(j[p].indexLabel||i.indexLabel)&&this._indexLabels.push({chartType:"area",dataPoint:j[p],dataSeries:i,point:{x:l,y:m},color:color})}0>=a.axisY.minimum&&0<=a.axisY.maximum?n=q:0>a.axisY.maximum?n=e.y1:0<a.axisY.minimum&&(n=d.y2),b.lineTo(l,n),b.lineTo(r.x,n),b.closePath(),b.fill(),F&&(c.lineTo(l,n),c.lineTo(r.x,n),c.closePath(),c.fill()),W.drawMarkers(f)}}b.restore(),F&&this._eventManager.ghostCtx.restore()}},t.prototype.renderSplineArea=function(a){var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var c=this._eventManager.ghostCtx,d=a.axisX.lineCoordinates,e=a.axisY.lineCoordinates,f=[],g=this.plotArea;for(b.save(),F&&c.save(),b.beginPath(),b.rect(g.x1,g.y1,g.width,g.height),b.clip(),F&&(c.beginPath(),c.rect(g.x1,g.y1,g.width,g.height),c.clip()),g=0;g<a.dataSeriesIndexes.length;g++){var h=a.dataSeriesIndexes[g],i=this.data[h],j=i.dataPoints,f=i.id;this._eventManager.objectMap[f]={objectType:"dataSeries",dataSeriesIndex:h},f=k(f),c.fillStyle=f;var l,m,n,f=[],o=0,p=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(0-a.axisY.convertionParameters.minimum)+.5<<0,q=null,q=[];if(0<j.length){for(color=i._colorSet[o%i._colorSet.length],b.fillStyle=color;o<j.length;o++)if(l=j[o].x.getTime?j[o].x.getTime():j[o].x,!(l<a.axisX.dataInfo.viewPortMin||l>a.axisX.dataInfo.viewPortMax)&&(l=a.axisX.convertionParameters.reference+a.axisX.convertionParameters.pixelPerUnit*(l-a.axisX.convertionParameters.minimum)+.5<<0,m=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(j[o].y-a.axisY.convertionParameters.minimum)+.5<<0,"number"==typeof j[o].y)){var r=i.dataPointIds[o];if(this._eventManager.objectMap[r]={objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:o,x1:l,y1:m},q[q.length]={x:l,y:m},0!==j[o].markerSize&&(0<j[o].markerSize||0<i.markerSize)){var s=i.getMarkerProperties(o,l,m,b);f.push(s),(!i.maxWidthInX||s.size>i.maxWidthInX)&&(i.maxWidthInX=s.size/(1<a.axisX.convertionParameters.pixelPerUnit?a.axisX.convertionParameters.pixelPerUnit-1:a.axisX.convertionParameters.pixelPerUnit)),markerColor=k(r),F&&f.push({x:l,y:m,ctx:c,type:s.type,size:s.size,color:markerColor,borderColor:markerColor,borderThickness:s.borderThickness})}(j[o].indexLabel||i.indexLabel)&&this._indexLabels.push({chartType:"splineArea",dataPoint:j[o],dataSeries:i,point:{x:l,y:m},color:color})}if(h=u(q,2),0<h.length){for(b.beginPath(),b.moveTo(h[0].x,h[0].y),F&&(c.beginPath(),c.moveTo(h[0].x,h[0].y)),o=0;o<h.length-3;o+=3)b.bezierCurveTo(h[o+1].x,h[o+1].y,h[o+2].x,h[o+2].y,h[o+3].x,h[o+3].y),F&&c.bezierCurveTo(h[o+1].x,h[o+1].y,h[o+2].x,h[o+2].y,h[o+3].x,h[o+3].y);0>=a.axisY.minimum&&0<=a.axisY.maximum?n=p:0>a.axisY.maximum?n=e.y1:0<a.axisY.minimum&&(n=d.y2),q={x:h[0].x,y:h[0].y},b.lineTo(h[h.length-1].x,n),b.lineTo(q.x,n),b.closePath(),b.fill(),F&&(c.lineTo(h[h.length-1].x,n),c.lineTo(q.x,n),c.closePath(),c.fill())}W.drawMarkers(f)}}b.restore(),F&&this._eventManager.ghostCtx.restore()}},t.prototype.renderStepArea=function(a){var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var c=this._eventManager.ghostCtx,d=a.axisX.lineCoordinates,e=a.axisY.lineCoordinates,f=[],g=this.plotArea;for(b.save(),F&&c.save(),b.beginPath(),b.rect(g.x1,g.y1,g.width,g.height),b.clip(),F&&(c.beginPath(),c.rect(g.x1,g.y1,g.width,g.height),c.clip()),g=0;g<a.dataSeriesIndexes.length;g++){var h=a.dataSeriesIndexes[g],i=this.data[h],j=i.dataPoints,f=i.id;this._eventManager.objectMap[f]={objectType:"dataSeries",dataSeriesIndex:h},f=k(f),c.fillStyle=f;var l,m,n,o,f=[],p=!0,q=0,r=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(0-a.axisY.convertionParameters.minimum)+.5<<0,s=null;if(0<j.length){for(color=i._colorSet[q%i._colorSet.length],b.fillStyle=color;q<j.length;q++)if(n=j[q].x.getTime?j[q].x.getTime():j[q].x,!(n<a.axisX.dataInfo.viewPortMin||n>a.axisX.dataInfo.viewPortMax)){var t=m;l=a.axisX.convertionParameters.reference+a.axisX.convertionParameters.pixelPerUnit*(n-a.axisX.convertionParameters.minimum)+.5<<0,m=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(j[q].y-a.axisY.convertionParameters.minimum)+.5<<0,"number"==typeof j[q].y&&(p?(b.beginPath(),b.moveTo(l,m),s={x:l,y:m},F&&(c.beginPath(),c.moveTo(l,m)),p=!1):(b.lineTo(l,t),F&&c.lineTo(l,t),b.lineTo(l,m),F&&c.lineTo(l,m),0==q%250&&(0>=a.axisY.minimum&&0<=a.axisY.maximum?o=r:0>a.axisY.maximum?o=e.y1:0<a.axisY.minimum&&(o=d.y2),b.lineTo(l,o),b.lineTo(s.x,o),b.closePath(),b.fill(),b.beginPath(),b.moveTo(l,m),F&&(c.lineTo(l,o),c.lineTo(s.x,o),c.closePath(),c.fill(),c.beginPath(),c.moveTo(l,m)),s={x:l,y:m})),n=i.dataPointIds[q],this._eventManager.objectMap[n]={objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:q,x1:l,y1:m},0!==j[q].markerSize&&(0<j[q].markerSize||0<i.markerSize)&&(t=i.getMarkerProperties(q,l,m,b),f.push(t),(!i.maxWidthInX||t.size>i.maxWidthInX)&&(i.maxWidthInX=t.size/(1<a.axisX.convertionParameters.pixelPerUnit?a.axisX.convertionParameters.pixelPerUnit-1:a.axisX.convertionParameters.pixelPerUnit)),markerColor=k(n),F&&f.push({x:l,y:m,ctx:c,type:t.type,size:t.size,color:markerColor,borderColor:markerColor,borderThickness:t.borderThickness})),(j[q].indexLabel||i.indexLabel)&&this._indexLabels.push({chartType:"stepArea",dataPoint:j[q],dataSeries:i,point:{x:l,y:m},color:color}))}0>=a.axisY.minimum&&0<=a.axisY.maximum?o=r:0>a.axisY.maximum?o=e.y1:0<a.axisY.minimum&&(o=d.y2),b.lineTo(l,o),b.lineTo(s.x,o),b.closePath(),b.fill(),F&&(c.lineTo(l,o),c.lineTo(s.x,o),c.closePath(),c.fill()),W.drawMarkers(f)}}b.restore(),F&&this._eventManager.ghostCtx.restore()}},t.prototype.renderStackedArea=function(a){var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var c,d,e,f=null,g=[],i=this.plotArea,j=[],l=[],m=0,n=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(0-a.axisY.convertionParameters.minimum)<<0,o=this._eventManager.ghostCtx;for(F&&o.beginPath(),b.save(),F&&o.save(),b.beginPath(),b.rect(i.x1,i.y1,i.width,i.height),b.clip(),F&&(o.beginPath(),o.rect(i.x1,i.y1,i.width,i.height),o.clip()),xValuePresent=[],i=0;i<a.dataSeriesIndexes.length;i++){var p=a.dataSeriesIndexes[i],q=this.data[p],r=q.dataPoints;for(q.dataPointIndexes=[],m=0;m<r.length;m++)p=r[m].x.getTime?r[m].x.getTime():r[m].x,q.dataPointIndexes[p]=m,xValuePresent[p]||(l.push(p),xValuePresent[p]=!0);l.sort(h)}for(i=0;i<a.dataSeriesIndexes.length;i++){var p=a.dataSeriesIndexes[i],q=this.data[p],r=q.dataPoints,s=!0,t=[],m=q.id;if(this._eventManager.objectMap[m]={objectType:"dataSeries",dataSeriesIndex:p},m=k(m),o.fillStyle=m,0<l.length){for(f=q._colorSet[0],b.fillStyle=f,m=0;m<l.length;m++){e=l[m];var u=null,u=0<=q.dataPointIndexes[e]?r[q.dataPointIndexes[e]]:{x:e,y:0};if(!(e<a.axisX.dataInfo.viewPortMin||e>a.axisX.dataInfo.viewPortMax)&&"number"==typeof u.y){c=a.axisX.convertionParameters.reference+a.axisX.convertionParameters.pixelPerUnit*(e-a.axisX.convertionParameters.minimum)+.5<<0,d=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(u.y-a.axisY.convertionParameters.minimum)+.5<<0;var v=j[e]?j[e]:0;if(d-=v,t.push({x:c,y:n-v}),j[e]=n-d,s)b.beginPath(),b.moveTo(c,d),F&&(o.beginPath(),o.moveTo(c,d)),s=!1;else if(b.lineTo(c,d),F&&o.lineTo(c,d),0==m%250){for(;0<t.length;){var w=t.pop();b.lineTo(w.x,w.y),F&&o.lineTo(w.x,w.y)}b.closePath(),b.fill(),b.beginPath(),b.moveTo(c,d),F&&(o.closePath(),o.fill(),o.beginPath(),o.moveTo(c,d)),t.push({x:c,y:n-v})}if(0<=q.dataPointIndexes[e]){var x=q.dataPointIds[q.dataPointIndexes[e]];this._eventManager.objectMap[x]={objectType:"dataPoint",dataSeriesIndex:p,dataPointIndex:q.dataPointIndexes[e],x1:c,y1:d}}0<=q.dataPointIndexes[e]&&0!==u.markerSize&&(0<u.markerSize||0<q.markerSize)&&(e=q.getMarkerProperties(m,c,d,b),g.push(e),(!q.maxWidthInX||e.size>q.maxWidthInX)&&(q.maxWidthInX=e.size/(1<a.axisX.convertionParameters.pixelPerUnit?a.axisX.convertionParameters.pixelPerUnit-1:a.axisX.convertionParameters.pixelPerUnit)),markerColor=k(x),F&&g.push({x:c,y:d,ctx:o,type:e.type,size:e.size,color:markerColor,borderColor:markerColor,borderThickness:e.borderThickness})),(u.indexLabel||q.indexLabel)&&this._indexLabels.push({chartType:"stackedArea",dataPoint:u,dataSeries:q,point:{x:c,y:d},color:f})}}for(;0<t.length;)w=t.pop(),b.lineTo(w.x,w.y),F&&o.lineTo(w.x,w.y);b.closePath(),b.fill(),b.beginPath(),b.moveTo(c,d),F&&(o.closePath(),o.fill(),o.beginPath(),o.moveTo(c,d))}delete q.dataPointIndexes}W.drawMarkers(g),b.restore(),F&&o.restore()}},t.prototype.renderStackedArea100=function(a){var b=this.plotArea.ctx;if(!(0>=a.dataSeriesIndexes.length)){var c,d,e,f=null,g=this.plotArea,i=[],j=[],l=[],m=0,n=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(0-a.axisY.convertionParameters.minimum)<<0,o=.15*this.width,p=a.axisX.dataInfo.minDiff,p=.9*g.width/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(p)<<0,q=this._eventManager.ghostCtx;for(b.save(),F&&q.save(),b.beginPath(),b.rect(g.x1,g.y1,g.width,g.height),b.clip(),F&&(q.beginPath(),q.rect(g.x1,g.y1,g.width,g.height),q.clip()),xValuePresent=[],g=0;g<a.dataSeriesIndexes.length;g++){var r=a.dataSeriesIndexes[g],s=this.data[r],t=s.dataPoints;for(s.dataPointIndexes=[],m=0;m<t.length;m++)r=t[m].x.getTime?t[m].x.getTime():t[m].x,s.dataPointIndexes[r]=m,xValuePresent[r]||(l.push(r),xValuePresent[r]=!0);l.sort(h)}for(g=0;g<a.dataSeriesIndexes.length;g++){var r=a.dataSeriesIndexes[g],s=this.data[r],t=s.dataPoints,u=!0,f=s.id;this._eventManager.objectMap[f]={objectType:"dataSeries",dataSeriesIndex:r},f=k(f),q.fillStyle=f,1==t.length&&(p=o),1>p?p=1:p>o&&(p=o);var v=[];if(0<l.length){for(f=s._colorSet[m%s._colorSet.length],b.fillStyle=f,m=0;m<l.length;m++){e=l[m];var w=null,w=0<=s.dataPointIndexes[e]?t[s.dataPointIndexes[e]]:{x:e,y:0};if(!(e<a.axisX.dataInfo.viewPortMin||e>a.axisX.dataInfo.viewPortMax)&&"number"==typeof w.y){d=0!==a.dataPointYSums[e]?100*(w.y/a.dataPointYSums[e]):0,c=a.axisX.convertionParameters.reference+a.axisX.convertionParameters.pixelPerUnit*(e-a.axisX.convertionParameters.minimum)+.5<<0,d=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(d-a.axisY.convertionParameters.minimum)+.5<<0;var x=j[e]?j[e]:0;if(d-=x,v.push({x:c,y:n-x}),j[e]=n-d,u)b.beginPath(),b.moveTo(c,d),F&&(q.beginPath(),q.moveTo(c,d)),u=!1;else if(b.lineTo(c,d),F&&q.lineTo(c,d),0==m%250){for(;0<v.length;){var y=v.pop();b.lineTo(y.x,y.y),F&&q.lineTo(y.x,y.y)}b.closePath(),b.fill(),b.beginPath(),b.moveTo(c,d),F&&(q.closePath(),q.fill(),q.beginPath(),q.moveTo(c,d)),v.push({x:c,y:n-x})}if(0<=s.dataPointIndexes[e]){var z=s.dataPointIds[s.dataPointIndexes[e]];this._eventManager.objectMap[z]={objectType:"dataPoint",dataSeriesIndex:r,dataPointIndex:s.dataPointIndexes[e],x1:c,y1:d}}0<=s.dataPointIndexes[e]&&0!==w.markerSize&&(0<w.markerSize||0<s.markerSize)&&(e=s.getMarkerProperties(m,c,d,b),i.push(e),(!s.maxWidthInX||e.size>s.maxWidthInX)&&(s.maxWidthInX=e.size/(1<a.axisX.convertionParameters.pixelPerUnit?a.axisX.convertionParameters.pixelPerUnit-1:a.axisX.convertionParameters.pixelPerUnit)),markerColor=k(z),F&&i.push({x:c,y:d,ctx:q,type:e.type,size:e.size,color:markerColor,borderColor:markerColor,borderThickness:e.borderThickness})),(w.indexLabel||s.indexLabel)&&this._indexLabels.push({chartType:"stackedArea100",dataPoint:w,dataSeries:s,point:{x:c,y:d},color:f})}}for(;0<v.length;)y=v.pop(),b.lineTo(y.x,y.y),F&&q.lineTo(y.x,y.y);b.closePath(),b.fill(),b.beginPath(),b.moveTo(c,d),F&&(q.closePath(),q.fill(),q.beginPath(),q.moveTo(c,d))}delete s.dataPointIndexes}W.drawMarkers(i),b.restore(),F&&q.restore()}},t.prototype.renderBubble=function(a){var b=this.plotArea.ctx,c=a.dataSeriesIndexes.length;if(!(0>=c)){var d,e,f=this.plotArea,g=0,h=.15*this.width,g=a.axisX.dataInfo.minDiff,c=.9*(f.width/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(g)/c)<<0;b.save(),F&&this._eventManager.ghostCtx.save(),b.beginPath(),b.rect(f.x1,f.y1,f.width,f.height),b.clip(),F&&(this._eventManager.ghostCtx.rect(f.x1,f.y1,f.width,f.height),this._eventManager.ghostCtx.clip());for(var i=-1/0,j=1/0,l=0;l<a.dataSeriesIndexes.length;l++)for(var m=a.dataSeriesIndexes[l],n=this.data[m],o=n.dataPoints,p=0,g=0;g<o.length;g++)d=d=o[g].getTime?o[g].x.getTime():o[g].x,d<a.axisX.dataInfo.viewPortMin||d>a.axisX.dataInfo.viewPortMax||"undefined"==typeof o[g].z||(p=o[g].z,p>i&&(i=p),j>p&&(j=p));for(var q=25*Math.PI,f=Math.max(Math.pow(.25*Math.min(f.height,f.width)/2,2)*Math.PI,q),l=0;l<a.dataSeriesIndexes.length;l++)if(m=a.dataSeriesIndexes[l],n=this.data[m],o=n.dataPoints,1==o.length&&(c=h),1>c?c=1:c>h&&(c=h),0<o.length)for(b.strokeStyle="#4572A7 ",g=0;g<o.length;g++)if(d=d=o[g].getTime?o[g].x.getTime():o[g].x,!(d<a.axisX.dataInfo.viewPortMin||d>a.axisX.dataInfo.viewPortMax)&&"number"==typeof o[g].y){d=a.axisX.convertionParameters.reference+a.axisX.convertionParameters.pixelPerUnit*(d-a.axisX.convertionParameters.minimum)+.5<<0,e=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(o[g].y-a.axisY.convertionParameters.minimum)+.5<<0;var p=o[g].z,r=2*Math.max(Math.sqrt((q+(f-q)/(i-j)*(p-j))/Math.PI)<<0,1),p=n.getMarkerProperties(g,b);p.size=r,W.drawMarker(d,e,b,p.type,p.size,p.color,p.borderColor,p.borderThickness),(!n.maxWidthInX||p.size>n.maxWidthInX)&&(n.maxWidthInX=p.size/(1<a.axisX.convertionParameters.pixelPerUnit?a.axisX.convertionParameters.pixelPerUnit-1:a.axisX.convertionParameters.pixelPerUnit));var s=n.dataPointIds[g];this._eventManager.objectMap[s]={objectType:"dataPoint",dataSeriesIndex:m,dataPointIndex:g,x1:d,y1:e,size:r},r=k(s),F&&W.drawMarker(d,e,this._eventManager.ghostCtx,p.type,p.size,r,r,p.borderThickness)}b.restore(),F&&this._eventManager.ghostCtx.restore()}},t.prototype.renderScatter=function(a){var b=this.plotArea.ctx,c=a.dataSeriesIndexes.length;if(!(0>=c)){var d,e,f=this.plotArea,g=0,h=.15*this.width,g=a.axisX.dataInfo.minDiff,c=.9*(f.width/Math.abs(a.axisX.maximum-a.axisX.minimum)*Math.abs(g)/c)<<0;b.save(),F&&this._eventManager.ghostCtx.save(),b.beginPath(),b.rect(f.x1,f.y1,f.width,f.height),b.clip(),F&&(this._eventManager.ghostCtx.rect(f.x1,f.y1,f.width,f.height),this._eventManager.ghostCtx.clip());for(var i=0;i<a.dataSeriesIndexes.length;i++){var j=a.dataSeriesIndexes[i],l=this.data[j],m=l.dataPoints;if(1==m.length&&(c=h),1>c?c=1:c>h&&(c=h),0<m.length){b.strokeStyle="#4572A7 ",Math.pow(.3*Math.min(f.height,f.width)/2,2);for(var n=0,o=0,g=0;g<m.length;g++)if(d=d=m[g].getTime?m[g].x.getTime():m[g].x,!(d<a.axisX.dataInfo.viewPortMin||d>a.axisX.dataInfo.viewPortMax)&&"number"==typeof m[g].y){d=a.axisX.convertionParameters.reference+a.axisX.convertionParameters.pixelPerUnit*(d-a.axisX.convertionParameters.minimum)+.5<<0,e=a.axisY.convertionParameters.reference+a.axisY.convertionParameters.pixelPerUnit*(m[g].y-a.axisY.convertionParameters.minimum)+.5<<0;var p=l.getMarkerProperties(g,d,e,b);W.drawMarker(p.x,p.y,p.ctx,p.type,p.size,p.color,p.color,p.thickness),(!l.maxWidthInX||p.size>l.maxWidthInX)&&(l.maxWidthInX=p.size/(1<a.axisX.convertionParameters.pixelPerUnit?a.axisX.convertionParameters.pixelPerUnit-1:a.axisX.convertionParameters.pixelPerUnit)),Math.sqrt((n-d)*(n-d)+(o-e)*(o-e))<Math.min(p.size,5)||(n=l.dataPointIds[g],this._eventManager.objectMap[n]={objectType:"dataPoint",dataSeriesIndex:j,dataPointIndex:g,x1:d,y1:e},n=k(n),F&&W.drawMarker(p.x,p.y,this._eventManager.ghostCtx,p.type,p.size,n,n,p.borderThickness),n=d,o=e)}}}b.restore(),F&&this._eventManager.ghostCtx.restore()}};var V=function(a,b,c,d,e,f,g){a.save(),"pie"===e?(a.beginPath(),a.moveTo(b.x,b.y),a.arc(b.x,b.y,c,f,g,!1),a.fillStyle=d,a.strokeStyle="white",a.lineWidth=2,a.closePath(),a.stroke(),a.fill()):"doughnut"===e&&(a.beginPath(),a.arc(b.x,b.y,c,f,g,!1),a.arc(b.x,b.y,.6*c,g,f,!0),a.closePath(),a.fillStyle=d,a.strokeStyle="white",a.lineWidth=2,a.stroke(),a.fill()),a.restore()};t.prototype.renderPie=function(a){function b(a){p.frame=0,p.maxFrames=a||1}function c(){if(k&&l){for(var a=0,b=0;b<l.length;b++)a+=Math.abs(l[b].y);for(var c=0,d=0,e=0,f=0,b=0;b<l.length;b++){var g=l[b],h={objectType:"dataPoint",dataPointIndex:b,dataSeriesIndex:0};q.push(h);var i=g.indexLabel?g.indexLabel:k.indexLabel?k.indexLabel:g.label?g.label:k.label?k.label:"";j._eventManager.objectMap[k.dataPointIds[b]]=h,h.center={x:v.x,y:v.y},h.y=g.y,h.radius=x,h.indexLabelText=j.replaceKeywordsWithValue(i,g,k,b),h.indexLabelPlacement=k.indexLabelPlacement,h.indexLabelLineColor=g.indexLabelLineColor?g.indexLabelLineColor:k.indexLabelLineColor?k.indexLabelLineColor:g.color?g.color:k._colorSet[b%k._colorSet.length],h.indexLabelLineThickness=g.indexLabelLineThickness?g.indexLabelLineThickness:k.indexLabelLineThickness,h.indexLabelFontColor=g.indexLabelFontColor?g.indexLabelFontColor:k.indexLabelFontColor,h.indexLabelFontStyle=g.indexLabelFontStyle?g.indexLabelFontStyle:k.indexLabelFontStyle,h.indexLabelFontWeight=g.indexLabelFontWeight?g.indexLabelFontWeight:k.indexLabelFontWeight,h.indexLabelFontSize=g.indexLabelFontSize?g.indexLabelFontSize:k.indexLabelFontSize,h.indexLabelFontFamily=g.indexLabelFontFamily?g.indexLabelFontFamily:k.indexLabelFontFamily,h.indexLabelBackgroundColor=g.indexLabelBackgroundColor?g.indexLabelBackgroundColor:k.indexLabelBackgroundColor?k.indexLabelBackgroundColor:null,h.indexLabelMaxWidth=g.indexLabelMaxWidth?g.indexLabelMaxWidth:k.indexLabelMaxWidth?k.indexLabelMaxWidth:.33*n.width,h.indexLabelWrap=g.indexLabelWrap?g.indexLabelWrap:k.indexLabelWrap,h.startAngle=0===b?k.startAngle?k.startAngle/180*Math.PI:0:q[b-1].endAngle,h.startAngle=(h.startAngle+2*Math.PI)%(2*Math.PI),h.endAngle=h.startAngle+2*Math.PI/a*Math.abs(g.y),g=(h.endAngle+h.startAngle)/2,g=(g+2*Math.PI)%(2*Math.PI),h.midAngle=g,h.midAngle>Math.PI/2-t&&h.midAngle<Math.PI/2+t?((0===c||q[e].midAngle>h.midAngle)&&(e=b),c++):h.midAngle>3*Math.PI/2-t&&h.midAngle<3*Math.PI/2+t&&((0===d||q[f].midAngle>h.midAngle)&&(f=b),d++),h.hemisphere=g>Math.PI/2&&g<=3*Math.PI/2?"left":"right",h.indexLabelTextBlock=new w(j.plotArea.ctx,{fontSize:h.indexLabelFontSize,fontFamily:h.indexLabelFontFamily,fontColor:h.indexLabelFontColor,fontStyle:h.indexLabelFontStyle,fontWeight:h.indexLabelFontWeight,horizontalAlign:"left",backgroundColor:h.indexLabelBackgroundColor,maxWidth:h.indexLabelMaxWidth,maxHeight:h.indexLabelWrap?5*h.indexLabelFontSize:1.5*h.indexLabelFontSize,text:h.indexLabelText,padding:0,textBaseline:h.indexLabelBackgroundColor?"middle":"top"}),h.indexLabelTextBlock.measureText()}for(g=a=0,i=!1,b=0;b<l.length;b++)h=q[(e+b)%l.length],c>1&&h.midAngle>Math.PI/2-t&&h.midAngle<Math.PI/2+t&&(c/2>=a&&!i?(h.hemisphere="right",a++):(h.hemisphere="left",i=!0));for(i=!1,b=0;b<l.length;b++)h=q[(f+b)%l.length],d>1&&h.midAngle>3*Math.PI/2-t&&h.midAngle<3*Math.PI/2+t&&(d/2>=g&&!i?(h.hemisphere="left",g++):(h.hemisphere="right",i=!0))}}function d(){var a=j.plotArea.ctx;if(null!==p&&p.frame<p.maxFrames){0===p.frame&&(p.prevMaxAngle=q[0].startAngle),a.clearRect(n.x1,n.y1,n.width,n.height);for(var a=p.prevMaxAngle+2*Math.PI/p.maxFrames,c=0;c<l.length;c++){var f=0===c?q[c].startAngle:g,g=f+(q[c].endAngle-q[c].startAngle),h=!1;g>a&&(g=a,h=!0);var i=l[c].color?l[c].color:k._colorSet[c%k._colorSet.length];if(g>f&&V(j.plotArea.ctx,q[c].center,q[c].radius,i,k.type,f,g),h)break}p.frame++,p.prevMaxAngle=a,p.frame<p.maxFrames?j.requestAnimFrame.call(window,d):(b(F?15:4),e())}}function e(){var a=j.plotArea.ctx;if(null!==p&&p.frame<p.maxFrames){for(a.clearRect(n.x1,n.y1,n.width,n.height),a=0;a<l.length;a++){var b=q[a].startAngle,c=q[a].endAngle;if(c>b){var d=.07*x*Math.cos(q[a].midAngle),f=.07*x*Math.sin(q[a].midAngle),g=!1;l[a].exploded?(Math.abs(q[a].center.x-(v.x+d))>Math.abs(.5*d/p.maxFrames)||Math.abs(q[a].center.y-(v.y+f))>Math.abs(.5*f/p.maxFrames))&&(q[a].center.x+=d/p.maxFrames,q[a].center.y+=f/p.maxFrames,g=!0):(Math.abs(q[a].center.x-v.x)>=Math.abs(.5*d/p.maxFrames)||Math.abs(q[a].center.y-v.y)>=Math.abs(.5*f/p.maxFrames))&&(q[a].center.x-=d/p.maxFrames,q[a].center.y-=f/p.maxFrames,g=!0),g&&(d={},d.dataSeries=k,d.dataPoint=k.dataPoints[a],d.index=a,j._toolTip.highlightObjects([d])),V(j.plotArea.ctx,q[a].center,q[a].radius,l[a].color?l[a].color:k._colorSet[a%k._colorSet.length],k.type,b,c)}}for(p.frame++,a=j.plotArea.ctx,a.fillStyle="black",a.strokeStyle="grey",a.textBaseline="middle",a.lineJoin="round",b=b=0;b<l.length;b++)c=q[b],c.indexLabelText&&(c.indexLabelTextBlock.y-=c.indexLabelTextBlock.height/2,d=0,d="left"===c.hemisphere?"outside"===k.indexLabelPlacement?-(c.indexLabelTextBlock.width+m):-c.indexLabelTextBlock.width/2:"outside"===k.indexLabelPlacement?m:-c.indexLabelTextBlock.width/2,c.indexLabelTextBlock.x+=d,c.indexLabelTextBlock.render(!0),c.indexLabelTextBlock.x-=d,c.indexLabelTextBlock.y+=c.indexLabelTextBlock.height/2,"outside"===c.indexLabelPlacement&&(d=c.center.x+x*Math.cos(c.midAngle),f=c.center.y+x*Math.sin(c.midAngle),a.strokeStyle=c.indexLabelLineColor,a.lineWidth=c.indexLabelLineThickness,a.beginPath(),a.moveTo(d,f),a.lineTo(c.indexLabelTextBlock.x,c.indexLabelTextBlock.y),a.lineTo(c.indexLabelTextBlock.x+("left"===c.hemisphere?-m:m),c.indexLabelTextBlock.y),a.stroke()),a.lineJoin="miter");p.frame<p.maxFrames&&j.requestAnimFrame.call(window,e)}}function f(a,b){var c=0,c=a.indexLabelTextBlock.y-a.indexLabelTextBlock.height/2,d=a.indexLabelTextBlock.y+a.indexLabelTextBlock.height/2,e=b.indexLabelTextBlock.y-b.indexLabelTextBlock.height/2,f=b.indexLabelTextBlock.y+b.indexLabelTextBlock.height/2;return c=b.indexLabelTextBlock.y>a.indexLabelTextBlock.y?e-d:c-f}function g(a){for(var b=null,c=1;c<l.length;c++){if(b=(a+c+q.length)%q.length,q[b].hemisphere!==q[a].hemisphere){b=null;break}if(q[b].indexLabelText&&b!==a&&(0>f(q[b],q[a])||("right"===q[a].hemisphere?q[b].indexLabelTextBlock.y>=q[a].indexLabelTextBlock.y:q[b].indexLabelTextBlock.y<=q[a].indexLabelTextBlock.y)))break;b=null}return b}function h(a,b){b=b||0;var c=0,d=v.y-1*y,e=v.y+1*y;if(a>=0&&a<l.length){var i=q[a];if(0>b&&i.indexLabelTextBlock.y<d||b>0&&i.indexLabelTextBlock.y>e)return 0;var j=b,k=0,m=0,m=k=k=0;for(0>j?i.indexLabelTextBlock.y-i.indexLabelTextBlock.height/2>d&&i.indexLabelTextBlock.y-i.indexLabelTextBlock.height/2+j<d&&(j=-(d-(i.indexLabelTextBlock.y-i.indexLabelTextBlock.height/2+j))):i.indexLabelTextBlock.y+i.indexLabelTextBlock.height/2<d&&i.indexLabelTextBlock.y+i.indexLabelTextBlock.height/2+j>e&&(j=i.indexLabelTextBlock.y+i.indexLabelTextBlock.height/2+j-e),j=i.indexLabelTextBlock.y+j,d=0,d="right"===i.hemisphere?v.x+Math.sqrt(Math.pow(y,2)-Math.pow(j-v.y,2)):v.x-Math.sqrt(Math.pow(y,2)-Math.pow(j-v.y,2)),m=v.x+x*Math.cos(i.midAngle),k=v.y+x*Math.sin(i.midAngle),k=Math.sqrt(Math.pow(d-m,2)+Math.pow(j-k,2)),m=Math.acos(x/y),k=Math.acos((y*y+x*x-k*k)/(2*x*y)),j=m>k?j-i.indexLabelTextBlock.y:0,d=null,e=1;e<l.length;e++){if(d=(a-e+q.length)%q.length,q[d].hemisphere!==q[a].hemisphere){d=null;break}if(q[d].indexLabelText&&q[d].hemisphere===q[a].hemisphere&&d!==a&&(0>f(q[d],q[a])||("right"===q[a].hemisphere?q[d].indexLabelTextBlock.y<=q[a].indexLabelTextBlock.y:q[d].indexLabelTextBlock.y>=q[a].indexLabelTextBlock.y)))break;d=null}m=d,k=g(a),e=d=0,0>j?(e="right"===i.hemisphere?m:k,c=j,null!==e&&(m=-j,j=i.indexLabelTextBlock.y-i.indexLabelTextBlock.height/2-(q[e].indexLabelTextBlock.y+q[e].indexLabelTextBlock.height/2),r>j-m&&(d=-m,o++,e=h(e,d),+e.toFixed(u)>+d.toFixed(u)&&(c=j>r?-(j-r):-(m-(e-d)))))):j>0&&(e="right"===i.hemisphere?k:m,c=j,null!==e&&(m=j,j=q[e].indexLabelTextBlock.y-q[e].indexLabelTextBlock.height/2-(i.indexLabelTextBlock.y+i.indexLabelTextBlock.height/2),r>j-m&&(d=m,o++,e=h(e,d),+e.toFixed(u)<+d.toFixed(u)&&(c=j>r?j-r:m-(d-e))))),c&&(j=i.indexLabelTextBlock.y+c,d=0,d="right"===i.hemisphere?v.x+Math.sqrt(Math.pow(y,2)-Math.pow(j-v.y,2)):v.x-Math.sqrt(Math.pow(y,2)-Math.pow(j-v.y,2)),i.midAngle>Math.PI/2-t&&i.midAngle<Math.PI/2+t?(e=(a-1+q.length)%q.length,e=q[e],m=q[(a+1+q.length)%q.length],"left"===i.hemisphere&&"right"===e.hemisphere&&d>e.indexLabelTextBlock.x?d=e.indexLabelTextBlock.x-15:"right"===i.hemisphere&&"left"===m.hemisphere&&d<m.indexLabelTextBlock.x&&(d=m.indexLabelTextBlock.x+15)):i.midAngle>3*Math.PI/2-t&&i.midAngle<3*Math.PI/2+t&&(e=(a-1+q.length)%q.length,e=q[e],m=q[(a+1+q.length)%q.length],"right"===i.hemisphere&&"left"===e.hemisphere&&d<e.indexLabelTextBlock.x?d=e.indexLabelTextBlock.x+15:"left"===i.hemisphere&&"right"===m.hemisphere&&d>m.indexLabelTextBlock.x&&(d=m.indexLabelTextBlock.x-15)),i.indexLabelTextBlock.y=j,i.indexLabelTextBlock.x=d,i.indexLabelAngle=Math.atan2(i.indexLabelTextBlock.y-v.y,i.indexLabelTextBlock.x-v.x))}return c}function i(){var a=j.plotArea.ctx;a.fillStyle="grey",a.strokeStyle="grey",a.font="16px Arial",a.textBaseline="middle";for(var c=0,e=a=0,a=0;10>a&&(1>a||e>0);a++){if(x-=e,e=0,"outside"===k.indexLabelPlacement){for(y=x*s,c=0;c<l.length;c++){var i=q[c];i.indexLabelTextBlock.x=v.x+y*Math.cos(i.midAngle),i.indexLabelTextBlock.y=v.y+y*Math.sin(i.midAngle),i.indexLabelAngle=i.midAngle,i.radius=x}for(var o,p,c=0;c<l.length;c++){var i=q[c],t=g(c);if(null!==t){o=q[c],p=q[t];var w=0,w=f(o,p)-r;if(0>w){for(var z=p=o=0;z<l.length;z++)z!==c&&q[z].hemisphere===i.hemisphere&&(q[z].indexLabelTextBlock.y<i.indexLabelTextBlock.y?o++:p++);z=w/(o+p||1)*p,o=-1*(w-z);var A=p=0;"right"===i.hemisphere?(p=h(c,z),o=-1*(w-p),A=h(t,o),+A.toFixed(u)<+o.toFixed(u)&&+p.toFixed(u)<=+z.toFixed(u)&&h(c,-(o-A))):(p=h(t,z),o=-1*(w-p),A=h(c,o),+A.toFixed(u)<+o.toFixed(u)&&+p.toFixed(u)<=+z.toFixed(u)&&h(t,-(o-A)))}}}}else for(c=0;c<l.length;c++)i=q[c],y="pie"===k.type?.7*x:.8*x,w=v.x+y*Math.cos(i.midAngle),z=v.y+y*Math.sin(i.midAngle),i.indexLabelTextBlock.x=w,i.indexLabelTextBlock.y=z;for(c=0;c<l.length;c++)i=q[c],i.indexLabelTextBlock.measureText(),w=w=0,"right"===i.hemisphere?(w=n.x2-(i.indexLabelTextBlock.x+i.indexLabelTextBlock.width+m),w*=-1):w=n.x1-(i.indexLabelTextBlock.x-i.indexLabelTextBlock.width-m),w>0&&(Math.abs(i.indexLabelTextBlock.y-i.indexLabelTextBlock.height/2-v.y)<x||Math.abs(i.indexLabelTextBlock.y+i.indexLabelTextBlock.height/2-v.y)<x)&&(w/=Math.abs(Math.cos(i.indexLabelAngle)),w>9&&(w*=.3),w>e&&(e=w)),w=w=0,0<i.indexLabelAngle&&i.indexLabelAngle<Math.PI?(w=n.y2-(i.indexLabelTextBlock.y+i.indexLabelTextBlock.height/2+5),w*=-1):w=n.y1-(i.indexLabelTextBlock.y-i.indexLabelTextBlock.height/2-5),w>0&&Math.abs(i.indexLabelTextBlock.x-v.x)<x&&(w/=Math.abs(Math.sin(i.indexLabelAngle)),w>9&&(w*=.3),w>e&&(e=w));
for(c=function(a,b,c){for(var d=[],e=0;d.push(q[b]),b!==c;b=(b+1+l.length)%l.length);for(d.sort(function(a,b){return a.y-b.y}),b=0;b<d.length&&(c=d[b],a>e);b++)e+=c.indexLabelTextBlock.height,c.indexLabelTextBlock.text="",c.indexLabelText="",c.indexLabelTextBlock.measureText()},t=i=-1,z=A=0;z<l.length;z++)if(o=q[z],o.indexLabelText){var B=g(z);null!==B&&(p=q[B],w=0,w=f(o,p),0>w?(0>i&&(i=z),B!==i&&(t=B),A+=-w):A>0&&(c(A,i,t),t=i=-1,A=0))}A>0&&c(A,i,t)}b(j.animationEnabled&&0===j.renderCount?F?60:30:1),d()}var j=this;if(!(0>=a.dataSeriesIndexes.length)){var k=this.data[a.dataSeriesIndexes[0]],l=k.dataPoints,m=10,n=this.plotArea,o=0,p={frame:0,maxFrames:1},q=[],r=2,s=1.3,t=20/180*Math.PI,u=6,v={x:(n.x2+n.x1)/2,y:(n.y2+n.y1)/2},x="inside"===k.indexLabelPlacement?.95*Math.min(n.width,n.height)/2:.8*Math.min(n.width,n.height)/2,y=x*s;this.pieDoughnutClickHandler=function(a){p.frame===p.maxFrames&&(a=a.dataPoint,a.exploded=a.exploded?!1:!0,b(F?15:4),e())},c(),i()}},t.prototype.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),v.prototype.registerSpace=function(a,b){"top"===a?this._topOccupied+=b.height:"bottom"===a?this._bottomOccupied+=b.height:"left"===a?this._leftOccupied+=b.width:"right"===a&&(this._rightOccupied+=b.width)},v.prototype.unRegisterSpace=function(a,b){"top"===a?this._topOccupied-=b.height:"bottom"===a?this._bottomOccupied-=b.height:"left"===a?this._leftOccupied-=b.width:"right"===a&&(this._rightOccupied-=b.width)},v.prototype.getFreeSpace=function(){return{x1:this._leftOccupied,y1:this._topOccupied,x2:this.chart.width-this._rightOccupied,y2:this.chart.height-this._bottomOccupied,width:this.chart.width-this._rightOccupied-this._leftOccupied,height:this.chart.height-this._bottomOccupied-this._topOccupied}},v.prototype.reset=function(){this._topOccupied=0,this._bottomOccupied=3,this._rightOccupied=this._leftOccupied=0},a(w,s),w.prototype.render=function(a){a&&this.ctx.save();var b=this.ctx.font;this.ctx.textBaseline=this.textBaseline,this._isDirty&&this.measureText(this.ctx),this.ctx.translate(this.x,this.y),this.ctx.font=this._getFontString(),this.ctx.rotate(Math.PI/180*this.angle);var c=0,d=this.padding,e=null;(0<this.borderThickness&&this.borderColor||this.backgroundColor)&&(this.ctx.roundRect(0,0,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor),"middle"===this.textBaseline&&(d+=this.fontSize/2)),this.ctx.fillStyle=this.fontColor;for(var f=0;f<this._wrappedText.lines.length;f++)e=this._wrappedText.lines[f],"right"===this.horizontalAlign?c=this.width-e.width-this.padding:"left"===this.horizontalAlign?c=this.padding:"center"===this.horizontalAlign&&(c=(this.width-2*this.padding)/2-e.width/2+this.padding),this.ctx.fillText(e.text,c,d),d+=e.height;this.ctx.font=b,a&&this.ctx.restore()},w.prototype.setText=function(a){this.text=a,this._isDirty=!0,this._wrappedText=null},w.prototype.measureText=function(){if(null===this.maxWidth)throw"Please set maxWidth and height for TextBlock";return this._wrapText(this.ctx),this._isDirty=!1,{width:this.width,height:this.height}},w.prototype._getLineWithWidth=function(a,b,c){if(a=String(a),!a)return{text:"",width:0};var d=c=0,e=a.length-1,f=1/0;for(this.ctx.font=this._getFontString();e>=d;){var f=Math.floor((d+e)/2),g=a.substr(0,f+1);if(c=this.ctx.measureText(g).width,b>c)d=f+1;else{if(!(c>b))break;e=f-1}}return c>b&&1<g.length&&(g=g.substr(0,g.length-1),c=this.ctx.measureText(g).width),b=!0,(g.length===a.length||" "===a[g.length])&&(b=!1),b&&(a=g.split(" "),1<a.length&&a.pop(),g=a.join(" "),c=this.ctx.measureText(g).width),{text:g,width:c}},w.prototype._wrapText=function(){text=new String(f(this.text));var a=[],b=this.ctx.font,c=0,d=0;for(this.ctx.font=this._getFontString();0<text.length;){var e=this.maxHeight-2*this.padding,g=this._getLineWithWidth(text,this.maxWidth-2*this.padding,!1);g.height=this._lineHeight,a.push(g),d=Math.max(d,g.width),c+=g.height,text=f(text.slice(g.text.length,text.length)),e&&c>e&&(g=a.pop(),c-=g.height)}this._wrappedText={lines:a,width:d,height:c},this.width=d+2*this.padding,this.height=c+2*this.padding,this.ctx.font=b},w.prototype._getFontString=function(){return o("",this,null)},a(x,s),x.prototype.render=function(){if(this.text){var a,b,c=this.chart.layoutManager.getFreeSpace(),d=0,e=0,f=0,g=0,h=0;"top"===this.verticalAlign||"bottom"===this.verticalAlign?(g=c.width-2*this.margin,h=.5*c.height-2*this.margin,f=0):"center"===this.verticalAlign&&("left"===this.horizontalAlign||"right"===this.horizontalAlign?(g=c.height-2*this.margin,h=.5*c.width-2*this.margin):"center"===this.horizontalAlign&&(g=c.width-2*this.margin,h=.5*c.height-2*this.margin));var h=new w(this.ctx,{fontSize:this.fontSize,fontFamily:this.fontFamily,fontColor:this.fontColor,fontStyle:this.fontStyle,fontWeight:this.fontWeight,horizontalAlign:this.horizontalAlign,verticalAlign:this.verticalAlign,borderColor:this.borderColor,borderThickness:this.borderThickness,backgroundColor:this.backgroundColor,maxWidth:g,maxHeight:h,cornerRadius:this.cornerRadius,text:this.text,padding:this.padding,textBaseline:this.borderColor&&0<this.borderThickness?"middle":"top"}),i=h.measureText();"top"===this.verticalAlign||"bottom"===this.verticalAlign?("top"===this.verticalAlign?(e=this.margin,b="top"):"bottom"===this.verticalAlign&&(e=c.y2-this.margin-i.height,b="bottom"),"left"===this.horizontalAlign?d=c.x1+this.margin:"center"===this.horizontalAlign?d=c.x1+(g/2-i.width/2)+this.margin:"right"===this.horizontalAlign&&(d=c.x2-this.margin-i.width),a=this.horizontalAlign,this.width=i.width,this.height=i.height):"center"===this.verticalAlign&&("left"===this.horizontalAlign?(d=c.x1+this.margin,e=c.y2-this.margin-(g/2-i.width/2),f=-90,b="left",this.width=i.height,this.height=i.width):"right"===this.horizontalAlign?(d=c.x2-this.margin,e=c.y1+this.margin+(g/2-i.width/2),f=90,b="right",this.width=i.height,this.height=i.width):"center"===this.horizontalAlign&&(e=c.y1+(c.height/2-i.height/2),d=c.x1+(c.width/2-i.width/2),b="center",this.width=i.width,this.height=i.height),a="center"),h.x=d,h.y=e,h.angle=f,h.horizontalAlign=a,h.render(!0),this.chart.layoutManager.registerSpace(b,{width:this.width+2*this.margin,height:this.height+2*this.margin}),this.bounds={x1:d,y1:e,x2:d+this.width,y2:e+this.height},this.ctx.textBaseline="top"}},a(y,s),y.prototype.render=function(){var a=this.chart.layoutManager.getFreeSpace(),b=null,c=0,d=0,e=0,f=0,g=[],h=[];"top"===this.verticalAlign||"bottom"===this.verticalAlign?(this.orientation="horizontal",b=this.verticalAlign,e=.9*a.width,f=.5*a.height):"center"===this.verticalAlign&&(this.orientation="vertical",b=this.horizontalAlign,e=.5*a.width,f=.9*a.height);for(var i=0;i<this.dataSeries.length;i++){var j=this.dataSeries[i],k=j.legendMarkerType?j.legendMarkerType:"line"!==j.type&&"stepLine"!==j.type&&"spline"!==j.type&&"scatter"!==j.type&&"bubble"!==j.type||!j.markerType?A.getDefaultLegendMarker(j.type):j.markerType,l=j.legendText?j.legendText:j.name,m=j.legendMarkerColor?j.legendMarkerColor:j.markerColor?j.markerColor:j._colorSet[0],n=j.markerSize||"line"!==j.type&&"stepLine"!==j.type&&"spline"!==j.type?.6*this.lineHeight:0;if("pie"!==j.type&&"doughnut"!==j.type)k={markerType:k,markerColor:m,text:l,textBlock:null,chartType:j.type,markerSize:n,lineColor:j._colorSet[0]},g.push(k);else for(var o=0;o<j.dataPoints.length;o++)n=j.dataPoints[o],k=n.legendMarkerType?n.legendMarkerType:j.legendMarkerType?j.legendMarkerType:A.getDefaultLegendMarker(j.type),l=n.legendText?n.legendText:j.legendText?j.legendText:n.name?n.name:"DataPoint: "+(o+1),m=n.markerColor?n.markerColor:j.markerColor?j.markerColor:n.color?n.color:j.color?j.color:j._colorSet[o%j._colorSet.length],n=0!==n.markerSize&&(0!==j.markerSize||n.markerSize)||"line"!==j.type&&"stepLine"!==j.type&&"spline"!==j.type?.6*this.lineHeight:0,k={markerType:k,markerColor:m,text:l,textBlock:null,chartType:j.type,markerSize:n},g.push(k)}if(0<g.length){for(j=null,i=o=0;i<g.length;i++)k=g[i],"horizontal"===this.orientation?(k.textBlock=new w(this.ctx,{x:0,y:0,maxWidth:e,maxHeight:this.lineHeight,angle:0,text:k.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"top"}),k.textBlock.measureText(),(!j||j.width+k.textBlock.width+(0===j.width?0:this.horizontalSpacing)>e)&&(j={entries:[],width:0},h.push(j),this.height=h.length*(k.textBlock.height+5)),k.textBlock.x=j.width,k.textBlock.y=0,j.width+=Math.round(k.textBlock.width+k.textBlock._lineHeight+(0===j.width?0:.5*k.textBlock._lineHeight))):(this.height+this.lineHeight<f?(j={entries:[],width:0},h.push(j),this.height=h.length*this.lineHeight):(j=h[o],o=(o+1)%h.length),k.textBlock=new w(this.ctx,{x:0,y:0,maxWidth:e,maxHeight:1.5*this.fontSize,angle:0,text:k.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"top"}),k.textBlock.measureText(),k.textBlock.x=j.width,k.textBlock.y=0,j.width+=k.textBlock.width+k.textBlock._lineHeight+(0===j.width?0:.5*k.textBlock._lineHeight)),j.entries.push(k),this.width=Math.max(j.width,this.width);this.height=h.length*this.lineHeight}for("top"===this.verticalAlign?(d="left"===this.horizontalAlign?a.x1+2:"right"===this.horizontalAlign?a.x2-this.width-2:a.x1+a.width/2-this.width/2,c=a.y1):"center"===this.verticalAlign?(d="left"===this.horizontalAlign?a.x1+2:"right"===this.horizontalAlign?a.x2-this.width-2:a.x1+a.width/2-this.width/2,c=a.y1+a.height/2-this.height/2):"bottom"===this.verticalAlign&&(d="left"===this.horizontalAlign?a.x1+2:"right"===this.horizontalAlign?a.x2-this.width-2:a.x1+a.width/2-this.width/2,c=a.y2-this.height-5),i=0;i<h.length;i++)for(j=h[i],a=0;a<j.entries.length;a++)k=j.entries[a],e=k.textBlock.x+d+(0===a?.2*n:.4*this.lineHeight+.2*n),f=c+i*this.lineHeight,("line"===k.chartType||"stepLine"===k.chartType||"spline"===k.chartType)&&(this.ctx.strokeStyle=k.lineColor,this.ctx.lineWidth=Math.ceil(this.lineHeight/8),this.ctx.beginPath(),this.ctx.moveTo(e-.1*this.lineHeight,f+this.lineHeight/2),this.ctx.lineTo(e+.7*this.lineHeight,f+this.lineHeight/2),this.ctx.stroke()),W.drawMarker(e+n/2,f+this.lineHeight/2,this.ctx,k.markerType,n,k.markerColor,null,0),k.textBlock.x=e+Math.round(.9*this.lineHeight),k.textBlock.y=f,k.textBlock.render(!0);this.chart.layoutManager.registerSpace(b,{width:this.width+2+2,height:this.height+5+5}),this.bounds={x1:d,y1:c,x2:d+this.width,y2:c+this.height}},a(z,s),z.prototype.render=function(){var a=this.chart.layoutManager.getFreeSpace();this.ctx.fillStyle="red",this.ctx.fillRect(a.x1,a.y1,a.x2,a.y2)},a(A,s),A.prototype.getDefaultAxisPlacement=function(){return type=this.type,"column"===type||"line"===type||"stepLine"===type||"spline"===type||"area"===type||"stepArea"===type||"splineArea"===type||"stackedColumn"===type||"stackedLine"===type||"bubble"===type||"scatter"===type||"stackedArea"===type||"stackedColumn100"===type||"stackedLine100"===type||"stackedArea100"===type?"normal":"bar"===type||"stackedBar"===type||"stackedBar100"===type?"xySwapped":"pie"===type||"doughnut"===type?"none":(window.console.log("Unknown Chart Type: "+type),null)},A.getDefaultLegendMarker=function(a){return"column"===a||"stackedColumn"===a||"stackedLine"===a||"bar"===a||"stackedBar"===a||"stackedBar100"===a||"bubble"===a||"scatter"===a||"stackedColumn100"===a||"stackedLine100"===a||"stepArea"===a?"square":"line"===a||"stepLine"===a||"spline"===a||"pie"===a||"doughnut"===a?"circle":"area"===a||"splineArea"===a||"stackedArea"===a||"stackedArea100"===a?"triangle":(window.console.log("Unknown Chart Type: "+a),null)},A.prototype.getDataPointAtX=function(a,b){if(!this.dataPoints||0===this.dataPoints.length)return null;var c={dataPoint:null,distance:1/0,index:0/0},d=null,e=0,f=0,g=1,h=1/0,i=0,j=0,k=0;for("none"!==this.chart.plotInfo.axisPlacement&&(k=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,k=k>0?(this.dataPoints.length-1)/k*(a-this.dataPoints[0].x)>>0:0);;){if(f=g>0?k+e:k-e,f>=0&&f<this.dataPoints.length){var d=this.dataPoints[f],l=Math.abs(d.x-a);if(l<c.distance&&(c.dataPoint=d,c.distance=l,c.index=f),d=Math.abs(d.x-a),h>=d?h=d:g>0?i++:j++,i>1e3&&j>1e3)break}else if(0>k-e&&k+e>=this.dataPoints.length)break;-1===g?(e++,g=1):g=-1}return b||c.dataPoint.x!==a?b&&null!==c.dataPoint?c:null:c},A.prototype.getDataPointAtXY=function(a,b,c){if(!this.dataPoints||0===this.dataPoints.length)return null;c=c||!1;var d=[],e=0,f=0,g=1,h=!1,i=1/0,j=0,k=0,l=0;for("none"!==this.chart.plotInfo.axisPlacement&&(l=this.chart.axisX.getXValueAt({x:a,y:b}),f=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,l=f>0?(this.dataPoints.length-1)/f*(l-this.dataPoints[0].x)>>0:0);;){if(f=g>0?l+e:l-e,f>=0&&f<this.dataPoints.length){var m=this.chart._eventManager.objectMap[this.dataPointIds[f]],n=this.dataPoints[f];if(m){switch(this.type){case"column":case"stackedColumn":case"stackedColumn100":case"bar":case"stackedBar":case"stackedBar100":a>=m.x1&&a<=m.x2&&b>=m.y1&&b<=m.y2&&(d.push({dataPoint:n,dataPointIndex:f,dataSeries:this,distance:Math.min(Math.abs(m.x1-a),Math.abs(m.x2-a),Math.abs(m.y1-b),Math.abs(m.y2-b))}),h=!0);break;case"line":case"stepLine":case"spline":case"area":case"stepArea":case"stackedArea":case"stackedArea100":case"splineArea":case"scatter":var o=p("markerSize",n,this)||4,q=c?20:o,r=Math.sqrt(Math.pow(m.x1-a,2)+Math.pow(m.y1-b,2));q>=r&&d.push({dataPoint:n,dataPointIndex:f,dataSeries:this,distance:r}),f=Math.abs(m.x1-a),i>=f?i=f:g>0?j++:k++,o/2>=r&&(h=!0);break;case"bubble":o=m.size,r=Math.sqrt(Math.pow(m.x1-a,2)+Math.pow(m.y1-b,2)),o/2>=r&&(d.push({dataPoint:n,dataPointIndex:f,dataSeries:this,distance:r}),h=!0);break;case"pie":case"doughnut":o=m.center,q="doughnut"===this.type?.6*m.radius:0,r=Math.sqrt(Math.pow(o.x-a,2)+Math.pow(o.y-b,2)),r<m.radius&&r>q&&(r=Math.atan2(b-o.y,a-o.x),0>r&&(r+=2*Math.PI),r=(180*(r/Math.PI)%360+360)%360,o=(180*(m.startAngle/Math.PI)%360+360)%360,m=(180*(m.endAngle/Math.PI)%360+360)%360,o>m&&(m+=360,o>r&&(r+=360)),r>o&&m>r&&(d.push({dataPoint:n,dataPointIndex:f,dataSeries:this,distance:0}),h=!0))}if(h||j>1e3&&k>1e3)break}}else if(0>l-e&&l+e>=this.dataPoints.length)break;-1===g?(e++,g=1):g=-1}for(a=null,b=0;b<d.length;b++)a?d[b].distance<=a.distance&&(a=d[b]):a=d[b];return a},A.prototype.getMarkerProperties=function(a,b,c,d){var e=this.dataPoints;return{x:b,y:c,ctx:d,type:e[a].markerType?e[a].markerType:this.markerType,size:e[a].markerSize?e[a].markerSize:this.markerSize,color:e[a].markerColor?e[a].markerColor:this.markerColor?this.markerColor:e[a].color?e[a].color:this.color?this.color:this._colorSet[a%this._colorSet.length],borderColor:e[a].markerBorderColor?e[a].markerBorderColor:this.markerBorderColor?this.markerBorderColor:null,borderThickness:e[a].markerBorderThickness?e[a].markerBorderThickness:this.markerBorderThickness?this.markerBorderThickness:null}},a(B,s),B.prototype.createLabels=function(){var a,b,d=0,e=0,f=0,d=0;if("bottom"===this._position||"top"===this._position?(d=this.lineCoordinates.width/Math.abs(this.maximum-this.minimum)*this.interval,e=this.labelAutoFit?"undefined"==typeof this._options.labelMaxWidth?.9*d>>0:this.labelMaxWidth:"undefined"==typeof this._options.labelMaxWidth?.7*this.chart.width>>0:this.labelMaxWidth,f="undefined"==typeof this._options.labelWrap||this.labelWrap?.5*this.chart.height>>0:1.5*this.labelFontSize):("left"===this._position||"right"===this._position)&&(d=this.lineCoordinates.height/Math.abs(this.maximum-this.minimum)*this.interval,e=this.labelAutoFit?"undefined"==typeof this._options.labelMaxWidth?.3*this.chart.width>>0:this.labelMaxWidth:"undefined"==typeof this._options.labelMaxWidth?.5*this.chart.width>>0:this.labelMaxWidth,f="undefined"==typeof this._options.labelWrap||this.labelWrap?2*d>>0:1.5*this.labelFontSize),"axisX"===this.type&&"dateTime"===this.chart.plotInfo.axisXValueType)for(b=c(new Date(this.maximum),this.interval,this.intervalType),d=this.intervalStartPosition;b>d;c(d,this.interval,this.intervalType))a="axisX"===this.type&&this.labels[d]?this.labels[d]:N(d,this.valueFormatString,this.chart._cultureInfo),a=new w(this.ctx,{x:0,y:0,maxWidth:e,maxHeight:f,angle:this.labelAngle,text:this.prefix+a+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:d.getTime(),textBlock:a,effectiveHeight:null});else{if(b=this.maximum,this.labels&&this.labels.length){a=Math.ceil(this.interval);for(var g=Math.ceil(this.intervalStartPosition),h=!1,d=g;d<this.maximum;d+=a){if(!this.labels[d]){h=!1;break}h=!0}h&&(this.interval=a,this.intervalStartPosition=g)}for(d=this.intervalStartPosition;b>=d;d+=this.interval)a="axisX"===this.type&&this.labels[d]?this.labels[d]:O(d,this.valueFormatString,this.chart._cultureInfo),a=new w(this.ctx,{x:0,y:0,maxWidth:e,maxHeight:f,angle:this.labelAngle,text:this.prefix+a+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",borderThickness:0}),this._labels.push({position:d,textBlock:a,effectiveHeight:null})}},B.prototype.createLabelsAndCalculateWidth=function(){var a=0;if(this._labels=[],"left"===this._position||"right"===this._position)for(this.createLabels(),i=0;i<this._labels.length;i++){textBlock=this._labels[i].textBlock;var b=textBlock.measureText();labelEffectiveWidth=0===this.labelAngle?b.width:b.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+b.height/2*Math.sin(Math.PI/180*Math.abs(this.labelAngle)),labelEffectiveWidth>a&&(a=labelEffectiveWidth),this._labels[i].effectiveWidth=labelEffectiveWidth}return(this.title?l(this.titleFontFamily,this.titleFontSize,this.titleFontWeight)+2:0)+a+this.tickLength+10},B.prototype.createLabelsAndCalculateHeight=function(){var a=0;this._labels=[];var b,c=0;if(this.createLabels(),"bottom"===this._position||"top"===this._position)for(c=0;c<this._labels.length;c++){b=this._labels[c].textBlock,b=b.measureText();var d=0,d=0===this.labelAngle?b.height:b.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+b.height/2*Math.cos(Math.PI/180*Math.abs(this.labelAngle));d>a&&(a=d),this._labels[c].effectiveHeight=d}return(this.title?l(this.titleFontFamily,this.titleFontSize,this.titleFontWeight)+2:0)+a+this.tickLength},B.setLayoutAndRender=function(a,b,c,d,e){var f,g,h,i=a.chart,j=i.ctx;if(a.calculateAxisParameters(),b&&b.calculateAxisParameters(),c&&c.calculateAxisParameters(),b&&c&&"undefined"==typeof b._options.maximum&&"undefined"==typeof b._options.minimum&&"undefined"==typeof b._options.interval&&"undefined"==typeof c._options.maximum&&"undefined"==typeof c._options.minimum&&"undefined"==typeof c._options.interval){var k=(b.maximum-b.minimum)/b.interval,l=(c.maximum-c.minimum)/c.interval;k>l?c.maximum=c.interval*k+c.minimum:l>k&&(b.maximum=b.interval*l+b.minimum)}var k=b&&b.gridThickness?b.gridThickness:0,l=c&&c.gridThickness?c.gridThickness:0,m=b?b.margin:0;if("normal"===d){a.lineCoordinates={};var n=Math.ceil(b?b.createLabelsAndCalculateWidth():0);f=Math.round(e.x1+n+m),a.lineCoordinates.x1=f,m=Math.ceil(c?c.createLabelsAndCalculateWidth():0),g=Math.round(e.x2-m>a.chart.width-10?a.chart.width-10:e.x2-m),a.lineCoordinates.x2=g,a.lineCoordinates.width=Math.abs(g-f);var o=Math.ceil(a.createLabelsAndCalculateHeight());d=Math.round(e.y2-o-a.margin),h=Math.round(e.y2-a.margin),a.lineCoordinates.y1=d,a.lineCoordinates.y2=d,a.boundingRect={x1:f,y1:d,x2:g,y2:h,width:g-f,height:h-d},b&&(f=Math.round(e.x1+b.margin),d=Math.round(10>e.y1?10:e.y1),g=Math.round(e.x1+n+b.margin),h=Math.round(e.y2-o-a.margin),b.lineCoordinates={x1:g,y1:d,x2:g,y2:h,height:Math.abs(h-d)},b.boundingRect={x1:f,y1:d,x2:g,y2:h,width:g-f,height:h-d}),c&&(f=Math.round(a.lineCoordinates.x2),d=Math.round(10>e.y1?10:e.y1),g=Math.round(f+m+c.margin),h=Math.round(e.y2-o-a.margin),c.lineCoordinates={x1:f,y1:d,x2:f,y2:h,height:Math.abs(h-d)},c.boundingRect={x1:f,y1:d,x2:g,y2:h,width:g-f,height:h-d}),a.calculateValueToPixelConvertionParameters(),b&&b.calculateValueToPixelConvertionParameters(),c&&c.calculateValueToPixelConvertionParameters(),j.save(),j.rect(a.boundingRect.x1-40,a.boundingRect.y1,a.boundingRect.width+80,a.boundingRect.height),j.clip(),a.renderLabelsTicksAndTitle(),j.restore(),b&&b.renderLabelsTicksAndTitle(),c&&c.renderLabelsTicksAndTitle(),i.preparePlotArea(),e=a.chart.plotArea,j.save(),j.rect(e.x1,e.y1-Math.max(l,k)/2,Math.abs(e.x2-e.x1),Math.abs(e.y2-e.y1+Math.max(l,k)/2+Math.max(l,k,a.lineThickness)/2))}else{n=Math.ceil(a.createLabelsAndCalculateWidth()),b&&(b.lineCoordinates={},f=Math.round(e.x1+n+a.margin),g=Math.round(e.x2>b.chart.width-10?b.chart.width-10:e.x2),b.lineCoordinates.x1=f,b.lineCoordinates.x2=g,b.lineCoordinates.width=Math.abs(g-f)),c&&(c.lineCoordinates={},f=Math.round(e.x1+n+a.margin),g=Math.round(e.x2>c.chart.width-10?c.chart.width-10:e.x2),c.lineCoordinates.x1=f,c.lineCoordinates.x2=g,c.lineCoordinates.width=Math.abs(g-f));var o=Math.ceil(b?b.createLabelsAndCalculateHeight():0),p=Math.ceil(c?c.createLabelsAndCalculateHeight():0);b&&(d=Math.round(e.y2-o-b.margin),h=Math.round(e.y2-m>b.chart.height-10?b.chart.height-10:e.y2-m),b.lineCoordinates.y1=d,b.lineCoordinates.y2=d,b.boundingRect={x1:f,y1:d,x2:g,y2:h,width:g-f,height:o}),c&&(d=Math.round(e.y1+c.margin),h=e.y1+c.margin+p,c.lineCoordinates.y1=h,c.lineCoordinates.y2=h,c.boundingRect={x1:f,y1:d,x2:g,y2:h,width:g-f,height:p}),f=Math.round(e.x1+a.margin),d=Math.round(c?c.lineCoordinates.y2:10>e.y1?10:e.y1),g=Math.round(e.x1+n+a.margin),h=Math.round(b?b.lineCoordinates.y1:e.y2-m>a.chart.height-10?a.chart.height-10:e.y2-m),a.lineCoordinates={x1:g,y1:d,x2:g,y2:h,height:Math.abs(h-d)},a.boundingRect={x1:f,y1:d,x2:g,y2:h,width:g-f,height:h-d},a.calculateValueToPixelConvertionParameters(),b&&b.calculateValueToPixelConvertionParameters(),c&&c.calculateValueToPixelConvertionParameters(),b&&b.renderLabelsTicksAndTitle(),c&&c.renderLabelsTicksAndTitle(),a.renderLabelsTicksAndTitle(),i.preparePlotArea(),e=a.chart.plotArea,j.save(),j.rect(e.x1-Math.max(a.lineThickness,k,l)/2,e.y1,Math.abs(e.x2-e.x1+Math.max(a.lineThickness,k,l)/2+Math.max(k,l)/2),Math.abs(e.y2-e.y1))}j.clip(),a.renderInterlacedColors(),b&&b.renderInterlacedColors(),c&&c.renderInterlacedColors(),j.restore(),a.renderGrid(),b&&b.renderGrid(),c&&c.renderGrid(),a.renderAxisLine(),b&&b.renderAxisLine(),c&&c.renderAxisLine()},B.prototype.renderLabelsTicksAndTitle=function(){var a=!1,b=0,c=1,d=0;if(0!==this.labelAngle&&360!==this.labelAngle&&(c=1.2),"undefined"==typeof this._options.interval){if("bottom"===this._position||"top"===this._position){for(e=0;e<this._labels.length;e++)f=this._labels[e],f.position<this.minimum||(f=f.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+f.textBlock.height*Math.sin(Math.PI/180*this.labelAngle),b+=f);b>this.lineCoordinates.width*c&&(a=!0)}if("left"===this._position||"right"===this._position){for(e=0;e<this._labels.length;e++)f=this._labels[e],f.position<this.minimum||(f=f.textBlock.height*Math.cos(Math.PI/180*this.labelAngle)+f.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),b+=f);b>this.lineCoordinates.height*c&&(a=!0)}}if("bottom"===this._position){var e=0;this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor;for(var f,e=0;e<this._labels.length;e++)f=this._labels[e],f.position<this.minimum||f.position>this.maximum||(b=this.getPixelCoordinatesOnAxis(f.position),this.tickThickness&&(c=1===this.tickThickness%2?(b.x<<0)+.5:b.x<<0,this.ctx.beginPath(),this.ctx.moveTo(c,b.y<<0),this.ctx.lineTo(c,b.y+this.tickLength<<0),this.ctx.stroke()),a&&0!==d++%2||(0===f.textBlock.angle?(b.x-=f.textBlock.width/2,b.y+=this.tickLength+f.textBlock.fontSize/2):(b.x-=0>this.labelAngle?f.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,b.y+=this.tickLength+Math.abs(0>this.labelAngle?f.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):0)),f.textBlock.x=b.x,f.textBlock.y=b.y,f.textBlock.render(!0)));this.title&&(this._titleTextBlock=new w(this.ctx,{x:this.lineCoordinates.x1,y:this.boundingRect.y2-this.titleFontSize-5,maxWidth:this.lineCoordinates.width,maxHeight:1.5*this.titleFontSize,angle:0,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.boundingRect.y2-this._titleTextBlock.height-2,this._titleTextBlock.render(!0))}else if("top"===this._position){for(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,e=0;e<this._labels.length;e++)f=this._labels[e],f.position<this.minimum||f.position>this.maximum||(b=this.getPixelCoordinatesOnAxis(f.position),this.tickThickness&&(c=1===this.tickThickness%2?(b.x<<0)+.5:b.x<<0,this.ctx.beginPath(),this.ctx.moveTo(c,b.y<<0),this.ctx.lineTo(c,b.y-this.tickLength<<0),this.ctx.stroke()),a&&0!==d++%2||(0===f.textBlock.angle?(b.x-=f.textBlock.width/2,b.y-=this.tickLength+f.textBlock.height/2):(b.x-=0<this.labelAngle?f.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,b.y-=this.tickLength+Math.abs(0<this.labelAngle?f.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+5:5)),f.textBlock.x=b.x,f.textBlock.y=b.y,f.textBlock.render(!0)));this.title&&(this._titleTextBlock=new w(this.ctx,{x:this.lineCoordinates.x1,y:this.boundingRect.y1,maxWidth:this.lineCoordinates.width,maxHeight:1.5*this.titleFontSize,angle:0,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.render(!0))}else if("left"===this._position){for(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,e=0;e<this._labels.length;e++)f=this._labels[e],f.position<this.minimum||f.position>this.maximum||(b=this.getPixelCoordinatesOnAxis(f.position),this.tickThickness&&(c=1===this.tickThickness%2?(b.y<<0)+.5:b.y<<0,this.ctx.beginPath(),this.ctx.moveTo(b.x<<0,c),this.ctx.lineTo(b.x-this.tickLength<<0,c),this.ctx.stroke()),a&&0!==d++%2||(f.textBlock.x=b.x-f.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5,f.textBlock.y=0===this.labelAngle?b.y-f.textBlock.height/2+this.labelFontSize/2:b.y-f.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),f.textBlock.render(!0)));this.title&&(this._titleTextBlock=new w(this.ctx,{x:this.boundingRect.x1+5,y:this.lineCoordinates.y2,maxWidth:this.lineCoordinates.height,maxHeight:1.5*this.titleFontSize,angle:-90,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.y=this.lineCoordinates.height/2+this._titleTextBlock.width/2+this.lineCoordinates.y1,this._titleTextBlock.render(!0))}else if("right"===this._position){for(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,e=0;e<this._labels.length;e++)f=this._labels[e],f.position<this.minimum||f.position>this.maximum||(b=this.getPixelCoordinatesOnAxis(f.position),this.tickThickness&&(c=1===this.tickThickness%2?(b.y<<0)+.5:b.y<<0,this.ctx.beginPath(),this.ctx.moveTo(b.x<<0,c),this.ctx.lineTo(b.x+this.tickLength<<0,c),this.ctx.stroke()),a&&0!==d++%2||(f.textBlock.x=b.x+this.tickLength+5,f.textBlock.y=0===this.labelAngle?b.y-f.textBlock.height/2+this.labelFontSize/2:b.y,f.textBlock.render(!0)));this.title&&(this._titleTextBlock=new w(this.ctx,{x:this.boundingRect.x2-5,y:this.lineCoordinates.y2,maxWidth:this.lineCoordinates.height,maxHeight:1.5*this.titleFontSize,angle:90,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.y=this.lineCoordinates.height/2-this._titleTextBlock.width/2+this.lineCoordinates.y1,this._titleTextBlock.render(!0))}},B.prototype.renderInterlacedColors=function(){var a,b,c=this.chart.plotArea.ctx,d=this.chart.plotArea;if("bottom"!==this._position&&"top"!==this._position||!this.interlacedColor){if(("left"===this._position||"right"===this._position)&&this.interlacedColor)for(c.fillStyle=this.interlacedColor,e=0;e<this._labels.length;e+=2)b=this.getPixelCoordinatesOnAxis(this._labels[e].position),a=this.getPixelCoordinatesOnAxis(e+1>=this._labels.length?this.maximum:this._labels[e+1].position),c.fillRect(d.x1,a.y,Math.abs(d.x1-d.x2),Math.abs(a.y-b.y))}else{var e=0;for(c.fillStyle=this.interlacedColor,e=0;e<this._labels.length;e+=2)a=this.getPixelCoordinatesOnAxis(this._labels[e].position),b=this.getPixelCoordinatesOnAxis(e+1>=this._labels.length?this.maximum:this._labels[e+1].position),c.fillRect(a.x,d.y1,Math.abs(b.x-a.x),Math.abs(d.y1-d.y2))}},B.prototype.renderGrid=function(){var a,b=this.chart.ctx,c=this.chart.plotArea;if("bottom"===this._position||"top"===this._position){if(this.gridThickness&&0<this.gridThickness)for(b.lineWidth=this.gridThickness,b.strokeStyle=this.gridColor,b.beginPath(),d=0;d<this._labels.length;d++)this._labels[d].position<this.minimum||this._labels[d].position>this.maximum||(a=this.getPixelCoordinatesOnAxis(this._labels[d].position),a=1===this.gridThickness%2?(a.x<<0)+.5:a.x<<0,b.moveTo(a,c.y1<<0),b.lineTo(a,c.y2<<0),b.stroke())}else if(("left"===this._position||"right"===this._position)&&this.gridThickness&&0<this.gridThickness){b.lineWidth=this.gridThickness,b.strokeStyle=this.gridColor,b.beginPath();for(var d=0;d<this._labels.length;d++)this._labels[d].position<this.minimum||this._labels[d].position>this.maximum||(a=this.getPixelCoordinatesOnAxis(this._labels[d].position),a=1===this.gridThickness%2?(a.y<<0)+.5:a.y<<0,b.moveTo(c.x1<<0,a),b.lineTo(c.x2<<0,a),b.stroke())}},B.prototype.renderAxisLine=function(){var a=this.chart.ctx;if("bottom"===this._position||"top"===this._position){if(this.lineThickness){a.lineWidth=this.lineThickness,a.strokeStyle=this.lineColor?this.lineColor:"black";var b=1===this.lineThickness%2?(this.lineCoordinates.y1<<0)+.5:this.lineCoordinates.y1<<0;a.beginPath(),a.moveTo(this.lineCoordinates.x1,b),a.lineTo(this.lineCoordinates.x2,b),a.stroke()}}else"left"!==this._position&&"right"!==this._position||!this.lineThickness||(a.lineWidth=this.lineThickness,a.strokeStyle=this.lineColor,b=1===this.lineThickness%2?(this.lineCoordinates.x1<<0)+.5:this.lineCoordinates.x1<<0,a.beginPath(),a.moveTo(b,this.lineCoordinates.y1),a.lineTo(b,this.lineCoordinates.y2),a.stroke())},B.prototype.getPixelCoordinatesOnAxis=function(a){var b={},c=this.lineCoordinates.width,d=this.lineCoordinates.height;return("bottom"===this._position||"top"===this._position)&&(c/=Math.abs(this.maximum-this.minimum),b.x=this.lineCoordinates.x1+c*(a-this.minimum),b.y=this.lineCoordinates.y1),("left"===this._position||"right"===this._position)&&(c=d/Math.abs(this.maximum-this.minimum),b.y=this.lineCoordinates.y2-c*(a-this.minimum),b.x=this.lineCoordinates.x2),b},B.prototype.getXValueAt=function(a){if(!a)return null;var b=null;return"left"===this._position?b=(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.height*(this.chart.axisX.lineCoordinates.y2-a.y)+this.chart.axisX.minimum:"bottom"===this._position&&(b=(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.width*(a.x-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum),b
},B.prototype.calculateValueToPixelConvertionParameters=function(a){a={pixelPerUnit:null,minimum:null,reference:null};var b=this.lineCoordinates.width,c=this.lineCoordinates.height;a.minimum=this.minimum,("bottom"===this._position||"top"===this._position)&&(a.pixelPerUnit=b/Math.abs(this.maximum-this.minimum),a.reference=this.lineCoordinates.x1),("left"===this._position||"right"===this._position)&&(a.pixelPerUnit=-1*c/Math.abs(this.maximum-this.minimum),a.reference=this.lineCoordinates.y2),this.convertionParameters=a},B.prototype.calculateAxisParameters=function(){var a=this.chart.layoutManager.getFreeSpace();"bottom"===this._position||"top"===this._position?(this.maxWidth=a.width,this.maxHeight=a.height):(this.maxWidth=a.height,this.maxHeight=a.width);var b,c,d,e,a="axisX"===this.type?500>this.maxWidth?8:Math.max(6,Math.floor(this.maxWidth/62)):Math.floor(this.maxWidth/40);if("axisX"===this.type?(b=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:this.dataInfo.viewPortMin,c=null!==this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:this.dataInfo.viewPortMax,0===c-b&&(c+=.4,b-=.4),d=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:1):"axisY"===this.type&&(b="undefined"==typeof this._options.minimum?this.dataInfo.viewPortMin:this._options.minimum,c="undefined"==typeof this._options.maximum?this.dataInfo.viewPortMax:this._options.maximum,0===c-b?(c+=5,b-=5):(0!==c&&(c+=Math.abs(.05)),0!==b&&(b-=Math.abs(.05))),this.includeZero&&"undefined"==typeof this._options.minimum&&b>0&&(b=0),this.includeZero&&"undefined"==typeof this._options.maximum&&0>c&&(c=0)),"axisX"===this.type&&"dateTime"===this.chart.plotInfo.axisXValueType?(e=c-b,this.intervalType||(a>=e/1?(this.interval=1,this.intervalType="millisecond"):a>=e/2?(this.interval=2,this.intervalType="millisecond"):a>=e/5?(this.interval=5,this.intervalType="millisecond"):a>=e/10?(this.interval=10,this.intervalType="millisecond"):a>=e/20?(this.interval=20,this.intervalType="millisecond"):a>=e/50?(this.interval=50,this.intervalType="millisecond"):a>=e/100?(this.interval=100,this.intervalType="millisecond"):a>=e/200?(this.interval=200,this.intervalType="millisecond"):a>=e/250?(this.interval=250,this.intervalType="millisecond"):a>=e/300?(this.interval=300,this.intervalType="millisecond"):a>=e/400?(this.interval=400,this.intervalType="millisecond"):a>=e/500?(this.interval=500,this.intervalType="millisecond"):e/(1*K.secondDuration)<=a?(this.interval=1,this.intervalType="second"):e/(2*K.secondDuration)<=a?(this.interval=2,this.intervalType="second"):e/(5*K.secondDuration)<=a?(this.interval=5,this.intervalType="second"):e/(10*K.secondDuration)<=a?(this.interval=10,this.intervalType="second"):e/(15*K.secondDuration)<=a?(this.interval=15,this.intervalType="second"):e/(20*K.secondDuration)<=a?(this.interval=20,this.intervalType="second"):e/(30*K.secondDuration)<=a?(this.interval=30,this.intervalType="second"):e/(1*K.minuteDuration)<=a?(this.interval=1,this.intervalType="minute"):e/(2*K.minuteDuration)<=a?(this.interval=2,this.intervalType="minute"):e/(5*K.minuteDuration)<=a?(this.interval=5,this.intervalType="minute"):e/(10*K.minuteDuration)<=a?(this.interval=10,this.intervalType="minute"):e/(15*K.minuteDuration)<=a?(this.interval=15,this.intervalType="minute"):e/(20*K.minuteDuration)<=a?(this.interval=20,this.intervalType="minute"):e/(30*K.minuteDuration)<=a?(this.interval=30,this.intervalType="minute"):e/(1*K.hourDuration)<=a?(this.interval=1,this.intervalType="hour"):e/(2*K.hourDuration)<=a?(this.interval=2,this.intervalType="hour"):e/(3*K.hourDuration)<=a?(this.interval=3,this.intervalType="hour"):e/(6*K.hourDuration)<=a?(this.interval=6,this.intervalType="hour"):e/(1*K.dayDuration)<=a?(this.interval=1,this.intervalType="day"):e/(2*K.dayDuration)<=a?(this.interval=2,this.intervalType="day"):e/(4*K.dayDuration)<=a?(this.interval=4,this.intervalType="day"):e/(1*K.weekDuration)<=a?(this.interval=1,this.intervalType="week"):e/(2*K.weekDuration)<=a?(this.interval=2,this.intervalType="week"):e/(3*K.weekDuration)<=a?(this.interval=3,this.intervalType="week"):e/(1*K.monthDuration)<=a?(this.interval=1,this.intervalType="month"):e/(2*K.monthDuration)<=a?(this.interval=2,this.intervalType="month"):e/(3*K.monthDuration)<=a?(this.interval=3,this.intervalType="month"):e/(6*K.monthDuration)<=a?(this.interval=6,this.intervalType="month"):(this.interval=e/(1*K.yearDuration)<=a?1:e/(2*K.yearDuration)<=a?2:e/(4*K.yearDuration)<=a?4:Math.floor(B.getNiceNumber(e/(a-1),!0)/K.yearDuration),this.intervalType="year")),this.minimum=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:b-d/2,this.maximum=this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:c+d/2,this.valueFormatString||("year"===this.intervalType?this.valueFormatString="YYYY":"month"===this.intervalType?this.valueFormatString="MMM YYYY":"week"===this.intervalType?this.valueFormatString="MMM DD YYYY":"day"===this.intervalType?this.valueFormatString="MMM DD YYYY":"hour"===this.intervalType?this.valueFormatString="hh:mm TT":"minute"===this.intervalType?this.valueFormatString="hh:mm TT":"second"===this.intervalType?this.valueFormatString="hh:mm:ss TT":"millisecond"===this.intervalType&&(this.valueFormatString="fff'ms'")),this.intervalStartPosition=this.getLabelStartPoint(new Date(this.minimum),this.intervalType,this.interval)):(this.intervalType="number",e=B.getNiceNumber(c-b,!1),this.interval=this._options&&this._options.interval?this._options.interval:B.getNiceNumber(e/(a-1),!0),this.minimum=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:Math.floor(b/this.interval)*this.interval,this.maximum=null!==this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:Math.ceil(c/this.interval)*this.interval,"axisX"===this.type?(null===this.sessionVariables.internalMinimum&&(this.minimum=b-d/2),this.sessionVariables.internalMaximum||(this.maximum=c+d/2),this.intervalStartPosition=Math.floor((this.minimum+.2*this.interval)/this.interval)*this.interval):"axisY"===this.type&&(this.intervalStartPosition=this.minimum)),"axisX"===this.type&&(this._absoluteMinimum=this._options&&"undefined"!=typeof this._options.minimum?this._options.minimum:this.dataInfo.min-d/2,this._absoluteMaximum=this._options&&"undefined"!=typeof this._options.maximum?this._options.maximum:this.dataInfo.max+d/2),!this.valueFormatString&&(this.valueFormatString="#,##0.##",e=Math.abs(this.maximum-this.minimum),1>e&&(b=Math.floor(Math.abs(Math.log(e)/Math.LN10))+2,b>2)))for(c=0;b-2>c;c++)this.valueFormatString+="#"},B.getNiceNumber=function(a,b){var c=Math.floor(Math.log(a)/Math.LN10),d=a/Math.pow(10,c);return(b?1.5>d?1:3>d?2:7>d?5:10:1>=d?1:2>=d?2:5>=d?5:10)*Math.pow(10,c)},B.prototype.getLabelStartPoint=function(){var a=d(this.interval,this.intervalType),a=new Date(Math.floor(this.minimum/a)*a);return"millisecond"!==this.intervalType&&("second"===this.intervalType?0<a.getMilliseconds()&&(a.setSeconds(a.getSeconds()+1),a.setMilliseconds(0)):"minute"===this.intervalType?(0<a.getSeconds()||0<a.getMilliseconds())&&(a.setMinutes(a.getMinutes()+1),a.setSeconds(0),a.setMilliseconds(0)):"hour"===this.intervalType?(0<a.getMinutes()||0<a.getSeconds()||0<a.getMilliseconds())&&(a.setHours(a.getHours()+1),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)):"day"===this.intervalType?(0<a.getHours()||0<a.getMinutes()||0<a.getSeconds()||0<a.getMilliseconds())&&(a.setDate(a.getDate()+1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)):"week"===this.intervalType?(0<a.getDay()||0<a.getHours()||0<a.getMinutes()||0<a.getSeconds()||0<a.getMilliseconds())&&(a.setDate(a.getDate()+(7-a.getDay())),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)):"month"===this.intervalType?(1<a.getDate()||0<a.getHours()||0<a.getMinutes()||0<a.getSeconds()||0<a.getMilliseconds())&&(a.setMonth(a.getMonth()+1),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)):"year"===this.intervalType&&(0<a.getMonth()||1<a.getDate()||0<a.getHours()||0<a.getMinutes()||0<a.getSeconds()||0<a.getMilliseconds())&&(a.setFullYear(a.getFullYear()+1),a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0))),a},a(C,s),C.prototype._initialize=function(){if(this.enabled){this.container=document.createElement("div"),this.container.setAttribute("class","canvasjs-chart-tooltip"),this.container.style.position="absolute",this.container.style.height="auto",this.container.style.boxShadow="1px 1px 2px 2px rgba(0,0,0,0.1)",this.container.style.zIndex="1000",this.container.style.display="none";var a;a='<div style=" width: auto;height: auto;min-width: 50px;',a+="line-height: 20px;",a+="padding: 5px;",a+="font-family: Calibri, Arial, Georgia, serif;",a+="font-weight: 400;",a+="font-style: "+(F?"italic;":"normal;"),a+="font-size: 14px;",a+="color: #000000;",a+="text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);",a+="text-align: left;",a+="border: 2px solid gray;",a+=F?"background: rgba(255,255,255,.9);":"background: rgb(255,255,255);",a+="text-indent: 0px;",a+="white-space: nowrap;",a+="border-radius: 10px;",F||(a+="filter: alpha(opacity = 90);",a+="filter: progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#666666');"),a+='} "> Sample Tooltip</div>',this.container.innerHTML=a,this.contentDiv=this.container.firstChild,this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.chart._canvasJSContainer.appendChild(this.container)}},C.prototype.mouseMoveHandler=function(a,b){this._lastUpdated&&40>(new Date).getTime()-this._lastUpdated||(this._lastUpdated=(new Date).getTime(),this._updateToolTip(a,b))},C.prototype._updateToolTip=function(a,b){if(this.enabled){if("undefined"==typeof a||"undefined"==typeof b){if(isNaN(this._prevX)||isNaN(this._prevY))return;a=this._prevX,b=this._prevY}else this._prevX=a,this._prevY=b;var c=null,d=null,e=[],f=0;if(this.shared&&"none"!==this.chart.plotInfo.axisPlacement){for(f="xySwapped"===this.chart.plotInfo.axisPlacement?(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.height*(this.chart.axisX.lineCoordinates.y2-b)+this.chart.axisX.minimum:(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.width*(a-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum,c=[],d=0;d<this.chart.data.length;d++){var g=this.chart.data[d].getDataPointAtX(f,!0);g&&0<=g.index&&(g.dataSeries=this.chart.data[d],c.push(g))}if(0===c.length)return;for(c.sort(function(a,b){return a.distance-b.distance}),f=c[0],d=0;d<c.length;d++)c[d].dataPoint.x.valueOf()===f.dataPoint.x.valueOf()&&e.push(c[d]);c=null}else if((g=this.chart.getDataPointAtXY(a,b,!0))?(this.currentDataPointIndex=g.dataPointIndex,this.currentSeriesIndex=g.dataSeries.index):F?(g=n(a,b,this.chart._eventManager.ghostCtx),g>0&&"undefined"!=typeof this.chart._eventManager.objectMap[g]?(eventObject=this.chart._eventManager.objectMap[g],this.currentSeriesIndex=eventObject.dataSeriesIndex,this.currentDataPointIndex=0<=eventObject.dataPointIndex?eventObject.dataPointIndex:-1):this.currentDataPointIndex=-1):this.currentDataPointIndex=-1,0<=this.currentSeriesIndex){if(d=this.chart.data[this.currentSeriesIndex],g={},0<=this.currentDataPointIndex)c=d.dataPoints[this.currentDataPointIndex],g.dataSeries=d,g.dataPoint=c,g.index=this.currentDataPointIndex,g.distance=Math.abs(c.x-f);else{if("line"!==d.type&&"stepLine"!==d.type&&"spline"!==d.type&&"area"!==d.type&&"stepArea"!==d.type&&"splineArea"!==d.type&&"stackedArea"!==d.type&&"stackedArea100"!==d.type)return;f=(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.width*(a-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum.valueOf(),g=d.getDataPointAtX(f,!0),g.dataSeries=d,this.currentDataPointIndex=g.index,c=g.dataPoint}e.push(g)}if(0<e.length){this.highlightObjects(e),f="",f=this.getToolTipInnerHTML({entries:e}),this.contentDiv.innerHTML=f,this.contentDiv.innerHTML=f,f=!1,"none"===this.container.style.display&&(f=!0,this.container.style.display="block");try{this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.borderColor?this.borderColor:e[0].dataPoint.color?e[0].dataPoint.color:e[0].dataSeries.color?e[0].dataSeries.color:e[0].dataSeries._colorSet[e[0].index%e[0].dataSeries._colorSet.length]}catch(h){}"pie"===e[0].dataSeries.type||"doughnut"===e[0].dataSeries.type||"bar"===e[0].dataSeries.type||"stackedBar"===e[0].dataSeries.type||"stackedBar100"===e[0].dataSeries.type?toolTipLeft=a-10-this.container.clientWidth:(toolTipLeft=this.chart.axisX.lineCoordinates.width/Math.abs(this.chart.axisX.maximum-this.chart.axisX.minimum)*Math.abs(e[0].dataPoint.x-this.chart.axisX.minimum)+this.chart.axisX.lineCoordinates.x1+.5-this.container.clientWidth<<0,toolTipLeft-=10),toolTipLeft=toolTipLeft>0?toolTipLeft+"px":toolTipLeft+this.container.clientWidth+20+"px",e=1!==e.length||this.shared||"line"!==e[0].dataSeries.type&&"stepLine"!==e[0].dataSeries.type&&"spline"!==e[0].dataSeries.type&&"area"!==e[0].dataSeries.type&&"stepArea"!==e[0].dataSeries.type&&"splineArea"!==e[0].dataSeries.type&&"stackedArea"!==e[0].dataSeries.type&&"stackedArea100"!==e[0].dataSeries.type?"bar"===e[0].dataSeries.type||"stackedBar"===e[0].dataSeries.type||"stackedBar100"===e[0].dataSeries.type?e[0].dataSeries.axisX.lineCoordinates.y2-e[0].dataSeries.axisX.lineCoordinates.height/Math.abs(e[0].dataSeries.axisX.maximum-e[0].dataSeries.axisX.minimum)*Math.abs(e[0].dataPoint.x-e[0].dataSeries.axisX.minimum)+.5<<0:b:e[0].dataSeries.axisY.lineCoordinates.y2-e[0].dataSeries.axisY.lineCoordinates.height/Math.abs(e[0].dataSeries.axisY.maximum-e[0].dataSeries.axisY.minimum)*Math.abs(e[0].dataPoint.y-e[0].dataSeries.axisY.minimum)+.5<<0,e=-e+10,0<e+this.container.clientHeight+5&&(e-=e+this.container.clientHeight+5-0),this.container.style.left=toolTipLeft,this.container.style.bottom=e+"px",!this.animationEnabled||f?this.disableAnimation():this.enableAnimation()}}},C.prototype.highlightObjects=function(a){if(this.enabled){var b=this.chart.overlaidCanvasCtx;this.chart.resetOverlayedCanvas(),b.save();var c=this.chart.plotArea;for(b.rect(c.x1,c.y1,c.width,c.height),b.clip(),b.beginPath(),c=0;c<a.length;c++){var d=a[c];if((d=this.chart._eventManager.objectMap[d.dataSeries.dataPointIds[d.index]])&&d.objectType&&"dataPoint"===d.objectType){var e=this.chart.data[d.dataSeriesIndex],f=d.dataPointIndex;"line"===e.type||"stepLine"===e.type||"spline"===e.type||"scatter"===e.type||"area"===e.type||"stepArea"===e.type||"splineArea"===e.type||"stackedArea"===e.type||"stackedArea100"===e.type?(e=e.getMarkerProperties(f,d.x1,d.y1,this.chart.overlaidCanvasCtx),e.size=Math.max(1.5*e.size<<0,10),e.borderColor=e.borderColor||"#FFFFFF",e.borderThickness=e.borderThickness||Math.ceil(.1*e.size),W.drawMarkers([e])):"bubble"===e.type?(e=e.getMarkerProperties(f,d.x1,d.y1,this.chart.overlaidCanvasCtx),e.size=d.size,e.color="white",e.borderColor="white",b.globalAlpha=.3,W.drawMarkers([e]),b.globalAlpha=1):"column"===e.type||"stackedColumn"===e.type||"stackedColumn100"===e.type||"bar"===e.type||"stackedBar"===e.type||"stackedBar100"===e.type?(b.globalAlpha=.3,U(b,d.x1,d.y1,d.x2,d.y2,"white",!1,!1,!1,!1),b.globalAlpha=1):("pie"===e.type||"doughnut"===e.type)&&(b.globalAlpha=.3,V(b,d.center,d.radius,"white",e.type,d.startAngle,d.endAngle),b.globalAlpha=1)}}b.globalAlpha=1,b.restore()}},C.prototype.getToolTipInnerHTML=function(a){a=a.entries;for(var b="",c=null,d=null,e=0,f="",g=!0,h=0;h<a.length;h++)if(a[h].dataSeries.toolTipContent||a[h].dataPoint.toolTipContent){g=!1;break}if(g&&this.content&&"function"==typeof this.content)b=this.content({entries:a});else if(1<a.length)for(h=0;h<a.length;h++)c=a[h].dataSeries,d=a[h].dataPoint,e=a[h].index,f="",0===h&&g&&!this.content&&(f+="undefined"!=typeof this.chart.axisX.labels[d.x]?this.chart.axisX.labels[d.x]:"{x}",f+="</br>"),"line"===c.type||"stepLine"===c.type||"spline"===c.type||"area"===c.type||"stepArea"===c.type||"splineArea"===c.type||"column"===c.type||"bar"===c.type||"scatter"===c.type||"stackedColumn"===c.type||"stackedColumn100"===c.type||"stackedBar"===c.type||"stackedBar100"===c.type||"stackedArea"===c.type||"stackedArea100"===c.type?f+=d.toolTipContent?d.toolTipContent:c.toolTipContent?c.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\"'color:{color};'\"'>{name}:</span>&nbsp;&nbsp;{y}":"bubble"===c.type?f+=d.toolTipContent?d.toolTipContent:c.toolTipContent?c.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\"'color:{color};'\"'>{name}:</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":("pie"===c.type||"doughnut"===c.type)&&(f+=d.toolTipContent?d.toolTipContent:c.toolTipContent?c.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"&nbsp;&nbsp;{y}"),b+=this.chart.replaceKeywordsWithValue(f,d,c,e),h<a.length-1&&(b+="</br>");else c=a[0].dataSeries,d=a[0].dataPoint,e=a[0].index,"line"===c.type||"stepLine"===c.type||"spline"===c.type||"area"===c.type||"stepArea"===c.type||"splineArea"===c.type||"column"===c.type||"bar"===c.type||"scatter"===c.type||"stackedColumn"===c.type||"stackedColumn100"===c.type||"stackedBar"===c.type||"stackedBar100"===c.type||"stackedArea"===c.type||"stackedArea100"===c.type?f=d.toolTipContent?d.toolTipContent:c.toolTipContent?c.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\"'color:{color};'\"'>"+(d.label?"{label}":"{x}")+" :</span>&nbsp;&nbsp;{y}":"bubble"===c.type?f=d.toolTipContent?d.toolTipContent:c.toolTipContent?c.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\"'color:{color};'\"'>"+(d.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":("pie"===c.type||"doughnut"===c.type)&&(f=d.toolTipContent?d.toolTipContent:c.toolTipContent?c.toolTipContent:this.content&&"function"!=typeof this.content?this.content:(d.name?"{name}:&nbsp;&nbsp;":d.label?"{label}:&nbsp;&nbsp;":"")+"{y}"),b+=this.chart.replaceKeywordsWithValue(f,d,c,e);return b},C.prototype.enableAnimation=function(){this.container.style.WebkitTransition||(this.container.style.WebkitTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.MozTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.MsTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.transition="left .2s ease-out, bottom .2s ease-out")},C.prototype.disableAnimation=function(){this.container.style.WebkitTransition&&(this.container.style.WebkitTransition="",this.container.style.MozTransition="",this.container.style.MsTransition="",this.container.style.transition="")},C.prototype.hide=function(){this.enabled&&(this.container.style.display="none",this.currentSeriesIndex=-1,this._prevY=this._prevX=0/0,this.chart.resetOverlayedCanvas())},t.prototype.replaceKeywordsWithValue=function(a,b,c,d){var e=this;return a.replace(/\{\s*[a-zA-Z]+\s*\}|"[^"]*"|'[^']*'/g,function(a){if('"'===a[0]&&'"'===a[a.length-1]||"'"===a[0]&&"'"===a[a.length-1])return a.slice(1,a.length-1);a=f(a.slice(1,a.length-1));var g=null;if("color"===a)return b.color?b.color:c.color?c.color:c._colorSet[d%c._colorSet.length];if(b.hasOwnProperty(a))g=b;else{if(!c.hasOwnProperty(a))return"";g=c}return"x"===a?e.axisX&&"dateTime"===e.plotInfo.axisXValueType?N(g[a],b.xValueFormatString?b.xValueFormatString:c.xValueFormatString?c.xValueFormatString:e.axisX&&e.axisX.valueFormatString?e.axisX.valueFormatString:"DD MMM YY",e._cultureInfo):O(g[a],b.xValueFormatString?b.xValueFormatString:c.xValueFormatString?c.xValueFormatString:"#,##0.########",e._cultureInfo):"y"===a?O(g[a],b.yValueFormatString?b.yValueFormatString:c.yValueFormatString?c.yValueFormatString:"#,##0.########",e._cultureInfo):g[a]})},D.prototype.reset=function(){this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,F&&(this.ghostCtx.clearRect(0,0,this.chart.width,this.chart.height),this.ghostCtx.beginPath())},D.prototype.getNewObjectTrackingId=function(){return++this.lastObjectId},D.prototype.mouseEventHandler=function(a){if("mousemove"===a.type||"click"===a.type){var b=null,c=null,d=null,e=-1,f=!1,g=!1,h=P(a),d=c=null;(d=this.chart.getDataPointAtXY(h.x,h.y,!1))?c=d.dataSeries.dataPointIds[d.dataPointIndex]:F&&(c=n(h.x,h.y,this.ghostCtx)),d=this.chart.plotArea,c&&h.x>d.x1&&h.x<d.x2&&h.y>d.y1&&h.y<d.y2&&"undefined"!=typeof this.objectMap[c]&&"dataPoint"===this.objectMap[c].objectType?(b=this.objectMap[c],c=this.chart.data[b.dataSeriesIndex],d=c.dataPoints[b.dataPointIndex],e=b.dataPointIndex,(null===this.previousDataPointEventObject||this.previousDataPointEventObject.dataSeriesIndex!==b.dataSeriesIndex||this.previousDataPointEventObject.dataPointIndex!==b.dataPointIndex)&&(this.previousDataPointEventObject&&(f=!0),d.mouseover&&d.mouseover.call(d,{x:h.x,y:h.y,dataPoint:d,dataSeries:c,dataPointIndex:e}),!c.mouseover||null!==this.previousDataPointEventObject&&this.previousDataPointEventObject.dataSeriesIndex===b.dataSeriesIndex||(c.mouseover&&c.mouseover.call(c,{x:h.x,y:h.y,dataPoint:d,dataSeries:c,dataPointIndex:e}),this.previousDataPointEventObject&&(g=!0))),"mousemove"===a.type?(d.cursor&&d.cursor!==a.target.style.cursor?a.target.style.cursor=d.cursor:c.cursor&&c.cursor!==a.target.style.cursor&&(a.target.style.cursor=c.cursor),d.mousemove&&d.mousemove.call(d,{x:h.x,y:h.y,dataPoint:d,dataSeries:c,dataPointIndex:e}),c.mousemove&&c.mousemove.call(c,{x:h.x,y:h.y,dataPoint:d,dataSeries:c,dataPointIndex:e})):"click"===a.type&&5>Math.sqrt(Math.pow(this.chart.dragStartPoint.x-h.x,2)+Math.pow(this.chart.dragStartPoint.y-h.y,2))&&(d.click&&d.click.call(d,{x:h.x,y:h.y,dataPoint:d,dataSeries:c,dataPointIndex:e}),c.click&&c.click.call(c,{x:h.x,y:h.y,dataPoint:d,dataSeries:c,dataPointIndex:e}),this.chart.pieDoughnutClickHandler&&this.chart.pieDoughnutClickHandler.call(c,{x:h.x,y:h.y,dataPoint:d,dataSeries:c,dataPointIndex:e}))):this.previousDataPointEventObject&&(g=f=!0),(f||g)&&(a.target.style.cursor=this.chart._defaultCursor,a=this.chart.data[this.previousDataPointEventObject.dataSeriesIndex],c=a.dataPoints[this.previousDataPointEventObject.dataPointIndex],d=this.previousDataPointEventObject.dataPointIndex,f&&c.mouseout&&c.mouseout.call(c,{x:h.x,y:h.y,dataPoint:c,dataSeries:a,dataPointIndex:d}),g&&a.mouseout&&a.mouseout.call(a,{x:h.x,y:h.y,dataPoint:c,dataSeries:a,dataPointIndex:d})),this.previousDataPointEventObject=b}},a(E,s);var W={drawMarker:function(a,b,c,d,e,f,g,h){if(c){var i=1;c.fillStyle=f?f:"#000000",c.strokeStyle=g?g:"#000000",c.lineWidth=h?h:0,"circle"===d?(c.moveTo(a,b),c.beginPath(),c.arc(a,b,e/2,0,2*Math.PI,!1),f&&c.fill(),h&&(g?c.stroke():(i=c.globalAlpha,c.globalAlpha=.15,c.strokeStyle="black",c.stroke(),c.globalAlpha=i))):"square"===d?(c.beginPath(),c.rect(a-e/2,b-e/2,e,e),f&&c.fill(),h&&(g?c.stroke():(i=c.globalAlpha,c.globalAlpha=.15,c.strokeStyle="black",c.stroke(),c.globalAlpha=i))):"triangle"===d?(c.beginPath(),c.moveTo(a-e/2,b+e/2),c.lineTo(a+e/2,b+e/2),c.lineTo(a,b-e/2),c.closePath(),f&&c.fill(),h&&(g?c.stroke():(i=c.globalAlpha,c.globalAlpha=.15,c.strokeStyle="black",c.stroke(),c.globalAlpha=i)),c.beginPath()):"cross"===d&&(c.strokeStyle=f,c.lineWidth=e/4,c.beginPath(),c.moveTo(a-e/2,b-e/2),c.lineTo(a+e/2,b+e/2),c.stroke(),c.moveTo(a+e/2,b-e/2),c.lineTo(a-e/2,b+e/2),c.stroke())}},drawMarkers:function(a){for(var b=0;b<a.length;b++){var c=a[b];W.drawMarker(c.x,c.y,c.ctx,c.type,c.size,c.color,c.borderColor,c.borderThickness)}}},X={Chart:function(a,b){var c=new t(a,b,this);this.render=function(){c.render()},this.options=c._options},addColorSet:function(a,b){I[a]=b},addCultureInfo:function(a,b){H[a]=b}};X.Chart.version="1.3.0 GA",window.CanvasJS=X}(),document.createElement("canvas").getContext||function(){function a(){return this.context_||(this.context_=new n(this))}function b(a,b){var c=E.call(arguments,2);return function(){return a.apply(b,c.concat(E.call(arguments)))}}function c(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function d(a){a.namespaces.g_vml_||a.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),a.namespaces.g_o_||a.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),a.styleSheets.ex_canvas_||(a=a.createStyleSheet(),a.owningElement.id="ex_canvas_",a.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}")}function e(a){var b=a.srcElement;switch(a.propertyName){case"width":b.getContext().clearRect(),b.style.width=b.attributes.width.nodeValue+"px",b.firstChild.style.width=b.clientWidth+"px";break;case"height":b.getContext().clearRect(),b.style.height=b.attributes.height.nodeValue+"px",b.firstChild.style.height=b.clientHeight+"px"}}function f(a){a=a.srcElement,a.firstChild&&(a.firstChild.style.width=a.clientWidth+"px",a.firstChild.style.height=a.clientHeight+"px")}function g(){return[[1,0,0],[0,1,0],[0,0,1]]}function h(a,b){for(var c=g(),d=0;3>d;d++)for(var e=0;3>e;e++){for(var f=0,h=0;3>h;h++)f+=a[d][h]*b[h][e];c[d][e]=f}return c}function i(a,b){b.fillStyle=a.fillStyle,b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.lineWidth=a.lineWidth,b.miterLimit=a.miterLimit,b.shadowBlur=a.shadowBlur,b.shadowColor=a.shadowColor,b.shadowOffsetX=a.shadowOffsetX,b.shadowOffsetY=a.shadowOffsetY,b.strokeStyle=a.strokeStyle,b.globalAlpha=a.globalAlpha,b.font=a.font,b.textAlign=a.textAlign,b.textBaseline=a.textBaseline,b.arcScaleX_=a.arcScaleX_,b.arcScaleY_=a.arcScaleY_,b.lineScale_=a.lineScale_}function j(a){var b=a.indexOf("(",3),c=a.indexOf(")",b+1),b=a.substring(b+1,c).split(",");return(4!=b.length||"a"!=a.charAt(3))&&(b[3]=1),b}function k(a,b,c){return Math.min(c,Math.max(b,a))}function l(a,b,c){return 0>c&&c++,c>1&&c--,1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}function m(a){if(a in K)return K[a];var b,c=1;if(a=String(a),"#"==a.charAt(0))b=a;else if(/^rgb/.test(a)){c=j(a),b="#";for(var d,e=0;3>e;e++)d=-1!=c[e].indexOf("%")?Math.floor(255*(parseFloat(c[e])/100)):+c[e],b+=G[k(d,0,255)];c=+c[3]}else if(/^hsl/.test(a)){if(e=c=j(a),b=parseFloat(e[0])/360%360,0>b&&b++,d=k(parseFloat(e[1])/100,0,1),e=k(parseFloat(e[2])/100,0,1),0==d)d=e=b=e;else{var f=.5>e?e*(1+d):e+d-e*d,g=2*e-f;d=l(g,f,b+1/3),e=l(g,f,b),b=l(g,f,b-1/3)}b="#"+G[Math.floor(255*d)]+G[Math.floor(255*e)]+G[Math.floor(255*b)],c=c[3]}else b=J[a]||a;return K[a]={color:b,alpha:c}}function n(a){this.m_=g(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.fillStyle=this.strokeStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*C,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=a;var b="width:"+a.clientWidth+"px;height:"+a.clientHeight+"px;overflow:hidden;position:absolute",c=a.ownerDocument.createElement("div");c.style.cssText=b,a.appendChild(c),b=c.cloneNode(!1),b.style.backgroundColor="red",b.style.filter="alpha(opacity=0)",a.appendChild(b),this.element_=c,this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}function o(a,b,c,d){a.currentPath_.push({type:"bezierCurveTo",cp1x:b.x,cp1y:b.y,cp2x:c.x,cp2y:c.y,x:d.x,y:d.y}),a.currentX_=d.x,a.currentY_=d.y}function p(a,b){var c=m(a.strokeStyle),d=c.color,c=c.alpha*a.globalAlpha,e=a.lineScale_*a.lineWidth;1>e&&(c*=e),b.push("<g_vml_:stroke",' opacity="',c,'"',' joinstyle="',a.lineJoin,'"',' miterlimit="',a.miterLimit,'"',' endcap="',M[a.lineCap]||"square",'"',' weight="',e,'px"',' color="',d,'" />')}function q(a,b,c,d){var e=a.fillStyle,f=a.arcScaleX_,g=a.arcScaleY_,h=d.x-c.x,i=d.y-c.y;if(e instanceof t){var j=0,k=d=0,l=0,n=1;if("gradient"==e.type_){j=e.x1_/f,c=e.y1_/g;var o=r(a,e.x0_/f,e.y0_/g),j=r(a,j,c),j=180*Math.atan2(j.x-o.x,j.y-o.y)/Math.PI;0>j&&(j+=360),1e-6>j&&(j=0)}else o=r(a,e.x0_,e.y0_),d=(o.x-c.x)/h,k=(o.y-c.y)/i,h/=f*C,i/=g*C,n=w.max(h,i),l=2*e.r0_/n,n=2*e.r1_/n-l;f=e.colors_,f.sort(function(a,b){return a.offset-b.offset}),g=f.length,o=f[0].color,c=f[g-1].color,h=f[0].alpha*a.globalAlpha,a=f[g-1].alpha*a.globalAlpha;for(var i=[],p=0;g>p;p++){var q=f[p];i.push(q.offset*n+l+" "+q.color)}b.push('<g_vml_:fill type="',e.type_,'"',' method="none" focus="100%"',' color="',o,'"',' color2="',c,'"',' colors="',i.join(","),'"',' opacity="',a,'"',' g_o_:opacity2="',h,'"',' angle="',j,'"',' focusposition="',d,",",k,'" />')}else e instanceof u?h&&i&&b.push("<g_vml_:fill",' position="',-c.x/h*f*f,",",-c.y/i*g*g,'"',' type="tile"',' src="',e.src_,'" />'):(e=m(a.fillStyle),b.push('<g_vml_:fill color="',e.color,'" opacity="',e.alpha*a.globalAlpha,'" />'))}function r(a,b,c){return a=a.m_,{x:C*(b*a[0][0]+c*a[1][0]+a[2][0])-D,y:C*(b*a[0][1]+c*a[1][1]+a[2][1])-D}}function s(a,b,c){isFinite(b[0][0])&&isFinite(b[0][1])&&isFinite(b[1][0])&&isFinite(b[1][1])&&isFinite(b[2][0])&&isFinite(b[2][1])&&(a.m_=b,c&&(a.lineScale_=B(A(b[0][0]*b[1][1]-b[0][1]*b[1][0]))))}function t(a){this.type_=a,this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0,this.colors_=[]}function u(a,b){if(!a||1!=a.nodeType||"IMG"!=a.tagName)throw new v("TYPE_MISMATCH_ERR");if("complete"!=a.readyState)throw new v("INVALID_STATE_ERR");switch(b){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=b;break;default:throw new v("SYNTAX_ERR")}this.src_=a.src,this.width_=a.width,this.height_=a.height}function v(a){this.code=this[a],this.message=a+": DOM Exception "+this.code}var w=Math,x=w.round,y=w.sin,z=w.cos,A=w.abs,B=w.sqrt,C=10,D=C/2;navigator.userAgent.match(/MSIE ([\d.]+)?/);var E=Array.prototype.slice;d(document);var F={init:function(a){a=a||document,a.createElement("canvas"),a.attachEvent("onreadystatechange",b(this.init_,this,a))},init_:function(a){a=a.getElementsByTagName("canvas");for(var b=0;b<a.length;b++)this.initElement(a[b])},initElement:function(b){if(!b.getContext){b.getContext=a,d(b.ownerDocument),b.innerHTML="",b.attachEvent("onpropertychange",e),b.attachEvent("onresize",f);var c=b.attributes;c.width&&c.width.specified?b.style.width=c.width.nodeValue+"px":b.width=b.clientWidth,c.height&&c.height.specified?b.style.height=c.height.nodeValue+"px":b.height=b.clientHeight}return b}};F.init();for(var G=[],H=0;16>H;H++)for(var I=0;16>I;I++)G[16*H+I]=H.toString(16)+I.toString(16);var J={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},K={},L={},M={butt:"flat",round:"round"},H=n.prototype;
H.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},H.beginPath=function(){this.currentPath_=[]},H.moveTo=function(a,b){var c=r(this,a,b);this.currentPath_.push({type:"moveTo",x:c.x,y:c.y}),this.currentX_=c.x,this.currentY_=c.y},H.lineTo=function(a,b){var c=r(this,a,b);this.currentPath_.push({type:"lineTo",x:c.x,y:c.y}),this.currentX_=c.x,this.currentY_=c.y},H.bezierCurveTo=function(a,b,c,d,e,f){e=r(this,e,f),a=r(this,a,b),c=r(this,c,d),o(this,a,c,e)},H.quadraticCurveTo=function(a,b,c,d){a=r(this,a,b),c=r(this,c,d),d={x:this.currentX_+2/3*(a.x-this.currentX_),y:this.currentY_+2/3*(a.y-this.currentY_)},o(this,d,{x:d.x+(c.x-this.currentX_)/3,y:d.y+(c.y-this.currentY_)/3},c)},H.arc=function(a,b,c,d,e,f){c*=C;var g=f?"at":"wa",h=a+z(d)*c-D,i=b+y(d)*c-D;d=a+z(e)*c-D,e=b+y(e)*c-D,h!=d||f||(h+=.125),a=r(this,a,b),h=r(this,h,i),d=r(this,d,e),this.currentPath_.push({type:g,x:a.x,y:a.y,radius:c,xStart:h.x,yStart:h.y,xEnd:d.x,yEnd:d.y})},H.rect=function(a,b,c,d){this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath()},H.strokeRect=function(a,b,c,d){var e=this.currentPath_;this.beginPath(),this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath(),this.stroke(),this.currentPath_=e},H.fillRect=function(a,b,c,d){var e=this.currentPath_;this.beginPath(),this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath(),this.fill(),this.currentPath_=e},H.createLinearGradient=function(a,b,c,d){var e=new t("gradient");return e.x0_=a,e.y0_=b,e.x1_=c,e.y1_=d,e},H.createRadialGradient=function(a,b,c,d,e,f){var g=new t("gradientradial");return g.x0_=a,g.y0_=b,g.r0_=c,g.x1_=d,g.y1_=e,g.r1_=f,g},H.drawImage=function(a){var b,c,d,e,f,g,h,i;d=a.runtimeStyle.width,e=a.runtimeStyle.height,a.runtimeStyle.width="auto",a.runtimeStyle.height="auto";var j=a.width,k=a.height;if(a.runtimeStyle.width=d,a.runtimeStyle.height=e,3==arguments.length)b=arguments[1],c=arguments[2],f=g=0,h=d=j,i=e=k;else if(5==arguments.length)b=arguments[1],c=arguments[2],d=arguments[3],e=arguments[4],f=g=0,h=j,i=k;else{if(9!=arguments.length)throw Error("Invalid number of arguments");f=arguments[1],g=arguments[2],h=arguments[3],i=arguments[4],b=arguments[5],c=arguments[6],d=arguments[7],e=arguments[8]}var l=r(this,b,c),m=[];if(m.push(" <g_vml_:group",' coordsize="',10*C,",",10*C,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;"),1!=this.m_[0][0]||this.m_[0][1]||1!=this.m_[1][1]||this.m_[1][0]){var n=[];n.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",x(l.x/C),",","Dy=",x(l.y/C),"");var o=r(this,b+d,c),p=r(this,b,c+e);b=r(this,b+d,c+e),l.x=w.max(l.x,o.x,p.x,b.x),l.y=w.max(l.y,o.y,p.y,b.y),m.push("padding:0 ",x(l.x/C),"px ",x(l.y/C),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",n.join(""),", sizingmethod='clip');")}else m.push("top:",x(l.y/C),"px;left:",x(l.x/C),"px;");m.push(' ">','<g_vml_:image src="',a.src,'"',' style="width:',C*d,"px;"," height:",C*e,'px"',' cropleft="',f/j,'"',' croptop="',g/k,'"',' cropright="',(j-f-h)/j,'"',' cropbottom="',(k-g-i)/k,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",m.join(""))},H.stroke=function(a){var b=[];b.push("<g_vml_:shape",' filled="',!!a,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0,0"',' coordsize="',10*C,",",10*C,'"',' stroked="',!a,'"',' path="');for(var c={x:null,y:null},d={x:null,y:null},e=0;e<this.currentPath_.length;e++){var f=this.currentPath_[e];switch(f.type){case"moveTo":b.push(" m ",x(f.x),",",x(f.y));break;case"lineTo":b.push(" l ",x(f.x),",",x(f.y));break;case"close":b.push(" x "),f=null;break;case"bezierCurveTo":b.push(" c ",x(f.cp1x),",",x(f.cp1y),",",x(f.cp2x),",",x(f.cp2y),",",x(f.x),",",x(f.y));break;case"at":case"wa":b.push(" ",f.type," ",x(f.x-this.arcScaleX_*f.radius),",",x(f.y-this.arcScaleY_*f.radius)," ",x(f.x+this.arcScaleX_*f.radius),",",x(f.y+this.arcScaleY_*f.radius)," ",x(f.xStart),",",x(f.yStart)," ",x(f.xEnd),",",x(f.yEnd))}f&&((null==c.x||f.x<c.x)&&(c.x=f.x),(null==d.x||f.x>d.x)&&(d.x=f.x),(null==c.y||f.y<c.y)&&(c.y=f.y),(null==d.y||f.y>d.y)&&(d.y=f.y))}b.push(' ">'),a?q(this,b,c,d):p(this,b),b.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",b.join(""))},H.fill=function(){this.stroke(!0)},H.closePath=function(){this.currentPath_.push({type:"close"})},H.save=function(){var a={};i(this,a),this.aStack_.push(a),this.mStack_.push(this.m_),this.m_=h(g(),this.m_)},H.restore=function(){this.aStack_.length&&(i(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},H.translate=function(a,b){s(this,h([[1,0,0],[0,1,0],[a,b,1]],this.m_),!1)},H.rotate=function(a){var b=z(a);a=y(a),s(this,h([[b,a,0],[-a,b,0],[0,0,1]],this.m_),!1)},H.scale=function(a,b){this.arcScaleX_*=a,this.arcScaleY_*=b,s(this,h([[a,0,0],[0,b,0],[0,0,1]],this.m_),!0)},H.transform=function(a,b,c,d,e,f){s(this,h([[a,b,0],[c,d,0],[e,f,1]],this.m_),!0)},H.setTransform=function(a,b,c,d,e,f){s(this,[[a,b,0],[c,d,0],[e,f,1]],!0)},H.drawText_=function(a,b,d,e,f){var g=this.m_;e=0;var h,i=1e3,j=0,k=[];if(h=this.font,L[h])h=L[h];else{var l=document.createElement("div").style;try{l.font=h}catch(m){}h=L[h]={style:l.fontStyle||"normal",variant:l.fontVariant||"normal",weight:l.fontWeight||"normal",size:l.fontSize||10,family:l.fontFamily||"sans-serif"}}var l=h,n=this.element_;h={};for(var o in l)h[o]=l[o];switch(o=parseFloat(n.currentStyle.fontSize),n=parseFloat(l.size),h.size="number"==typeof l.size?l.size:-1!=l.size.indexOf("px")?n:-1!=l.size.indexOf("em")?o*n:-1!=l.size.indexOf("%")?o/100*n:-1!=l.size.indexOf("pt")?n/.75:o,h.size*=.981,o=h.style+" "+h.variant+" "+h.weight+" "+h.size+"px "+h.family,n=this.element_.currentStyle,l=this.textAlign.toLowerCase()){case"left":case"center":case"right":break;case"end":l="ltr"==n.direction?"right":"left";break;case"start":l="rtl"==n.direction?"right":"left";break;default:l="left"}switch(this.textBaseline){case"hanging":case"top":j=h.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":j=-h.size/2.25}switch(l){case"right":e=1e3,i=.05;break;case"center":e=i=500}b=r(this,b+0,d+j),k.push('<g_vml_:line from="',-e,' 0" to="',i,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!f,'" stroked="',!!f,'" style="position:absolute;width:1px;height:1px;">'),f?p(this,k):q(this,k,{x:-e,y:0},{x:i,y:h.size}),f=g[0][0].toFixed(3)+","+g[1][0].toFixed(3)+","+g[0][1].toFixed(3)+","+g[1][1].toFixed(3)+",0,0",b=x(b.x/C)+","+x(b.y/C),k.push('<g_vml_:skew on="t" matrix="',f,'" ',' offset="',b,'" origin="',e,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',c(a),'" style="v-text-align:',l,";font:",c(o),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",k.join(""))},H.fillText=function(a,b,c,d){this.drawText_(a,b,c,d,!1)},H.strokeText=function(a,b,c,d){this.drawText_(a,b,c,d,!0)},H.measureText=function(a){this.textMeasureEl_||(this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'),this.textMeasureEl_=this.element_.lastChild);var b=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(b.createTextNode(a)),{width:this.textMeasureEl_.offsetWidth}},H.clip=function(){},H.arcTo=function(){},H.createPattern=function(a,b){return new u(a,b)},t.prototype.addColorStop=function(a,b){b=m(b),this.colors_.push({offset:a,color:b.color,alpha:b.alpha})},H=v.prototype=Error(),H.INDEX_SIZE_ERR=1,H.DOMSTRING_SIZE_ERR=2,H.HIERARCHY_REQUEST_ERR=3,H.WRONG_DOCUMENT_ERR=4,H.INVALID_CHARACTER_ERR=5,H.NO_DATA_ALLOWED_ERR=6,H.NO_MODIFICATION_ALLOWED_ERR=7,H.NOT_FOUND_ERR=8,H.NOT_SUPPORTED_ERR=9,H.INUSE_ATTRIBUTE_ERR=10,H.INVALID_STATE_ERR=11,H.SYNTAX_ERR=12,H.INVALID_MODIFICATION_ERR=13,H.NAMESPACE_ERR=14,H.INVALID_ACCESS_ERR=15,H.VALIDATION_ERR=16,H.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=F,CanvasRenderingContext2D=n,CanvasGradient=t,CanvasPattern=u,DOMException=v}(),function(a,b){"function"==typeof define&&define.amd?define("sifter",b):"object"==typeof exports?module.exports=b():a.Sifter=b()}(this,function(){var a=function(a,b){this.items=a,this.settings=b||{diacritics:!0}};a.prototype.tokenize=function(a){if(a=d(String(a||"").toLowerCase()),!a||!a.length)return[];var b,c,f,h,i=[],j=a.split(/ +/);for(b=0,c=j.length;c>b;b++){if(f=e(j[b]),this.settings.diacritics)for(h in g)g.hasOwnProperty(h)&&(f=f.replace(new RegExp(h,"g"),g[h]));i.push({string:j[b],regex:new RegExp(f,"i")})}return i},a.prototype.iterator=function(a,b){var c;c=f(a)?Array.prototype.forEach||function(a){for(var b=0,c=this.length;c>b;b++)a(this[b],b,this)}:function(a){for(var b in this)this.hasOwnProperty(b)&&a(this[b],b,this)},c.apply(a,[b])},a.prototype.getScoreFunction=function(a,b){var c,d,e,f;c=this,a=c.prepareSearch(a,b),e=a.tokens,d=a.options.fields,f=e.length;var g=function(a,b){var c,d;return a?(a=String(a||""),d=a.search(b.regex),-1===d?0:(c=b.string.length/a.length,0===d&&(c+=.5),c)):0},h=function(){var a=d.length;return a?1===a?function(a,b){return g(b[d[0]],a)}:function(b,c){for(var e=0,f=0;a>e;e++)f+=g(c[d[e]],b);return f/a}:function(){return 0}}();return f?1===f?function(a){return h(e[0],a)}:"and"===a.options.conjunction?function(a){for(var b,c=0,d=0;f>c;c++){if(b=h(e[c],a),0>=b)return 0;d+=b}return d/f}:function(a){for(var b=0,c=0;f>b;b++)c+=h(e[b],a);return c/f}:function(){return 0}},a.prototype.getSortFunction=function(a,c){var d,e,f,g,h,i,j,k,l,m,n;if(f=this,a=f.prepareSearch(a,c),n=!a.query&&c.sort_empty||c.sort,l=function(a,b){return"$score"===a?b.score:f.items[b.id][a]},h=[],n)for(d=0,e=n.length;e>d;d++)(a.query||"$score"!==n[d].field)&&h.push(n[d]);if(a.query){for(m=!0,d=0,e=h.length;e>d;d++)if("$score"===h[d].field){m=!1;break}m&&h.unshift({field:"$score",direction:"desc"})}else for(d=0,e=h.length;e>d;d++)if("$score"===h[d].field){h.splice(d,1);break}for(k=[],d=0,e=h.length;e>d;d++)k.push("desc"===h[d].direction?-1:1);return i=h.length,i?1===i?(g=h[0].field,j=k[0],function(a,c){return j*b(l(g,a),l(g,c))}):function(a,c){var d,e,f;for(d=0;i>d;d++)if(f=h[d].field,e=k[d]*b(l(f,a),l(f,c)))return e;return 0}:null},a.prototype.prepareSearch=function(a,b){if("object"==typeof a)return a;b=c({},b);var d=b.fields,e=b.sort,g=b.sort_empty;return d&&!f(d)&&(b.fields=[d]),e&&!f(e)&&(b.sort=[e]),g&&!f(g)&&(b.sort_empty=[g]),{options:b,query:String(a||"").toLowerCase(),tokens:this.tokenize(a),total:0,items:[]}},a.prototype.search=function(a,b){var c,d,e,f,g=this;return d=this.prepareSearch(a,b),b=d.options,a=d.query,f=b.score||g.getScoreFunction(d),a.length?g.iterator(g.items,function(a,e){c=f(a),(b.filter===!1||c>0)&&d.items.push({score:c,id:e})}):g.iterator(g.items,function(a,b){d.items.push({score:1,id:b})}),e=g.getSortFunction(d,b),e&&d.items.sort(e),d.total=d.items.length,"number"==typeof b.limit&&(d.items=d.items.slice(0,b.limit)),d};var b=function(a,b){return"number"==typeof a&&"number"==typeof b?a>b?1:b>a?-1:0:(a=String(a||"").toLowerCase(),b=String(b||"").toLowerCase(),a>b?1:b>a?-1:0)},c=function(a){var b,c,d,e;for(b=1,c=arguments.length;c>b;b++)if(e=arguments[b])for(d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);return a},d=function(a){return(a+"").replace(/^\s+|\s+$|/g,"")},e=function(a){return(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},f=Array.isArray||$&&$.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g={a:"[aÃ€ÃÃ‚ÃƒÃ„Ã…Ã Ã¡Ã¢Ã£Ã¤Ã¥Ä€Ä]",c:"[cÃ‡Ã§Ä‡Ä†ÄÄŒ]",d:"[dÄ‘ÄÄÄŽ]",e:"[eÃˆÃ‰ÃŠÃ‹Ã¨Ã©ÃªÃ«Ä›ÄšÄ’Ä“]",i:"[iÃŒÃÃŽÃÃ¬Ã­Ã®Ã¯ÄªÄ«]",n:"[nÃ‘Ã±ÅˆÅ‡]",o:"[oÃ’Ã“Ã”Ã•Ã•Ã–Ã˜Ã²Ã³Ã´ÃµÃ¶Ã¸ÅŒÅ]",r:"[rÅ™Å˜]",s:"[sÅ Å¡]",t:"[tÅ¥Å¤]",u:"[uÃ™ÃšÃ›ÃœÃ¹ÃºÃ»Ã¼Å¯Å®ÅªÅ«]",y:"[yÅ¸Ã¿Ã½Ã]",z:"[zÅ½Å¾]"};return a}),function(a,b){"function"==typeof define&&define.amd?define("microplugin",b):"object"==typeof exports?module.exports=b():a.MicroPlugin=b()}(this,function(){var a={};a.mixin=function(a){a.plugins={},a.prototype.initializePlugins=function(a){var c,d,e,f=this,g=[];if(f.plugins={names:[],settings:{},requested:{},loaded:{}},b.isArray(a))for(c=0,d=a.length;d>c;c++)"string"==typeof a[c]?g.push(a[c]):(f.plugins.settings[a[c].name]=a[c].options,g.push(a[c].name));else if(a)for(e in a)a.hasOwnProperty(e)&&(f.plugins.settings[e]=a[e],g.push(e));for(;g.length;)f.require(g.shift())},a.prototype.loadPlugin=function(b){var c=this,d=c.plugins,e=a.plugins[b];if(!a.plugins.hasOwnProperty(b))throw new Error('Unable to find "'+b+'" plugin');d.requested[b]=!0,d.loaded[b]=e.fn.apply(c,[c.plugins.settings[b]||{}]),d.names.push(b)},a.prototype.require=function(a){var b=this,c=b.plugins;if(!b.plugins.loaded.hasOwnProperty(a)){if(c.requested[a])throw new Error('Plugin has circular dependency ("'+a+'")');b.loadPlugin(a)}return c.loaded[a]},a.define=function(b,c){a.plugins[b]={name:b,fn:c}}};var b={isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}};return a}),function(a,b){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("sifter"),require("microplugin")):a.Selectize=b(a.jQuery,a.Sifter,a.MicroPlugin)}(this,function(a,b,c){"use strict";var d=function(a,b){if("string"!=typeof b||b.length){var c="string"==typeof b?new RegExp(b,"i"):b,d=function(a){var b=0;if(3===a.nodeType){var e=a.data.search(c);if(e>=0&&a.data.length>0){var f=a.data.match(c),g=document.createElement("span");g.className="highlight";var h=a.splitText(e),i=(h.splitText(f[0].length),h.cloneNode(!0));g.appendChild(i),h.parentNode.replaceChild(g,h),b=1}}else if(1===a.nodeType&&a.childNodes&&!/(script|style)/i.test(a.tagName))for(var j=0;j<a.childNodes.length;++j)j+=d(a.childNodes[j]);return b};return a.each(function(){d(this)})}},e=function(){};e.prototype={on:function(a,b){this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)},off:function(a,b){var c=arguments.length;return 0===c?delete this._events:1===c?delete this._events[a]:(this._events=this._events||{},void(a in this._events!=!1&&this._events[a].splice(this._events[a].indexOf(b),1)))},trigger:function(a){if(this._events=this._events||{},a in this._events!=!1)for(var b=0;b<this._events[a].length;b++)this._events[a][b].apply(this,Array.prototype.slice.call(arguments,1))}},e.mixin=function(a){for(var b=["on","off","trigger"],c=0;c<b.length;c++)a.prototype[b[c]]=e.prototype[b[c]]};var f=/Mac/.test(navigator.userAgent),g=65,h=13,i=27,j=37,k=38,l=80,m=39,n=40,o=78,p=8,q=46,r=16,s=f?91:17,t=f?18:17,u=9,v=1,w=2,x=function(a){return"undefined"!=typeof a},y=function(a){return"undefined"==typeof a||null===a?null:"boolean"==typeof a?a?"1":"0":a+""},z=function(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},A=function(a){return(a+"").replace(/\$/g,"$$$$")},B={};B.before=function(a,b,c){var d=a[b];a[b]=function(){return c.apply(a,arguments),d.apply(a,arguments)}},B.after=function(a,b,c){var d=a[b];a[b]=function(){var b=d.apply(a,arguments);return c.apply(a,arguments),b}};var C=function(b,c){if(!a.isArray(c))return c;var d,e,f={};for(d=0,e=c.length;e>d;d++)c[d].hasOwnProperty(b)&&(f[c[d][b]]=c[d]);return f},D=function(a){var b=!1;return function(){b||(b=!0,a.apply(this,arguments))}},E=function(a,b){var c;return function(){var d=this,e=arguments;window.clearTimeout(c),c=window.setTimeout(function(){a.apply(d,e)},b)}},F=function(a,b,c){var d,e=a.trigger,f={};a.trigger=function(){var c=arguments[0];return-1===b.indexOf(c)?e.apply(a,arguments):void(f[c]=arguments)},c.apply(a,[]),a.trigger=e;for(d in f)f.hasOwnProperty(d)&&e.apply(a,f[d])},G=function(a,b,c,d){a.on(b,c,function(b){for(var c=b.target;c&&c.parentNode!==a[0];)c=c.parentNode;return b.currentTarget=c,d.apply(this,[b])})},H=function(a){var b={};if("selectionStart"in a)b.start=a.selectionStart,b.length=a.selectionEnd-b.start;else if(document.selection){a.focus();var c=document.selection.createRange(),d=document.selection.createRange().text.length;c.moveStart("character",-a.value.length),b.start=c.text.length-d,b.length=d}return b},I=function(a,b,c){var d,e,f={};if(c)for(d=0,e=c.length;e>d;d++)f[c[d]]=a.css(c[d]);else f=a.css();b.css(f)},J=function(b,c){if(!b)return 0;var d=a("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(b).appendTo("body");I(c,d,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var e=d.width();return d.remove(),e},K=function(a){var b=null,c=function(c,d){var e,f,g,h,i,j,k,l;c=c||window.event||{},d=d||{},c.metaKey||c.altKey||(d.force||a.data("grow")!==!1)&&(e=a.val(),c.type&&"keydown"===c.type.toLowerCase()&&(f=c.keyCode,g=f>=97&&122>=f||f>=65&&90>=f||f>=48&&57>=f||32===f,f===q||f===p?(l=H(a[0]),l.length?e=e.substring(0,l.start)+e.substring(l.start+l.length):f===p&&l.start?e=e.substring(0,l.start-1)+e.substring(l.start+1):f===q&&"undefined"!=typeof l.start&&(e=e.substring(0,l.start)+e.substring(l.start+1))):g&&(j=c.shiftKey,k=String.fromCharCode(c.keyCode),k=j?k.toUpperCase():k.toLowerCase(),e+=k)),h=a.attr("placeholder"),!e&&h&&(e=h),i=J(e,a)+4,i!==b&&(b=i,a.width(i),a.triggerHandler("resize")))};a.on("keydown keyup update blur",c),c()},L=function(c,d){var e,f,g=this;f=c[0],f.selectize=g;var h=window.getComputedStyle&&window.getComputedStyle(f,null);e=h?h.getPropertyValue("direction"):f.currentStyle&&f.currentStyle.direction,e=e||c.parents("[dir]:first").attr("dir")||"",a.extend(g,{settings:d,$input:c,tagType:"select"===f.tagName.toLowerCase()?v:w,rtl:/rtl/i.test(e),eventNS:".selectize"+ ++L.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:c.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===d.loadThrottle?g.onSearchChange:E(g.onSearchChange,d.loadThrottle)}),g.sifter=new b(this.options,{diacritics:d.diacritics}),a.extend(g.options,C(d.valueField,d.options)),delete g.settings.options,a.extend(g.optgroups,C(d.optgroupValueField,d.optgroups)),delete g.settings.optgroups,g.settings.mode=g.settings.mode||(1===g.settings.maxItems?"single":"multi"),"boolean"!=typeof g.settings.hideSelected&&(g.settings.hideSelected="multi"===g.settings.mode),g.initializePlugins(g.settings.plugins),g.setupCallbacks(),g.setupTemplates(),g.setup()};return e.mixin(L),c.mixin(L),a.extend(L.prototype,{setup:function(){var b,c,d,e,g,h,i,j,k,l,m=this,n=m.settings,o=m.eventNS,p=a(window),q=a(document),u=m.$input;i=m.settings.mode,j=u.attr("tabindex")||"",k=u.attr("class")||"",b=a("<div>").addClass(n.wrapperClass).addClass(k).addClass(i),c=a("<div>").addClass(n.inputClass).addClass("items").appendTo(b),d=a('<input type="text" autocomplete="off" />').appendTo(c).attr("tabindex",j),h=a(n.dropdownParent||b),e=a("<div>").addClass(n.dropdownClass).addClass(i).hide().appendTo(h),g=a("<div>").addClass(n.dropdownContentClass).appendTo(e),m.settings.copyClassesToDropdown&&e.addClass(k),b.css({width:u[0].style.width}),m.plugins.names.length&&(l="plugin-"+m.plugins.names.join(" plugin-"),b.addClass(l),e.addClass(l)),(null===n.maxItems||n.maxItems>1)&&m.tagType===v&&u.attr("multiple","multiple"),m.settings.placeholder&&d.attr("placeholder",n.placeholder),u.attr("autocorrect")&&d.attr("autocorrect",u.attr("autocorrect")),u.attr("autocapitalize")&&d.attr("autocapitalize",u.attr("autocapitalize")),m.$wrapper=b,m.$control=c,m.$control_input=d,m.$dropdown=e,m.$dropdown_content=g,e.on("mouseenter","[data-selectable]",function(){return m.onOptionHover.apply(m,arguments)}),e.on("mousedown","[data-selectable]",function(){return m.onOptionSelect.apply(m,arguments)}),G(c,"mousedown","*:not(input)",function(){return m.onItemSelect.apply(m,arguments)}),K(d),c.on({mousedown:function(){return m.onMouseDown.apply(m,arguments)},click:function(){return m.onClick.apply(m,arguments)}}),d.on({mousedown:function(a){a.stopPropagation()},keydown:function(){return m.onKeyDown.apply(m,arguments)},keyup:function(){return m.onKeyUp.apply(m,arguments)},keypress:function(){return m.onKeyPress.apply(m,arguments)},resize:function(){m.positionDropdown.apply(m,[])},blur:function(){return m.onBlur.apply(m,arguments)},focus:function(){return m.ignoreBlur=!1,m.onFocus.apply(m,arguments)},paste:function(){return m.onPaste.apply(m,arguments)}}),q.on("keydown"+o,function(a){m.isCmdDown=a[f?"metaKey":"ctrlKey"],m.isCtrlDown=a[f?"altKey":"ctrlKey"],m.isShiftDown=a.shiftKey}),q.on("keyup"+o,function(a){a.keyCode===t&&(m.isCtrlDown=!1),a.keyCode===r&&(m.isShiftDown=!1),a.keyCode===s&&(m.isCmdDown=!1)}),q.on("mousedown"+o,function(a){if(m.isFocused){if(a.target===m.$dropdown[0]||a.target.parentNode===m.$dropdown[0])return!1;m.$control.has(a.target).length||a.target===m.$control[0]||m.blur()}}),p.on(["scroll"+o,"resize"+o].join(" "),function(){m.isOpen&&m.positionDropdown.apply(m,arguments)}),p.on("mousemove"+o,function(){m.ignoreHover=!1}),this.revertSettings={$children:u.children().detach(),tabindex:u.attr("tabindex")},u.attr("tabindex",-1).hide().after(m.$wrapper),a.isArray(n.items)&&(m.setValue(n.items),delete n.items),u[0].validity&&u.on("invalid"+o,function(a){a.preventDefault(),m.isInvalid=!0,m.refreshState()}),m.updateOriginalInput(),m.refreshItems(),m.refreshState(),m.updatePlaceholder(),m.isSetup=!0,u.is(":disabled")&&m.disable(),m.on("change",this.onChange),u.data("selectize",m),u.addClass("selectized"),m.trigger("initialize"),n.preload===!0&&m.onSearchChange("")},setupTemplates:function(){var b=this,c=b.settings.labelField,d=b.settings.optgroupLabelField,e={optgroup:function(a){return'<div class="optgroup">'+a.html+"</div>"},optgroup_header:function(a,b){return'<div class="optgroup-header">'+b(a[d])+"</div>"},option:function(a,b){return'<div class="option">'+b(a[c])+"</div>"},item:function(a,b){return'<div class="item">'+b(a[c])+"</div>"},option_create:function(a,b){return'<div class="create">Add <strong>'+b(a.input)+"</strong>&hellip;</div>"}};b.settings.render=a.extend({},e,b.settings.render)},setupCallbacks:function(){var a,b,c={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad"};for(a in c)c.hasOwnProperty(a)&&(b=this.settings[c[a]],b&&this.on(a,b))},onClick:function(a){var b=this;b.isFocused||(b.focus(),a.preventDefault())},onMouseDown:function(b){{var c=this,d=b.isDefaultPrevented();a(b.target)}if(c.isFocused){if(b.target!==c.$control_input[0])return"single"===c.settings.mode?c.isOpen?c.close():c.open():d||c.setActiveItem(null),!1}else d||window.setTimeout(function(){c.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(a){var b=this;(b.isFull()||b.isInputHidden||b.isLocked)&&a.preventDefault()},onKeyPress:function(a){if(this.isLocked)return a&&a.preventDefault();var b=String.fromCharCode(a.keyCode||a.which);return this.settings.create&&b===this.settings.delimiter?(this.createItem(),a.preventDefault(),!1):void 0},onKeyDown:function(a){var b=(a.target===this.$control_input[0],this);if(b.isLocked)return void(a.keyCode!==u&&a.preventDefault());switch(a.keyCode){case g:if(b.isCmdDown)return void b.selectAll();break;case i:return void b.close();case o:if(!a.ctrlKey||a.altKey)break;case n:if(!b.isOpen&&b.hasOptions)b.open();else if(b.$activeOption){b.ignoreHover=!0;var c=b.getAdjacentOption(b.$activeOption,1);c.length&&b.setActiveOption(c,!0,!0)}return void a.preventDefault();case l:if(!a.ctrlKey||a.altKey)break;case k:if(b.$activeOption){b.ignoreHover=!0;var d=b.getAdjacentOption(b.$activeOption,-1);d.length&&b.setActiveOption(d,!0,!0)}return void a.preventDefault();case h:return b.isOpen&&b.$activeOption&&b.onOptionSelect({currentTarget:b.$activeOption}),void a.preventDefault();case j:return void b.advanceSelection(-1,a);case m:return void b.advanceSelection(1,a);case u:return b.settings.selectOnTab&&b.isOpen&&b.$activeOption&&(b.onOptionSelect({currentTarget:b.$activeOption}),a.preventDefault()),void(b.settings.create&&b.createItem()&&a.preventDefault());case p:case q:return void b.deleteSelection(a)}return!b.isFull()&&!b.isInputHidden||(f?a.metaKey:a.ctrlKey)?void 0:void a.preventDefault()},onKeyUp:function(a){var b=this;if(b.isLocked)return a&&a.preventDefault();var c=b.$control_input.val()||"";b.lastValue!==c&&(b.lastValue=c,b.onSearchChange(c),b.refreshOptions(),b.trigger("type",c))},onSearchChange:function(a){var b=this,c=b.settings.load;c&&(b.loadedSearches.hasOwnProperty(a)||(b.loadedSearches[a]=!0,b.load(function(d){c.apply(b,[a,d])})))},onFocus:function(a){var b=this;return b.isFocused=!0,b.isDisabled?(b.blur(),a&&a.preventDefault(),!1):void(b.ignoreFocus||("focus"===b.settings.preload&&b.onSearchChange(""),b.$activeItems.length||(b.showInput(),b.setActiveItem(null),b.refreshOptions(!!b.settings.openOnFocus)),b.refreshState()))},onBlur:function(a){var b=this;if(b.isFocused=!1,!b.ignoreFocus){if(!b.ignoreBlur&&document.activeElement===b.$dropdown_content[0])return b.ignoreBlur=!0,void b.onFocus(a);b.settings.create&&b.settings.createOnBlur&&b.createItem(!1),b.close(),b.setTextboxValue(""),b.setActiveItem(null),b.setActiveOption(null),b.setCaret(b.items.length),b.refreshState()}},onOptionHover:function(a){this.ignoreHover||this.setActiveOption(a.currentTarget,!1)},onOptionSelect:function(b){var c,d,e=this;b.preventDefault&&(b.preventDefault(),b.stopPropagation()),d=a(b.currentTarget),d.hasClass("create")?e.createItem():(c=d.attr("data-value"),"undefined"!=typeof c&&(e.lastQuery=null,e.setTextboxValue(""),e.addItem(c),!e.settings.hideSelected&&b.type&&/mouse/.test(b.type)&&e.setActiveOption(e.getOption(c))))},onItemSelect:function(a){var b=this;b.isLocked||"multi"===b.settings.mode&&(a.preventDefault(),b.setActiveItem(a.currentTarget,a))},load:function(a){var b=this,c=b.$wrapper.addClass("loading");b.loading++,a.apply(b,[function(a){b.loading=Math.max(b.loading-1,0),a&&a.length&&(b.addOption(a),b.refreshOptions(b.isFocused&&!b.isInputHidden)),b.loading||c.removeClass("loading"),b.trigger("load",a)}])},setTextboxValue:function(a){var b=this.$control_input,c=b.val()!==a;c&&(b.val(a).triggerHandler("update"),this.lastValue=a)},getValue:function(){return this.tagType===v&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(a){F(this,["change"],function(){this.clear(),this.addItems(a)})},setActiveItem:function(b,c){var d,e,f,g,h,i,j,k,l=this;if("single"!==l.settings.mode){if(b=a(b),!b.length)return a(l.$activeItems).removeClass("active"),l.$activeItems=[],void(l.isFocused&&l.showInput());if(d=c&&c.type.toLowerCase(),"mousedown"===d&&l.isShiftDown&&l.$activeItems.length){for(k=l.$control.children(".active:last"),g=Array.prototype.indexOf.apply(l.$control[0].childNodes,[k[0]]),h=Array.prototype.indexOf.apply(l.$control[0].childNodes,[b[0]]),g>h&&(j=g,g=h,h=j),e=g;h>=e;e++)i=l.$control[0].childNodes[e],-1===l.$activeItems.indexOf(i)&&(a(i).addClass("active"),l.$activeItems.push(i));c.preventDefault()}else"mousedown"===d&&l.isCtrlDown||"keydown"===d&&this.isShiftDown?b.hasClass("active")?(f=l.$activeItems.indexOf(b[0]),l.$activeItems.splice(f,1),b.removeClass("active")):l.$activeItems.push(b.addClass("active")[0]):(a(l.$activeItems).removeClass("active"),l.$activeItems=[b.addClass("active")[0]]);l.hideInput(),this.isFocused||l.focus()}},setActiveOption:function(b,c,d){var e,f,g,h,i,j=this;j.$activeOption&&j.$activeOption.removeClass("active"),j.$activeOption=null,b=a(b),b.length&&(j.$activeOption=b.addClass("active"),(c||!x(c))&&(e=j.$dropdown_content.height(),f=j.$activeOption.outerHeight(!0),c=j.$dropdown_content.scrollTop()||0,g=j.$activeOption.offset().top-j.$dropdown_content.offset().top+c,h=g,i=g-e+f,g+f>e+c?j.$dropdown_content.stop().animate({scrollTop:i},d?j.settings.scrollDuration:0):c>g&&j.$dropdown_content.stop().animate({scrollTop:h},d?j.settings.scrollDuration:0)))},selectAll:function(){var a=this;"single"!==a.settings.mode&&(a.$activeItems=Array.prototype.slice.apply(a.$control.children(":not(input)").addClass("active")),a.$activeItems.length&&(a.hideInput(),a.close()),a.focus())},hideInput:function(){var a=this;a.setTextboxValue(""),a.$control_input.css({opacity:0,position:"absolute",left:a.rtl?1e4:-1e4}),a.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var a=this;a.isDisabled||(a.ignoreFocus=!0,a.$control_input[0].focus(),window.setTimeout(function(){a.ignoreFocus=!1,a.onFocus()},0))},blur:function(){this.$control_input.trigger("blur")},getScoreFunction:function(a){return this.sifter.getScoreFunction(a,this.getSearchOptions())},getSearchOptions:function(){var a=this.settings,b=a.sortField;return"string"==typeof b&&(b={field:b}),{fields:a.searchField,conjunction:a.searchConjunction,sort:b}},search:function(b){var c,d,e,f=this,g=f.settings,h=this.getSearchOptions();if(g.score&&(e=f.settings.score.apply(this,[b]),"function"!=typeof e))throw new Error('Selectize "score" setting must be a function that returns a function');if(b!==f.lastQuery?(f.lastQuery=b,d=f.sifter.search(b,a.extend(h,{score:e})),f.currentResults=d):d=a.extend(!0,{},f.currentResults),g.hideSelected)for(c=d.items.length-1;c>=0;c--)-1!==f.items.indexOf(y(d.items[c].id))&&d.items.splice(c,1);return d},refreshOptions:function(b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;"undefined"==typeof b&&(b=!0);var t=this,u=a.trim(t.$control_input.val()),v=t.search(u),w=t.$dropdown_content,x=t.$activeOption&&y(t.$activeOption.attr("data-value"));if(g=v.items.length,"number"==typeof t.settings.maxOptions&&(g=Math.min(g,t.settings.maxOptions)),h={},t.settings.optgroupOrder)for(i=t.settings.optgroupOrder,c=0;c<i.length;c++)h[i[c]]=[];else i=[];for(c=0;g>c;c++)for(j=t.options[v.items[c].id],k=t.render("option",j),l=j[t.settings.optgroupField]||"",m=a.isArray(l)?l:[l],e=0,f=m&&m.length;f>e;e++)l=m[e],t.optgroups.hasOwnProperty(l)||(l=""),h.hasOwnProperty(l)||(h[l]=[],i.push(l)),h[l].push(k);for(n=[],c=0,g=i.length;g>c;c++)l=i[c],t.optgroups.hasOwnProperty(l)&&h[l].length?(o=t.render("optgroup_header",t.optgroups[l])||"",o+=h[l].join(""),n.push(t.render("optgroup",a.extend({},t.optgroups[l],{html:o})))):n.push(h[l].join(""));if(w.html(n.join("")),t.settings.highlight&&v.query.length&&v.tokens.length)for(c=0,g=v.tokens.length;g>c;c++)d(w,v.tokens[c].regex);if(!t.settings.hideSelected)for(c=0,g=t.items.length;g>c;c++)t.getOption(t.items[c]).addClass("selected");p=t.canCreate(u),p&&(w.prepend(t.render("option_create",{input:u})),s=a(w[0].childNodes[0])),t.hasOptions=v.items.length>0||p,t.hasOptions?(v.items.length>0?(r=x&&t.getOption(x),r&&r.length?q=r:"single"===t.settings.mode&&t.items.length&&(q=t.getOption(t.items[0])),q&&q.length||(q=s&&!t.settings.addPrecedence?t.getAdjacentOption(s,1):w.find("[data-selectable]:first"))):q=s,t.setActiveOption(q),b&&!t.isOpen&&t.open()):(t.setActiveOption(null),b&&t.isOpen&&t.close())},addOption:function(b){var c,d,e,f=this;if(a.isArray(b))for(c=0,d=b.length;d>c;c++)f.addOption(b[c]);else e=y(b[f.settings.valueField]),"string"!=typeof e||f.options.hasOwnProperty(e)||(f.userOptions[e]=!0,f.options[e]=b,f.lastQuery=null,f.trigger("option_add",e,b))},addOptionGroup:function(a,b){this.optgroups[a]=b,this.trigger("optgroup_add",a,b)},updateOption:function(b,c){var d,e,f,g,h,i,j=this;if(b=y(b),f=y(c[j.settings.valueField]),null!==b&&j.options.hasOwnProperty(b)){if("string"!=typeof f)throw new Error("Value must be set in option data");f!==b&&(delete j.options[b],g=j.items.indexOf(b),-1!==g&&j.items.splice(g,1,f)),j.options[f]=c,h=j.renderCache.item,i=j.renderCache.option,h&&(delete h[b],delete h[f]),i&&(delete i[b],delete i[f]),-1!==j.items.indexOf(f)&&(d=j.getItem(b),e=a(j.render("item",c)),d.hasClass("active")&&e.addClass("active"),d.replaceWith(e)),j.lastQuery=null,j.isOpen&&j.refreshOptions(!1)
}},removeOption:function(a){var b=this;a=y(a);var c=b.renderCache.item,d=b.renderCache.option;c&&delete c[a],d&&delete d[a],delete b.userOptions[a],delete b.options[a],b.lastQuery=null,b.trigger("option_remove",a),b.removeItem(a)},clearOptions:function(){var a=this;a.loadedSearches={},a.userOptions={},a.renderCache={},a.options=a.sifter.items={},a.lastQuery=null,a.trigger("option_clear"),a.clear()},getOption:function(a){return this.getElementWithValue(a,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(b,c){var d=this.$dropdown.find("[data-selectable]"),e=d.index(b)+c;return e>=0&&e<d.length?d.eq(e):a()},getElementWithValue:function(b,c){if(b=y(b),"undefined"!=typeof b&&null!==b)for(var d=0,e=c.length;e>d;d++)if(c[d].getAttribute("data-value")===b)return a(c[d]);return a()},getItem:function(a){return this.getElementWithValue(a,this.$control.children())},addItems:function(b){for(var c=a.isArray(b)?b:[b],d=0,e=c.length;e>d;d++)this.isPending=e-1>d,this.addItem(c[d])},addItem:function(b){F(this,["change"],function(){var c,d,e,f,g,h=this,i=h.settings.mode;return b=y(b),-1!==h.items.indexOf(b)?void("single"===i&&h.close()):void(h.options.hasOwnProperty(b)&&("single"===i&&h.clear(),"multi"===i&&h.isFull()||(c=a(h.render("item",h.options[b])),g=h.isFull(),h.items.splice(h.caretPos,0,b),h.insertAtCaret(c),(!h.isPending||!g&&h.isFull())&&h.refreshState(),h.isSetup&&(e=h.$dropdown_content.find("[data-selectable]"),h.isPending||(d=h.getOption(b),f=h.getAdjacentOption(d,1).attr("data-value"),h.refreshOptions(h.isFocused&&"single"!==i),f&&h.setActiveOption(h.getOption(f))),!e.length||h.isFull()?h.close():h.positionDropdown(),h.updatePlaceholder(),h.trigger("item_add",b,c),h.updateOriginalInput()))))})},removeItem:function(a){var b,c,d,e=this;b="object"==typeof a?a:e.getItem(a),a=y(b.attr("data-value")),c=e.items.indexOf(a),-1!==c&&(b.remove(),b.hasClass("active")&&(d=e.$activeItems.indexOf(b[0]),e.$activeItems.splice(d,1)),e.items.splice(c,1),e.lastQuery=null,!e.settings.persist&&e.userOptions.hasOwnProperty(a)&&e.removeOption(a),c<e.caretPos&&e.setCaret(e.caretPos-1),e.refreshState(),e.updatePlaceholder(),e.updateOriginalInput(),e.positionDropdown(),e.trigger("item_remove",a))},createItem:function(b){var c=this,d=a.trim(c.$control_input.val()||""),e=c.caretPos;if(!c.canCreate(d))return!1;c.lock(),"undefined"==typeof b&&(b=!0);var f="function"==typeof c.settings.create?this.settings.create:function(a){var b={};return b[c.settings.labelField]=a,b[c.settings.valueField]=a,b},g=D(function(a){if(c.unlock(),a&&"object"==typeof a){var d=y(a[c.settings.valueField]);"string"==typeof d&&(c.setTextboxValue(""),c.addOption(a),c.setCaret(e),c.addItem(d),c.refreshOptions(b&&"single"!==c.settings.mode))}}),h=f.apply(this,[d,g]);return"undefined"!=typeof h&&g(h),!0},refreshItems:function(){if(this.lastQuery=null,this.isSetup)for(var a=0;a<this.items.length;a++)this.addItem(this.items);this.refreshState(),this.updateOriginalInput()},refreshState:function(){var a,b=this;b.isRequired&&(b.items.length&&(b.isInvalid=!1),b.$control_input.prop("required",a)),b.refreshClasses()},refreshClasses:function(){var b=this,c=b.isFull(),d=b.isLocked;b.$wrapper.toggleClass("rtl",b.rtl),b.$control.toggleClass("focus",b.isFocused).toggleClass("disabled",b.isDisabled).toggleClass("required",b.isRequired).toggleClass("invalid",b.isInvalid).toggleClass("locked",d).toggleClass("full",c).toggleClass("not-full",!c).toggleClass("input-active",b.isFocused&&!b.isInputHidden).toggleClass("dropdown-active",b.isOpen).toggleClass("has-options",!a.isEmptyObject(b.options)).toggleClass("has-items",b.items.length>0),b.$control_input.data("grow",!c&&!d)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(){var a,b,c,d=this;if(d.tagType===v){for(c=[],a=0,b=d.items.length;b>a;a++)c.push('<option value="'+z(d.items[a])+'" selected="selected"></option>');c.length||this.$input.attr("multiple")||c.push('<option value="" selected="selected"></option>'),d.$input.html(c.join(""))}else d.$input.val(d.getValue()),d.$input.attr("value",d.$input.val());d.isSetup&&d.trigger("change",d.$input.val())},updatePlaceholder:function(){if(this.settings.placeholder){var a=this.$control_input;this.items.length?a.removeAttr("placeholder"):a.attr("placeholder",this.settings.placeholder),a.triggerHandler("update",{force:!0})}},open:function(){var a=this;a.isLocked||a.isOpen||"multi"===a.settings.mode&&a.isFull()||(a.focus(),a.isOpen=!0,a.refreshState(),a.$dropdown.css({visibility:"hidden",display:"block"}),a.positionDropdown(),a.$dropdown.css({visibility:"visible"}),a.trigger("dropdown_open",a.$dropdown))},close:function(){var a=this,b=a.isOpen;"single"===a.settings.mode&&a.items.length&&a.hideInput(),a.isOpen=!1,a.$dropdown.hide(),a.setActiveOption(null),a.refreshState(),b&&a.trigger("dropdown_close",a.$dropdown)},positionDropdown:function(){var a=this.$control,b="body"===this.settings.dropdownParent?a.offset():a.position();b.top+=a.outerHeight(!0),this.$dropdown.css({width:a.outerWidth(),top:b.top,left:b.left})},clear:function(){var a=this;a.items.length&&(a.$control.children(":not(input)").remove(),a.items=[],a.lastQuery=null,a.setCaret(0),a.setActiveItem(null),a.updatePlaceholder(),a.updateOriginalInput(),a.refreshState(),a.showInput(),a.trigger("clear"))},insertAtCaret:function(b){var c=Math.min(this.caretPos,this.items.length);0===c?this.$control.prepend(b):a(this.$control[0].childNodes[c]).before(b),this.setCaret(c+1)},deleteSelection:function(b){var c,d,e,f,g,h,i,j,k,l=this;if(e=b&&b.keyCode===p?-1:1,f=H(l.$control_input[0]),l.$activeOption&&!l.settings.hideSelected&&(i=l.getAdjacentOption(l.$activeOption,-1).attr("data-value")),g=[],l.$activeItems.length){for(k=l.$control.children(".active:"+(e>0?"last":"first")),h=l.$control.children(":not(input)").index(k),e>0&&h++,c=0,d=l.$activeItems.length;d>c;c++)g.push(a(l.$activeItems[c]).attr("data-value"));b&&(b.preventDefault(),b.stopPropagation())}else(l.isFocused||"single"===l.settings.mode)&&l.items.length&&(0>e&&0===f.start&&0===f.length?g.push(l.items[l.caretPos-1]):e>0&&f.start===l.$control_input.val().length&&g.push(l.items[l.caretPos]));if(!g.length||"function"==typeof l.settings.onDelete&&l.settings.onDelete.apply(l,[g])===!1)return!1;for("undefined"!=typeof h&&l.setCaret(h);g.length;)l.removeItem(g.pop());return l.showInput(),l.positionDropdown(),l.refreshOptions(!0),i&&(j=l.getOption(i),j.length&&l.setActiveOption(j)),!0},advanceSelection:function(a,b){var c,d,e,f,g,h,i=this;0!==a&&(i.rtl&&(a*=-1),c=a>0?"last":"first",d=H(i.$control_input[0]),i.isFocused&&!i.isInputHidden?(f=i.$control_input.val().length,g=0>a?0===d.start&&0===d.length:d.start===f,g&&!f&&i.advanceCaret(a,b)):(h=i.$control.children(".active:"+c),h.length&&(e=i.$control.children(":not(input)").index(h),i.setActiveItem(null),i.setCaret(a>0?e+1:e))))},advanceCaret:function(a,b){var c,d,e=this;0!==a&&(c=a>0?"next":"prev",e.isShiftDown?(d=e.$control_input[c](),d.length&&(e.hideInput(),e.setActiveItem(d),b&&b.preventDefault())):e.setCaret(e.caretPos+a))},setCaret:function(b){var c=this;if(b="single"===c.settings.mode?c.items.length:Math.max(0,Math.min(c.items.length,b)),!c.isPending){var d,e,f,g;for(f=c.$control.children(":not(input)"),d=0,e=f.length;e>d;d++)g=a(f[d]).detach(),b>d?c.$control_input.before(g):c.$control.append(g)}c.caretPos=b},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var a=this;a.$input.prop("disabled",!0),a.isDisabled=!0,a.lock()},enable:function(){var a=this;a.$input.prop("disabled",!1),a.isDisabled=!1,a.unlock()},destroy:function(){var b=this,c=b.eventNS,d=b.revertSettings;b.trigger("destroy"),b.off(),b.$wrapper.remove(),b.$dropdown.remove(),b.$input.html("").append(d.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:d.tabindex}).show(),b.$control_input.removeData("grow"),b.$input.removeData("selectize"),a(window).off(c),a(document).off(c),a(document.body).off(c),delete b.$input[0].selectize},render:function(a,b){var c,d,e="",f=!1,g=this,h=/^[\t ]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===a||"item"===a)&&(c=y(b[g.settings.valueField]),f=!!c),f&&(x(g.renderCache[a])||(g.renderCache[a]={}),g.renderCache[a].hasOwnProperty(c))?g.renderCache[a][c]:(e=g.settings.render[a].apply(this,[b,z]),("option"===a||"option_create"===a)&&(e=e.replace(h,"<$1 data-selectable")),"optgroup"===a&&(d=b[g.settings.optgroupValueField]||"",e=e.replace(h,'<$1 data-group="'+A(z(d))+'"')),("option"===a||"item"===a)&&(e=e.replace(h,'<$1 data-value="'+A(z(c||""))+'"')),f&&(g.renderCache[a][c]=e),e)},clearCache:function(a){var b=this;"undefined"==typeof a?b.renderCache={}:delete b.renderCache[a]},canCreate:function(a){var b=this;if(!b.settings.create)return!1;var c=b.settings.createFilter;return!(!a.length||"function"==typeof c&&!c.apply(b,[a])||"string"==typeof c&&!new RegExp(c).test(a)||c instanceof RegExp&&!c.test(a))}}),L.count=0,L.defaults={plugins:[],delimiter:",",persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,scrollDuration:60,loadThrottle:300,dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",optgroupOrder:null,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},a.fn.selectize=function(b){var c=a.fn.selectize.defaults,d=a.extend({},c,b),e=d.dataAttr,f=d.labelField,g=d.valueField,h=d.optgroupField,i=d.optgroupLabelField,j=d.optgroupValueField,k=function(b,c){var e,h,i,j,k=a.trim(b.val()||"");if(d.allowEmptyOption||k.length){for(i=k.split(d.delimiter),e=0,h=i.length;h>e;e++)j={},j[f]=i[e],j[g]=i[e],c.options[i[e]]=j;c.items=i}},l=function(b,c){var k,l,m,n,o=0,p=c.options,q=function(a){var b=e&&a.attr(e);return"string"==typeof b&&b.length?JSON.parse(b):null},r=function(b,e){var i,j;if(b=a(b),i=b.attr("value")||"",i.length||d.allowEmptyOption){if(p.hasOwnProperty(i))return void(e&&(p[i].optgroup?a.isArray(p[i].optgroup)?p[i].optgroup.push(e):p[i].optgroup=[p[i].optgroup,e]:p[i].optgroup=e));j=q(b)||{},j[f]=j[f]||b.text(),j[g]=j[g]||i,j[h]=j[h]||e,j.$order=++o,p[i]=j,b.is(":selected")&&c.items.push(i)}},s=function(b){var d,e,f,g,h;for(b=a(b),f=b.attr("label"),f&&(g=q(b)||{},g[i]=f,g[j]=f,c.optgroups[f]=g),h=a("option",b),d=0,e=h.length;e>d;d++)r(h[d],f)};for(c.maxItems=b.attr("multiple")?null:1,n=b.children(),k=0,l=n.length;l>k;k++)m=n[k].tagName.toLowerCase(),"optgroup"===m?s(n[k]):"option"===m&&r(n[k])};return this.each(function(){if(!this.selectize){var e,f=a(this),g=this.tagName.toLowerCase(),h=f.attr("placeholder")||f.attr("data-placeholder");h||d.allowEmptyOption||(h=f.children('option[value=""]').text());var i={placeholder:h,options:{},optgroups:{},items:[]};"select"===g?l(f,i):k(f,i),e=new L(f,a.extend(!0,{},c,i,b))}})},a.fn.selectize.defaults=L.defaults,L.define("drag_drop",function(){if(!a.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var b=this;b.lock=function(){var a=b.lock;return function(){var c=b.$control.data("sortable");return c&&c.disable(),a.apply(b,arguments)}}(),b.unlock=function(){var a=b.unlock;return function(){var c=b.$control.data("sortable");return c&&c.enable(),a.apply(b,arguments)}}(),b.setup=function(){var c=b.setup;return function(){c.apply(this,arguments);var d=b.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:b.isLocked,start:function(a,b){b.placeholder.css("width",b.helper.css("width")),d.css({overflow:"visible"})},stop:function(){d.css({overflow:"hidden"});var c=b.$activeItems?b.$activeItems.slice():null,e=[];d.children("[data-value]").each(function(){e.push(a(this).attr("data-value"))}),b.setValue(e),b.setActiveItem(c)}})}}()}}),L.define("dropdown_header",function(b){var c=this;b=a.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(a){return'<div class="'+a.headerClass+'"><div class="'+a.titleRowClass+'"><span class="'+a.labelClass+'">'+a.title+'</span><a href="javascript:void(0)" class="'+a.closeClass+'">&times;</a></div></div>'}},b),c.setup=function(){var d=c.setup;return function(){d.apply(c,arguments),c.$dropdown_header=a(b.html(b)),c.$dropdown.prepend(c.$dropdown_header)}}()}),L.define("optgroup_columns",function(b){var c=this;b=a.extend({equalizeWidth:!0,equalizeHeight:!0},b),this.getAdjacentOption=function(b,c){var d=b.closest("[data-group]").find("[data-selectable]"),e=d.index(b)+c;return e>=0&&e<d.length?d.eq(e):a()},this.onKeyDown=function(){var a=c.onKeyDown;return function(b){var d,e,f,g;return!this.isOpen||b.keyCode!==j&&b.keyCode!==m?a.apply(this,arguments):(c.ignoreHover=!0,g=this.$activeOption.closest("[data-group]"),d=g.find("[data-selectable]").index(this.$activeOption),g=b.keyCode===j?g.prev("[data-group]"):g.next("[data-group]"),f=g.find("[data-selectable]"),e=f.eq(Math.min(f.length-1,d)),void(e.length&&this.setActiveOption(e)))}}();var d=function(){var a,b=d.width,c=document;return"undefined"==typeof b&&(a=c.createElement("div"),a.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',a=a.firstChild,c.body.appendChild(a),b=d.width=a.offsetWidth-a.clientWidth,c.body.removeChild(a)),b},e=function(){var e,f,g,h,i,j,k;if(k=a("[data-group]",c.$dropdown_content),f=k.length,f&&c.$dropdown_content.width()){if(b.equalizeHeight){for(g=0,e=0;f>e;e++)g=Math.max(g,k.eq(e).height());k.css({height:g})}b.equalizeWidth&&(j=c.$dropdown_content.innerWidth()-d(),h=Math.round(j/f),k.css({width:h}),f>1&&(i=j-h*(f-1),k.eq(f-1).css({width:i})))}};(b.equalizeHeight||b.equalizeWidth)&&(B.after(this,"positionDropdown",e),B.after(this,"refreshOptions",e))}),L.define("remove_button",function(b){if("single"!==this.settings.mode){b=a.extend({label:"&times;",title:"Remove",className:"remove",append:!0},b);var c=this,d='<a href="javascript:void(0)" class="'+b.className+'" tabindex="-1" title="'+z(b.title)+'">'+b.label+"</a>",e=function(a,b){var c=a.search(/(<\/[^>]+>\s*)$/);return a.substring(0,c)+b+a.substring(c)};this.setup=function(){var f=c.setup;return function(){if(b.append){var g=c.settings.render.item;c.settings.render.item=function(){return e(g.apply(this,arguments),d)}}f.apply(this,arguments),this.$control.on("click","."+b.className,function(b){if(b.preventDefault(),!c.isLocked){var d=a(b.currentTarget).parent();c.setActiveItem(d),c.deleteSelection()&&c.setCaret(c.items.length)}})}}()}}),L.define("restore_on_backspace",function(a){var b=this;a.text=a.text||function(a){return a[this.settings.labelField]},this.onKeyDown=function(){var c=b.onKeyDown;return function(b){var d,e;return b.keyCode===p&&""===this.$control_input.val()&&!this.$activeItems.length&&(d=this.caretPos-1,d>=0&&d<this.items.length)?(e=this.options[this.items[d]],this.deleteSelection(b)&&(this.setTextboxValue(a.text.apply(this,[e])),this.refreshOptions(!0)),void b.preventDefault()):c.apply(this,arguments)}}()}),L});